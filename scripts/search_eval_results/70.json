[
  {
    "segment_id": "4b58e226-ec24-4762-b41e-61ddcfb2b111",
    "episode_id": "b67a00a1-bf07-4428-bcd9-67572eb7a06d",
    "episode_number": 70,
    "segment_number": 3,
    "text": "раз был вопрос по поводу репликации, то есть она такая довольно странная и зачем она вообще нужна в таком виде Ну да, вот это Реданации? Наверное нет, то есть у меня первое что в голову приходит, ну у тебя есть две машины, у них какие-то данные, у тебя оно in memory, но хоть какую-то дюрабилити хочется же иметь, ну не имеем дюрабилити на диске, но хоть будет дюрабилити по сети, не? Валер, понимаешь, тут вот такой вопрос, как бы, это просто тоже вопрос из контекста Highload, Света слушала доклад мой на Highload, после которого у нее остались эти вопросы И там обсуждалось, что репликация, как бы она есть, но она eventual consistent и она не дает никакой дюрабилити, потому что пока у тебя не существует это eventual consistent, все ноды могут попадать и никакой Да, само собой Ром, расскажи вообще как сделана репликация, думаю это будет интересно послушать всем А, в смысле повторить вот эту идею репликации Ну да, вот это сама идея, просто ребята же не слышат Да, репликация сделана следующим образом, есть такая идея наблюдения, что в таких доменных областях, как трейдинг, торговля высокочастотная, где происходит очень много событий, сообщений в секунду, частота этих самых событий, просто поток информации То, который нужно реплицировать между нодами, там может быть более сложный стейт, не просто коротенькое сообщение, типа кто-то купил или хочет купить такие-то акции, а уже более сложный стейт с какими-то моделями, чего происходит и так далее То есть просто поток информации, который нужно реплицировать, он превышает capability connect Подожди-ка, а как он к нам пришел, если он превышает capability? Нет, сообщение, просто кто-то хочет купить такие-то акции, это маленькое сообщение, а в key-value хранилище может по ключу какой-то ticket, какой-то развесистый стейт, который обновляется этим маленьким сообщением, и этот развесистый стейт надо реплицировать, и он может быть гораздо больше А как насчет реплицировать самого сообщения? Да, но вы же сами ответственны за то, как дизайнить ваше предложение, зачем же делать такой развесистый стейт, ведь можно же разбить на части Нет, ну допустим развесистый стейт обязан быть, но почему бы не реплицировать сообщение, если мы обновляем стейт на основе сообщения, почему не реплицировать само сообщение, если оно маленькое? Да, можно делать и так, собственно это и был такой немой вопрос аудитории, а почему не реплицировать сообщение, зачем нужна такая репликация, вы же меня просто постоянно отодвигаете от ответа на вопрос, и я не могу закончить мысль Да, прости Допустим, возьмем как данность, что нету capacity в сети полностью реплицировать какой-то объем информации, помимо того, что там может быть какой-то более развесистый стейт, который надо реплицировать, еще есть такие факторы, как количество нод, на которые надо реплицировать, то есть пришло сообщение одно, а надо реплицировать на несколько машин, то есть это уже умножает количество информации Не обязательно Ну да, есть мультикаст, окей Нет, и без мультикаста не обязательно, можно в цепочку их выстроить Кого выстроить? Машины, у тебя они одновременно, то есть у тебя не фан-аут получается, у тебя получается как бы цепочечная репликация, то есть у тебя есть выделенный сетевой интерфейс, который только этим занимается, у тебя вначале машина А, машина Б, потом машина Б, машина С Ну в конечном счете тебе все равно",
    "result": {
      "query": "eventual consistency replication highload"
    }
  }
]