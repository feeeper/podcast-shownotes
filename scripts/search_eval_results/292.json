[
  {
    "segment_id": "f0849590-e0f7-476f-ac0d-04603b8b5178",
    "episode_id": "bde3ea8f-40df-481b-a11e-e9414e878a61",
    "episode_number": 292,
    "segment_number": 6,
    "text": "обрабатываем только пакеты, но не переходим в юзерскую задачу, юзер не будет считывать всю пришедшую информацию, и, соответственно, мы в конце концов все наши бусеры переполним, и мы будем давать отлупы на все пришедшие пакеты, потому что мы их не смогли разгрести, не успели разгрести. Поэтому мы на самом деле, как происходит в ядре, мы переключаемся, мы будем еще один процесс, который называется K-Soft-RQD, который в ядре всегда видно, если вы там Пэс запустите, то он будет вам отображаться на каждом ядре, и это уже стандартная задача, которая работает, по-честному, деля время вместе с юзерскими задачами, которая, когда переключаясь на, соответственно, вытаскивание полинг и пакетов из сетевой карты, вот, она будет делить время, она будет какое-то время вытаскивать, потом переключаться на юзерскую задачу, потом снова вытаскивать и снова на неюзерскую задачу, то есть ядро уже будет честно шедулить обработку пакетов и обработку и работу юзерской программы самой. Вот, они предположили, что где-то в этом месте происходит проблема, они написали BCC-скрипт, который, соответственно, здесь тоже есть, вот, и этот BCC-скрипт, это мы много раз обсуждали, как работает EPPF, вот, это чистый водо-EPPF, это, сейчас я правильно скажу, это фактически сишный, BCC позволяет написать сишный код, который ставится как обработчик какого-то события в ядре, он работает очень эффективно, вот, и он посылает, соответственно, в приложение, которое работает уже не в ядре, а на юзерской стороне посылает информацию, и они сверху написали Питоновский обработчик этой информации, вот, вы можете посмотреть, они, соответственно, все разместили, почитайте, он довольно интересный, но легко читается, вот, и они собрали информацию, оказалось, что до того, как приходят вот эти пакеты, которые обрабатываются очень долго, и они здесь это увидели, что да, обработка на самом деле долгая, что до этого работает C-advisor, вот, и в течение достаточно долгого времени они поняли, что этой информации не хватает, и они решили сделать еще и срезы каждое какое-то количество миллисекунд, на самом деле они сделают 999 вызовов к ядру за минуту, вот, они делают просто срез стека, чем занимается ядро в данный момент времени, вот, и они, соответственно, смогли понять, чем ядро занималось, и вот объединив все эти подходы, то есть, первый подход, это они смотрели, значит, с помощью BCC скрипта, кто, когда, как обрабатывал, а потом еще они смотрели до этого момента времени, кто, чем занималась ядро, так, что оно никак не могло начать разгребать пакеты, вот, то есть, как бы, если пакет обрабатывается, если, блин, я сейчас вас запутаю, наверное, вы уже запутались, то есть, представляем, что мы... Да, вон, я запутался уже, не знаю, как бы, в тот момент как-то перешел к тому, что есть специальный процесс, который нужен для того, чтобы ядро честно шедулило как это, выгребание пакетов, я потерял уже предыдущую И да. Вот я сейчас хочу как раз объединить. То есть, представляете, что вы пингуете сервис, по барабану, пусть это будет просто пинг. Вот, вы пингуете сервис, приходит какой-то пакет до сервиса, потом он приходит обратно, и вы смотрите, отработало хорошо, вы говорите, окей.",
    "result": {
      "error": "API request failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-xSG9D345gtYlIKC330wCyrEG on tokens per min (TPM): Limit 30000, Used 30000, Requested 1742. Please try again in 3.484s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}",
      "stack_trace": "Traceback (most recent call last):\n  File \"/home/andrei/Projects/podcast-shownotes/scripts/build_search_eval_dataset.py\", line 157, in generate_search_query\n    response = await self.client.chat.completions.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 1927, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1767, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1461, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1547, in _request\n    return await self._retry_request(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1594, in _retry_request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1547, in _request\n    return await self._retry_request(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1594, in _retry_request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1562, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-xSG9D345gtYlIKC330wCyrEG on tokens per min (TPM): Limit 30000, Used 30000, Requested 1742. Please try again in 3.484s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n"
    }
  }
]