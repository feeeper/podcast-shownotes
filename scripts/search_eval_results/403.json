[
  {
    "segment_id": "50f264e8-ecef-4d1b-abac-71f404e96cc2",
    "episode_id": "bcf9cf96-7230-4a7e-b197-ae906cf7713e",
    "episode_number": 403,
    "segment_number": 7,
    "text": "Я пометил, оказывается, что в худшем случае, в худшем сценарии, когда ты пишешь много маленьких записей в write-ahead log, у тебя увеличивается его размер примерно на 5%. Это когда у тебя записи по 60-70 байт. И это в худшем случае обычно ты, ну то есть у тебя в write-ahead логе может быть целиком страница вся записана, 8-килобайтная. И там, понятно, overhead будет ещё меньше. Вот, я не знаю, что делала проблема ксида wraparound в этой конкретной лекции, но мне показалось интересным в этом контексте рассказать про то, что сейчас в сообществе с ними творится. Всеми силами пытаемся от них избавиться. Нет, ну подожди, ты же совсем от них не избавишься, у тебя всё равно будет wraparound, просто он будет сильно позже. Ну, я тут посчитал, что если ты делаешь 1 миллиард транзакций в секунду, что на постгрессе непросто достичь, тогда твои транзакционные ID закончатся через примерно 500-600 лет. То есть предполагается, что тогда вообще все процедуры, которые сейчас призваны избегать wraparound, они все просто будут выключены или они останутся, всё-таки просто будут очень редко срабатывать? Предполагается, что нет, в смысле у тебя всё ещё будет это кольцо из транзакционной ID, просто у тебя транзакционная ID никогда не кончится. Ну, в теории, если ты запустишь транзакцию на 600 лет, и не будешь её коммитить, и оставишь эту машину 600 лет работать, то ты можешь налететь на ситуацию, что транзакционные ID кончились. Но повторюсь, я в этом патче имею отношение к меньшему половине, которое менее ценно и менее сложно, поэтому я могу не знать каких-то деталей, и вы делите на всякий случай на 2, на 3 то, что я вам тут несу. Я хочу полюбить более основательно, тем более я немножко подтянул свои знания о баз данных в последние полгода. Может быть придут какие-то дополнения в будущих выпусках. Я хотел ещё про сообщество рассказать, очень интересно, у тебя в email.inclused приходят люди, они такие, ну блин, на самом деле вы не понимаете, но transaction wraparound это неплохо, это на самом деле очень хорошо, потому что когда у людей база данных встаёт колом и не может ничего исполнять, это является индикатором того, что система неправильно настроена, и возможно вакуум нужно делать чаще. И давайте оставим этот индикатор, чтобы вот у людей всё ломалось, и они знают, что у них есть проблемка. Я понимаю, что сколько людей, столько мнений, но мой ответ на это, что да, система должна сигнализировать пользователю о том, что она неправильно настроена, и о том, что она имеет проблемы, но специально ломаться, чтобы об этом сообщить она не должна.",
    "result": {
      "query": "PostgreSQL transaction wraparound problem"
    }
  }
]