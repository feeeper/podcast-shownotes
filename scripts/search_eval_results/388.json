[
  {
    "segment_id": "51c721ad-cc53-4935-baea-b4b520ab9376",
    "episode_id": "62bfb68e-fba5-4388-bf4b-5d745b972721",
    "episode_number": 388,
    "segment_number": 12,
    "text": "Вот такой вопрос. Отвечает Валера. А что сразу я? Я вот не представляю, как ему такое отвечать. Практики и статьи. Вот мы раньше рекомендовали такую обзорную книжку, даже не книжку, скорее такую очень длинную статью про всякие дистрибутитистические штуки. Я честно сходу ее не найду. Не, ну книжка с кабанчиком. Не, книжка с кабанчиком, она огромная, но да, я думаю, что она подходит тоже под это описание. У нас был гораздо более короткий материальчик, чтобы дать какое-то общее представление. Но вообще, наверное, прям рекомендации готовых никто вам никогда не даст ни для чего. Наверное, нужно разобраться в вопросе, насколько у вас есть времени в этом разбираться и принять решение. Но, наверное, в большинстве случаев, прям вот, на сегодня, скажем, как сегодня строят системы, это не идеально, но вот, скажем так, 99% систем, наверное, можно смело строить на строго ЦП-системах и не смотреть в сторону АП-систем и не вилить в ЦА-системы, потому что это просто обман. В смысле, вам не договаривают что-то в документации. Наверное, я бы хотел жить в мире, где АП-систем больше, и я периодически приношу всякие темы про local fair software и тому подобные вещи, но без этого можно жить. Если вы не уверены, удобно вам будет жить в IP-мире или не очень, CP-мир немножко более привычный и понятный, и на сегодняшний день не так уж необходимо это вопрос спрашивать, потому что, когда эта тема была на хайпе, у людей была проблема с тем, чтобы поддержать над тогдашним железом. У нас есть такая, у меня в голове есть, во всяком случае, такая условная планка, миллион daily active users и, скажем там, не знаю, тысяча concurrent users. Это такие цифры, когда вы успешный бизнес, но вы еще успешный бизнес не глобального масштаба типа Facebook и Google, а уровня одной страны, наверное, или там, не знаю, скажем, уровня крупно-российский бизнес или крупно-европейский бизнес, который обслуживает несколько европейских стран. Вот, это масштаб, когда на сегодняшний день это уже вполне можно вместить в одну жирную машину с позгрессом плюс реплику. Когда эта тема была очень популярна, это было сделать еще физически нельзя. Когда вы перерастете этот масштаб, и даже уже на этом масштабе вы можете начать себе позволить нанимать людей, которые там будут специально думать таким вещами, строить вам специальные системы, все что меньше, можно просто не заморачиваться и смело заниматься исключительно, смотреть исключительно на классические базы данных, там подобные вещи, на классические CIP системы, строго консистентные системы. А когда вы сильно больше, там уже и деньги будут нанять просто прям супер-экспертов в области. Я хотел прокомментировать, что зачем вам определять характер будущей системы? Делайте все по скраму. Сделали MVP, показали заказчику или виртуаливим вашу заказчику, оценили плюс и минус, поняли куда двигаться дальше по rootmap, соформировали новые требования, делаете новую версию. Сейчас она у вас CIP системы. Потом посмотрели, попользовались, фидбэк от пользуясь не получили, поняли, что должна быть не CIP и компонентная разбивка изначально была неправильная. А я приведу пример, когда неплохо бы сразу понимать, это когда, например, мы хотим, в принципе, у нас есть какое-то такое требование, которое нам, если мы на него внимательно посмотрим, говорит, что AP-система будет прям сильно лучше. Например, вот мы, я приносил пару недель назад, уже наверное месяц назад, выпуск историю про то, как ребята делают приложение для борт-проводников, который работает на самолете. У тебя внутри самолета, допустим, одна локальная сеть, потом борт садится, синхронизируется с интернетом и вот это все синхронизируется туда-сюда обратно. Такое в рамках CIP-системы сделать, наверное, если невозможно, то сложно корректно сделать, применяя подходы, которые привычны в AP-мире, такое сделать проще. То есть, если вот есть такие вот особые ситуации, когда об этом нужно подумать заранее, но скорее всего у вас не одна из них. Я посиняюсь к Саше, потому что это, ну, какую проблему мы решаем, потому что, ну, я так понимаю, сейчас задача на уровне технического задания и началась разработка. Обычно это очень раннее стадие и, скорее всего, у вас очень мало будет пользователей в начале, но сделайте то, что можно будет проще менять в последствии, потому что вы запуститесь, вы поймете половину фич, которая на самом деле никому не нужна, вы переделаете эту систему тысячу раз. То есть, ориентируйтесь на то, что будет проще менять и делайте как можно меньше решений, которые поставят вас в угол, из которого вы не выйдете. Вот, скорее так я бы смотрела. Я нашел ссылку, называется Distributed Systems Fun and Profit в KitSkills.com и добавил в карточку. Мне кажется, она не дает ответа на вот этот вопрос. Она не дает ответа, но она такая, она дает, это хорошая обзорная вещь, чтобы вообще понять пространство решений. Я хотел добавить, что плюсую ко всем предыдущим мнениям, но большинство разработок, когда вы хотите точно понять, что же вы, что вы же делаете и что вы хотите сделать, это надо понять, что требуется сделать, что ваши пользователи хотят сделать. Поэтому я бы еще очень много внимания уделил пониманию, как, не знаю, почитать книжек по Product Management, попытаться построить как можно больше User Stories, попытаться поговорить с реальными будущими пользователями или с нашими пользователями, если у вас что-то есть, описать список их use-case, описать, что же они хотят делать с системой и что они в дальнейшем планируют делать с системой в пределе одного, двух, пяти лет. Понять, какие из этих use-case им вот сто процентов нужны, иначе они от вас уйдут, а какие из use-case это вы можете сказать, ну как бы мы это сделаем когда-нибудь в будущем, может быть. И когда вы вот этот вот полный список нарисуете, очень большая часть требований и очень большая часть системы становится понятна. То есть вам сразу становится понятно, что вот это невозможно сделать вот таким хранилищем, а из таким хранилищем у нас есть только один выбор, вот такое хранилище, или там, ну все что угодно, то есть как бы, поэтому я думаю, что как таковых вот четко описанных критериев и практик нет. Есть направление понять пользователей, есть направление разобраться в текущих способах построения распределенных систем, есть направление понять как делаются хранилища и какие типы хранилища, какие они дают вам возможность для построения продукта, и потом когда вы все это вместе суммируете в вашей голове, должна сложиться мозаика вся, и вы должны понять, что вы хотите делать, и что вы будете делать. Но и плюс это надо делать обязательно, строго это надо делать, как Саша сказал, шаг за шагом, то есть сделали какой-то MVP, показали клиентам, и с ними они внезапно поняли, о, мы хотим совсем другое, давайте что-то все переделаем, и надо это делать только по чуть-чуть, понемножку. Да, тоже хороший совет. Еще такой вариант может быть, что представьте себя на месте пользователя, и вот ваш какой путь у этого пользователя, вот, не знаю, первый шаг, а какие, хорошо, какой должен быть логин, если у вас должен ли у вас быть логин, а кака заустойчивым в плане разных датцентров, или вы, или вам совершенно окей, когда будет один датцентр. То есть, когда вы начинаете думать с точки зрения вашего пользователя, что значит, что система будет AP, и что значит, что если система будет CP для вот этого человека, и какой из этого датцентов вы предпочтите для вашей системы, и это поможет вам понять, какую базу данных использовать, либо какую",
    "result": {
      "error": "API request failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-xSG9D345gtYlIKC330wCyrEG on tokens per min (TPM): Limit 30000, Used 30000, Requested 3636. Please try again in 7.272s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}",
      "stack_trace": "Traceback (most recent call last):\n  File \"/home/andrei/Projects/podcast-shownotes/scripts/build_search_eval_dataset.py\", line 157, in generate_search_query\n    response = await self.client.chat.completions.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 1927, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1767, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1461, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1547, in _request\n    return await self._retry_request(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1594, in _retry_request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1547, in _request\n    return await self._retry_request(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1594, in _retry_request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/andrei/Projects/podcast-shownotes/envs/lib/python3.12/site-packages/openai/_base_client.py\", line 1562, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-xSG9D345gtYlIKC330wCyrEG on tokens per min (TPM): Limit 30000, Used 30000, Requested 3636. Please try again in 7.272s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n"
    }
  }
]