[
  {
    "segment_id": "4fed3a00-b5c0-4d28-9825-ce70be411780",
    "episode_id": "6578438b-a5d9-4fab-b259-8952a5116d1a",
    "episode_number": 256,
    "segment_number": 13,
    "text": "В общем, завезли экстеншен к Postgres, который, собственно, позволяет засовывать в Postgres функции, написанные на WebAssembly. Сразу скажу, что сделал он немножко странненько. То есть в Postgres можно вообще говоря добавлять поддержки языков, прям языков-языков. Здесь сделал немножко не так, как немножко как-то через жопу, мне кажется. Не очень вчитывался. Мне кажется, что немножко как-то странненько выглядит эта поддержка. Ну, anyway, направление хорошее, потому что оно позволяет, по сути, написать функцию, хранимую на языке, который при этом быстро. То есть там всякие Ruby и уж тем более PLPGSQL, они позволяют быстро, ну или там Perl, позволяют быстро что-нибудь там прототипировать, нафигачить, но у них есть проблема, они довольно медленно исполняются. Ну, как бы там есть графики, там сравнение WebAssembly с PLPGSQL. И там на большом количестве итераций разница прям очень ощутимая. То есть типа там, мне кажется, там чуть ли не в сотни раз, а чуть ли не больше, может даже в тысячу раз. Да, в общем, там разница в два порядка что ли между WebAssembly и PLPGSQL на большом количестве итераций. Ну и, собственно, всегда есть вариант писать на C, но писать на C это... Ну, кстати говоря, даже под Postgres на C писать не очень сложно, потому что Postgres имеет для этого хороший фреймворк внутри себя, то есть это довольно приятно писать с личной экстеншеной к Postgres, но там скорее другое, что если вы пишете что-то нетривиальное, что-то какое-нибудь такое бизнес-логику, а не что-нибудь про тип данных, то вам будет довольно сложно с ней отлаживать, и там не зная, как они работают со строками, все даже вот с этим Postgres фреймворком это, ну, такое себе удовольствие. В теории, если эта штуковина хорошо бы работала и поддерживала, например, те же самые строки, потому что сейчас она поддерживает только целые числа, то оно позволило бы писать какие-то такие сложные, замороченные, около бизнес-логиковые вещи, которые сейчас пишутся на PLPGSQL, писать их на что-нибудь таком, с одной стороны, более человеческом, современном, с другой, что оно бы быстрее выполнялось, и при этом не нужно было бы делать fallback на C. В принципе, да, идея клевая, реализация пока странная и очень ограниченная, но надеюсь, что зато что-нибудь выйдет как-то так. Отличная смузи в отличном Postgres. Слушай, а может быть про Go Lang мы это попозже, или мы хотим сейчас? Да можно и попозже, в общем-то, не то чтобы суперсвежие новости. Хотя, с другой стороны, нет, подожди, это неделя, да там буквально одной строкой, секунду. Давай, давай тогда расскажу, я не читал это. Ну, там читать особо нечего, то есть мы про модули в Go уже больше раз тут говорили. Собственно, дело-то такое. Сори, я тут немножко перемещаюсь. В общем, я не то чтобы прям главный специалист по Go Lang, к сожалению, главного специалиста по Go Lang сегодня нету, но в общем идея в том, что когда сделали модули, и все порадовались, что наконец-то в Go есть система зависимости, похожая на что-то такое, как в современных языках, но пара моментов до сих пор оставалась неразрешенными. Во-первых, оно высасывало целиком репозиторий, что может быть не очень клево, потому что это не быстро. То есть, если вы пользовались там какими-нибудь RubyGems или не знаю, это чем угодно, тем же Lexirovским миксом, когда зависимость вытягивается как пакет, Gtems, ltrgz, архивчик от куда-то сервера, это очень быстро, а когда нужно скачать кусок репозитория, это гораздо медленнее. Ну и соответственно, они решили, что давайте мы сделаем каширующий прокси. Для всех публичных зависимостей, ну там для непубличных тоже можно, если правильные флаги поставить и прописать свой какой-то корпоративный прокси, но все публичное засунутое на GitHub, оно просто будет автоматически добавляться на этот такой типа дефолтный прокси, который будет при этом полную мою репозиторию просматривать и отдавать соответственно только нужные",
    "result": {
      "query": "WebAssembly functions Postgres extension"
    }
  }
]