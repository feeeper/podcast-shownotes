[
  {
    "segment_id": "403cc589-b9b7-4408-8909-b73233f73b9d",
    "episode_id": "b56c9502-785b-423d-acaf-179b09422762",
    "episode_number": 100,
    "segment_number": 4,
    "text": "там один мужик, который, собственно, писал в SSI в Postgres, и вот он его искал достаточно долго, не то, что он весь этот год сидел, но вот через год только он там родил патч, нашел и вставлял он там прямо по самой жести, то есть он random sleep вставлял между строчками, и вот только так он это нашел. Ну, опять-таки для того же самого Erlang, почему я его люблю для написания таких систем, для него есть тулы, которые random sleep за тебя вставляют на основе пропера как раз, это еще не все, что есть от QuickCheck. Ну вот QuickCheck это было бы круто, конечно. Ну, пропер QuickCheck это примерно одно и то же на самом деле, и у того же самого QuickCheck у них есть платная версия, которая умеет с Cишечкой интегрироваться, в принципе, мне кажется. А у QuickCheck есть какая-то эталонная реализация, я просто знаю, что их там штук 50. Ну, собственно, люди, которые дали подходу QuickCheck, название QuickCheck, у них есть компания Quick, и они продают QuickCheck. И они продают Check, понятно. Она не Quick, как Quick, а Q, U, I, Q. Понятно. Вот, ну, в общем, я на самом деле как бы рекомендую, то есть как бы как минимум, то есть я понимаю, что в C замокать какой-то кусок интерактивного, кусок происходящего тяжелее, но все равно, мне кажется, property based может помочь просто даже для тестирования вариантов системы в целом, вот, даже если ничего не мокать. Можно, и можно мокать не на C, это тоже большой плюс, если там что-то сетевое мокаешь, то там не обязательно C должен быть с той стороны. Но, кстати, при желании можно делать динамические библиотеки и через них мокать. Я понимаю, что это не очень удобно. Ну, да. Ладно, застрелим на этот момент. У нас тут с Валерой замечательная новость есть. Да, вот мы тут говорили про вот эту страшную, интересную координацию запросов. На самом деле, компания, где мы с Сашей работали в свое время, у нас сейчас просто срочно ищет эрлангиста, которому как раз предстоит работать со всеми этими веселыми вещами. Кратко напомню, в общем, хранилище котировок, порядка 50 тысяч сообщений в секунду, которые прожевываются кластером, приложение написано на основе React Core на диске RuxDB, отличнейший офис, уютнейший в Хамовниках, в метро Фрутинская или Киевская, вот, в общем, там любят, не обижают, и вообще хорошие, и пушистые. Строго рекомендуем, особенно если вам интересен эрланг, или даже если вам не очень интересен эрланг, но вам интересно поработать с распредельными базами данных, то у вас, на самом деле, в принципе, в России, мне кажется, сейчас две опции. Это вот либо экзанты, либо вот, собственно, в Postgres Pro и каким-то образом попасть в команду мультимастера. Мне кажется, я вот не знаю, где еще. А, еще, возможно, эти ребята из... Яндекс, Яндекс попробовали. Яндекс. Они же заберели свою базу данных. А, еще кто-то был. Такие ребята, которые работают на Запад. Как же они назывались-то? Да это... Не помню, как же они назывались-то? Прямо-то как очень известная, по-моему, питерская... А, нет, Меш... Как же они назывались-то? Вспомнишь, назовешь. Да. На самом деле, чем еще экзанты примечательны, если вам, не знаю, через три года внезапно надоест эрланг, можно пописать на скале. Там ее тоже любят, при том, ее там любят и на Бакенде, и на... Ну, на Desktop UI. И еще такой спойлер, на самом деле у них офис не только в Москве, есть просто сейчас еще и в Московске офис, но, в принципе, можно попробовать завести трактор. Ну все уже, все, все, расхвалились. Давайте следующий. Да, есть еще одна вакансия на самом деле. Ее я добавил, я зашел на этой неделе в Early Club, а там вакансия в Питере. Эрланг. Представляете? Да, Early Club, кто не знает, это такой чатик в Slack. А в Питере же есть несколько команд, которые на эрланге работают, чего вы удивляетесь? По-моему, если не считать вот московского экзанта, только в Питере пишут на эрланге. А еще в Яндексе пишут в Disk, но там маленькая команда, они туда не берут давно. Да, больше даже, я в Москве еще пару контор, я не помню, как они называются, но точно там было еще, то есть пару людей, которые там... Если я так скажу, я обошел все эти конторы, ты там не хочешь работать, скорее всего. Кроме, может быть, спутника, спутник был приличный. Ну там еще Вася в какой-то момент в какой-то конторе работал. И он оттуда свалил очень быстро. Окей. А спутник – это те, которые поисковик делали? Да, они вроде все еще делают. Нет, ну кстати, я понимаю, там смешно, спутник, да все такое, но конторы довольно приличные. А они много, за что им респект и уважуха, они много хорошего софта в Open Source выложили, то есть они там сильно подопиливали всякие Open Source тулзы для рисования карт в OpenStreetMap. Вот этот сервер, который рисует подложку, он там был мапник, они к нему сделали надстройку, которую назвали гопник. Да, на го-то-то-то. Да-да. Но она вполне себе хорошо работает, и в общем, молодцы, да. Еще они ходят и делают интересные доклады технические, такие занимательные. Давайте мы не будем читать чат. Да, я тоже прихожу к идее, что читать чат как-то дико тяжело, то есть читать чат и… Ну, в общем, к чему это мы все. Если вам интересен Erlang, и вы хотите с ним поработать, у вас есть аж два отличных шанса. А еще, если вам интересна расплеванная система, у вас отличнейший шанс поработать с TCG3, который только что вышел. Правда, Вань? Который не на Erlang, к сожалению, написан. На этой неделе очень много всего вышло, в частности, вот эти TCG версии 3. Они его давно очень пилили, и вот, наконец, выпустили. Они с гордостью говорят, что оно уже используется в распределенных системах, и говорят, что в кубернетах все уже работают на эти TCG3. То есть тут одновременно два анонса фактически друг за другом идут. И довольно много всевозможных изменений. Большинство... вот там есть блокпост, и в блокпосте чаще всего сравнивается версия 2 и версия 3, как было плохо, как стало хорошо. В частности, они начали использовать gRPC, который внутри использует портовав для эффективности, что позволило использовать мультиплексирование на HTTP2 для нескольких потоков на один http канал. Они ушли от TTL на отдельный ключ, что приводило... о, у меня такой эхо, слышно эхо, нет? Sorry, я просто кошелем, я забыл на эффо поставиться. Нет, вроде не слышно. Нет, у меня тут эхо. Они использовали в ETCD2, использовали TTL на один ключ, и для того, чтобы ключ не умер, его надо было делать апдейт. Соответственно, если у вас куча ключей, куча серверов, там их слушает, они могут делать их апдейт, пытаться. Это приводило... Подождите, я перебью немножко другую проблему. Раньше у тебя, если ты слушаешь много ключей, даже как один клиент, даже один сервер, то ты слушаешь много ключей, у тебя TTL на каждый отдельно. Да-да-да, я пытаюсь как раз то же самое сказать. А у тебя еще может быть несколько разных... Ну как-то один ETCD сервер используется для разных целей, разными другими сервисами, и каждый держит кучу ключей. И получалось, что у тебя очень много надо послать запросов для того, чтобы не делать ничего фактически. И сейчас они пришли к концепции Лиза. То есть Лиз вешается на большое количество ключей, и тебе надо обновлять только один раз Лиз, что автоматически все ключи обновит. То есть они не умрут. Затем они переделывали немножко ватчеры, как раз тоже для мультиплексеров. Они добавили MVCC для того, чтобы... В случае, если у вас есть ватчер, и вы слушаете изменения системы, и вот вам пришло изменение системы, там 20 штук сразу, в версии 2 у вас изменение, любое изменение системы, и обновление ключа удаляло старую версию ключа. И, соответственно, если вы, например, разбираете одно за одним обновление системы, вы могли наткнуться на ситуацию, когда у вас есть обновление системы, но старой версии ключа уже нет. То есть вам сказали, мы поменяли версию ключа, сходи-ка посмотри, что там стало, ты приходишь сюда, а у вас старой версии уже нет. Сейчас они ввели MVCC, то есть у вас сразу много версий висит, и удаление идет по какому-то таймеру, этот таймер настраивается в конфиге. То есть это уже вы сами можете что-то делать. Плюс они изменили структуру ключей, то есть до этого у них было эрготические дерево ключей, а сейчас они ввели плоскую структуру ключей, как это, binary key space. То есть я вот это не очень понимаю, что значит binary здесь, но в частности они позволили ссорить запросы делать с разной семантикой, которая позволяет реализовать как эрготическое дерево, так и какие-то более упрощенные случаи. Я так понимаю, binary в том смысле, что там просто произвольные бинарии туда кладешь, то есть им плевать что там за ключ, мне кажется. Вот они что-то имеют в виду. То есть не обязательно даже строчка? Ну по-моему да, видимо это имеется в виду. Но там же протобав, скорее всего. А, ну может быть. И последнее, что мне показалось интересным, это они добавили мини-транзакции. То есть может быть несколько условий, если то, то, то и то, то тогда провести какую-то транзакцию. Это не полноценная транзакция, но что-то все равно позволяет какой-то версионирование и контроль ввести, добавить. Я так понимаю, они это сделали в имя того, чтобы сильно проще можно было работать со всякими распредельными локами, всякими такими штуками. И собственно они, еще один такой, может быть я прослушал, а то уже сказал, но они ввели, они вернули обратно настройки для выбора лидера и распредельных локов. То есть раньше они у них в какой-то момент были, они сказали, что извините, интерфейс сломан к этому, и потом его даже задуприкейтили и убрали. И вот они работали, сделали релизы, сделали нормальные транзакции, и наконец они вернули назад, как я понимаю, то ли они это вернули даже как API, то ли они это вернули просто как возможность это делать, но в любом случае теперь делать выбор лидера и сложные распредельные локи стало сильно проще, и в общем ура-ура, я одобряю этот релиз. Вот, но и одновременно с этим вышел кубернетис 1.3. Это очень большой релиз, очень большой апдейт. Если честно, ченнедж лог читать вообще очень сложно, потому что версия 1.3 началась еще до того, как выпустилась версия 1.2, потому что у них сразу несколько срезов, и у них там было pre7, pre6, pre5 или в обратной последовательности, и между ними все ченнедж логи надо читать полноценно. Это вообще реально тяжело. В качестве основных изменений, они упростили автоскейлинг, то есть теперь вы можете сами задавать какие-то дополнительные метрики, например, количество квери в секунду на один хост, на один миньон. Если у вас... фу, ты на один под, прошу прощения. Если у вас... Я тебя должен прервать, ты не видишь чат, Стас пишет, что ему надо бежать. Да, я не вижу чат. Чат, ну чат. Стас, скажи всем пока, и у тебя есть последнее слово, там, попиарить проект, и пока не все, и все как обычно. Что же тема была? В общем, всем спасибо, слушателям. Тоже спасибо за вопросы. Если что, пишите, проще всего, наверное, в Твиттер, я буду отвечать. Вот. Кубернет сила, и это седая сила, а подгрязь еще больше. Всем спасибо. Да, пока, Стас. Пока. Слушайте, вообще реально тяжело и тему рассказывать, и в чат поглядывать, и во второй чат поглядывать. И вот обрати внимание, как у нас дискуссия стала иначе звучать. Да, да, да, да, слушайте, на самом деле все меняется. Так, на чем я там остановился? А, вы можете сами теперь формировать какие-то метрики, и это на самом деле достаточно удобно, то есть раньше можно было только ЦПУ указывать, а сейчас вы говорите, вот, у меня количество запросов на под, и давай-ка сам мне скалирую автоматически. Вот, они добавили начальную поддержку Stateful Applications, в частности, альфа-фичи APETZ, это перманентные имена хостов, автоматический прорежнинг персистентных дисков. Вот тут подробнее ты это не смотрел? Я посчитал обзор, я не смотрел функциональность саму. Ну, то есть идея там основная какая? Когда у тебя есть произвольный репликашн-контроллер, скажем, ты хочешь запустить Zookeeper позади, у тебя стартует, убивается старая нода, стартует новая нода, вернее, под, с каким-то новым именем, совершенно левым, тебе вообще тяжело контролировать что-то. То есть, скажем, был какой-то лидер, куда он убежал, что там, куда было, у тебя имена поменялись, у тебя диск не подмаунтился, или тебе надо как-то что-то вручную настраивать, куда он маунтится, под кем он маунтится. А здесь в подсете они добавили так, что, во-первых, у тебя ты можешь персистентный хостейм задать, то есть ты говоришь, у меня три ноды, три пода, и они называются ZK1, ZK2, ZK3, все. То есть если ZK1 умер, он стартует новый ZK и называет его ZK1 опять. Зэки. Подожди, а ZK это не связано с Zookeeper? Ну, я для примера говорю, у них Zookeeper это основной юзкейс, для которого они это пытаются делать, и многие используют Zookeeper консулы в продакшене на Kubernetes. Ну еще, так понимаю, кто-то приходил в комментарии, ключусь на гитхабе у кого-то в PopCassandra в продакшене, но в общем все, что само по себе умеет Distribution, мне кажется. Да, ну они просто Zookeeper используют в качестве примеров, поэтому я его тоже использую. Соответственно, если они у тебя называются одинаково, и ты их маунтишь, эти, как его, вольюмой им одинаково, то, соответственно, они продолжают работать, как будто бы этот старый хост продолжил работать после какой-то остановки. И плюс они добавили еще функцию по одноразовой инициализации на хост. То есть, скажем, вот ZK1 включился, и он сделал один раз инициализацию, что-то куда-то записал, не знаю, на диске что-то сделал, и все. При следующем включении даже на другом хосте этот самый пост ZK1 уже не будет делать эту функциональность, вызывать эту функцию. Слушай, такой вопрос, там персистентный вольюм, они при этом все еще из сети приезжают, то есть иметь локальный персистентный вольюм все еще нельзя, или как? Его, скорее всего, и не будет нельзя. Ну, там было обсуждение, чтобы иметь возможность there should be a local storage persistent volume, где-то где сразу после релиза 1.3 разгорелось активное обсуждение, которое я пока не успел прочитать. Там куча в почте писем, я его с этого трейда еще не читал. Но я так понимаю, они как раз... То есть там есть довольно сильный запрос на локальный сторж, потому что, ну представьте, есть кластеры машин с SSD, и ты этот SSD никак толком использовать не можешь, потому что у тебя все данные... Как только машина смигрировала, контейнер смигрировал, у тебя все данные пошли далеко. Ну да, а как ты персистентно его сделаешь? Ну, вот запустил ты теперь его на другой машине, а тебе надо к той же... А почему не запускать на другой машине? Прибивать кластьями к машине, ну это же нормально, в принципе, для какой-нибудь Кассандры. А, ну ты это можешь сделать и сейчас. А, можешь разве? Ну ты можешь лейблы указать для пода. А, при этом, контейнер, мне кажется, сорри, дисковый хранилищ, мне кажется, все равно потеряется. Ну возможно, как раз с помощью подсет-функции автоматического провижнинга персистентных дисков она может сработать. Я вот не читал еще, как они это сделали. Так, следующая штука. Это какой-то мини-куб. Вот это вообще классно, я хочу глянуть туда. Это локальный девелопмент Кубернетеса. То есть, я так понимаю, что-то вроде Вагранта, ты в Вагранте запускаешь там, и у тебя все это делается. Мы дофигища времени потратили для того, чтобы сделать нормальный Кубернетес в Вагранте. Аналогичный тому, что у нас в продакшне. А тут они все это сделали из коробочки, можно попробовать что-то. Очень классно. Плюс поддержка Рокета. Рокета? Рекета, Рокета, как он называется? Она же уже была. Они до этого делали, я так понимаю, в Альфе, а сейчас они уже не говорят, что это Альфа. Плюс поддержка Open Container Инициативы и Container Network Interface. Это из всего того же. Как это называется? Команда, компания, которая все это предложила-то? Блин, я забыл название. И они начали добавлять, что мне интересно, правило авторизации называется RBAC, Role Based Authentication Control, для того, чтобы группы авторизовывать уже. То есть у них сейчас есть на пользователя отдельная авторизация, называется ABAC. А сейчас они добавляют то же самое для групп. Это довольно удобно. Для них ее довольно сложно. И плюс аутентификация через Webhook. Ну то есть развивается. Мне не хватило того, что в подсете мне бы хотелось чего-нибудь побольше. Я не знаю, чего мне хотелось бы, если честно, но текущий подсет маловато. С другой стороны, подсет у них в Альфе сейчас. У них, кстати, 4 или 5 Альф здесь. То есть подсет в Альфе, вот это вот One Time Init Setup в Альфе, RBAC в Альфе, еще кто-то в Альфе. В общем, все в Альфе. Ну то есть такой релиз, который уже как релиз, а вроде как все Альфа. Кстати, интересно. Да-да-да. А, еще они добавили убернеттест лайф, Light. Это когда у вас есть несколько кластеров в разных дата-центрах, федерацию кластеров, грубо говоря, сделали. И имена, то есть DNS делается через AWS или Google Cloud Engine DNS. Для того, чтобы ты мог обращаться к произвольному кластеру. То есть, дожди, без Cloud Engine получается вообще нельзя? Судя по документации, нельзя. Но мне это не особенно нужно, я поэтому туда особенно не лазил. То есть они говорят, что полноценный убернеттест очень сложная штука, мы его хотим по частям делать, поэтому мы начинаем с убернеттест лайф. Ну, пусть будет хоть так. Согласен. Ну, в принципе, я основные штуки рассказал. Если полноценно читать changelog, то это вообще можно на день уйти в себя и вернуться нескоро. Вот. Вот. Ну, кто-нибудь еще? Так, куда там RBAG добавили? RBAG это в авторизацию, у них там ABAC он всегда был, а сейчас RBAG добавили. Это вообще что? Это я отвечаю на вопрос в чате. Нет, сейчас, аббревиатура это что? Я не в курсе. Это я вот только что рассказывал про авторизацию групп. Что это значит? Role-based authorization control. А, ABAC. Да, то есть у них сейчас есть ABAC, это то же самое для пользователей. Это ты можешь писать в видо, правило в конфиге видо, этот пользователь имеет права на чтение вот из таких вот namespaces, или этот пользователь имеет права на запись вот в такие namespaces. И так ты можешь делать для каждого пользователя. Соответственно, если у тебя есть группа с одинаковыми настройками, ты должен этого каждого человека вписать во все эти соответствующие строчки. То есть здесь они добавляют возможность работать аналогично с группами сразу. И это сильно упрощает конфиг. Окей. Кого-нибудь еще есть strong feelings по поводу кейтс? Или все довольны, ждут потрогать? Ну я вот на самом деле их жду потрогать. Я как только потрогаю, я буду иметь свое мнение, потому что так-то в Release Notes можно много чего написать, но если ты пишешь это в альфа, оно все не работающее. Потому что в альфа. А все остальные спят в Release Notes. Окей. Ну Саша вроде не спит, Саша вон курсором шевелит. Я не сплю, мне просто плевать. Окей. Вот это честно. Вот. На самом деле удивительно, что я не сплю, потому что я, честно говоря, забыл свой обычный кофе перед выпуском, но я не сплю. Я конкретно так сплю, я еще не знаю, мне тут обратно на день рождения надо идти, а потом еще нужно как-то завтра встать на самолеты. В общем я в недоумении, как я буду жить. Но видимо как-то придется. Вот. Я думаю тебе просто поставят хороший могильный камень. Почему мне должны могильный камень поставить? Ну потому что... Это подводка к теме. Это переход. Ааааа! Отлично, это настолько офигенный переход, да. Я уже сам забыл, что я тему называл нежно «История одного Тамстоуна». На самом деле не одного. На самом деле тут в блоге «Таракашка.дби» отличная статья про то, как они искали интересный... наскнулись на интересный кейс в «Рокс.дби», как они его собственно обошли. То есть там обходится он просто, ну, спойлер, средствами стандартного API, которые нужно было просто RTFM использовать. Вот. Но только не мы на него напоролись, это довольно интересно. То есть «Рокс», он же пытается делать... Не «Рокс», сори, «Таракашка», он пытается делать честный, как мы уже выше по тексту обсуждали, честные транзакции и честное МВЦЦ, и он пытается делать МВЦЦ поверх «Рокса». Что, кстати, с моей точки зрения, немножко сомнительное занятие, потому что, насколько я знаю, «Рокс» сам по себе внутри... Я не готов, ну, прям гарантировать, но мне кажется, он сам по себе внутри МВЦЦ, потому что, ну, это же LSM, и LSM, мне кажется, МВЦЦ внутри. Хотя я могу ошибаться. Вот. Так вот, ладно, вернемся к теме. Ну, вот они делают там МВЦЦ, поэтому они очень много пишут ключей, и больше того... То есть у них на каждый ключ есть много-много-много версий, а при этом у них так ключи заданы, что первые сортируются всегда заведомо наиболее последняя версия. Больше того, у них там есть еще такие штуки, как интент на запись, и типа... Да, при этом интент может удаляться, если транзакция откатилась. И поэтому они на самом деле... У них огромное количество ключей, которые появились, а потом были быстро удалены. И они в какой-то момент заметили, что если просто закинуть ворклоуд, который много-много чего вставляет, убивает, вставляет, убивает, вставляет, убивает, вставляет, убивает, или даже там просто начинает транзакцию и откатывает, у них накапливается как бы... То есть у них... Подождите, так, они еще не знали, что у них где накапливается, просто внезапно вставка становится раз в 10 медленнее. Какого хрена? Там даже не в 10, а в 20 раз там пишут. И, собственно, от этого они немножко офигели. Понятное дело, пошли профилировать. И они там, по-моему, и гошные тузы пользовали, и какие-то свои, которыми они уже обвесили все, что смогли. То есть у них они там, собственно, делают внутреннюю трассировку, называется Snowball Tracing. У них про это есть даже отдельная статья. Но речь, считается, даже не об этом, а о том, что они этим Snowball Tracingом... В кубернетах это все, да? А, все-все-все, мне надо было выпить кофе. Извини, что я тебя перебил. Вот, и у них там есть, собственно, даже X-Plane, более-менее работающий. Вот они этим X-Plane, своим собственным X-Plane, посмотрели, где что у них жрет время, нашли, что время внезапно проводится в пути в ROX. Очень много, и еще было где-то очень много времени... Не, не, не в пути в ROX. МВСС, Get Metadata и Transaction wasn't present. То есть всякие такие вот чеки метадатных занимают какое-то невероятное количество. И, в общем, они дошли до того, что у них, на самом деле, есть Bloom фильтры, которые... А, Bloom фильтры, в которые при этом почти никто не ходит. То есть даже до Bloom фильтров дело не доходит, при том, что все вообще в памяти, на самом деле. То есть там for cloud, как бы memory residential, и оно все равно тормозит. В какой-то момент они поняли, что у них там, когда они пытаются встать на ключ с нужным именем, там все равно происходит итерация по скепсису внутреннему. И дело в том, что оно проскакивает через много ключей, в которые можно было вообще не ходить, потому что они заведомо мертвые. Вот, проблема решалась довольно просто. Они как-то... Они просто так правильно... Они просто правильно используют API, они этому API дают подсказки, где максимально возможное значение ключа и минимально возможное значение ключа, чтобы по скепсису не шариться больше нужного. Погоди, API чего? ROX. Обычный API ROX. То есть решение уже было, им даже ничего патчить не пришлось, решение уже было в API ROX, которое нужно было просто аккуратнее использовать. Понял. Вот. И у них там производительность вернулась на круги своя, никакого больше 20-кратного внезапного проседания производительности не стало. Вот. Я, возможно, что-то упустил, возможно, они там как-то ещё боролись с тем, чтобы там стонов меньше городить, я, честно говоря, уже не помню. Вот. Собственно, я всё по этой теме. Если у вас какие-то мысли, я рекомендую статью по прочитанию, потому что, в целом, довольно занимательное чтиво. Довольно лёгкое, можно там даже по дороге куда-нибудь прочитать. Вот. Надо будет, да. Интересно. Так всё-таки, возвращаясь к этой трассировке, ты разбирался, как она у них работает? Нет пока. Ну, то есть, это, скорее всего, они просто сами заинструментировали кучу кода, как я понимаю. Угу. Ну, то есть, как в многих продуктах сделано, там тоже самое. У тебя Детрейс, он тоже по неполной магии работает. То есть, там есть немножко магии Детрейса, но в том же релане, кроме магии Детрейса. Подожди, подожди. Детрейс, это всё здорово, когда ты пишешь нераспределённую базу данных. Ну да, да. Вот. А мы писали распределённую приложенку на скале, когда там было довольно, ну, я не могу сказать, что это было очень много кода, но мы трейсили определённые вызовы именно вот прямо кода, мы трейсили сообщения, потом всё это сваривалось в логи, логи агрегировались, а по ним строились флеймграфы. Потому что вот без этой фигни ты прям не найдёшь, где у тебя отчёт архангельцев. Ну, всё так, да. В распределённой системе. Насколько я понимаю, они примерно это и делают. То есть, у них там, как бы я, прямо сейчас с Мериком смотрю в pull-request, у них там какой-то трейсер тоже везде и очень много кода, ну, несколько экранов кода, там есть какой-то трейсер, который они, походу, везде пользуются и теперь будут. Который, видимо, тоже куда-то будут складывать. Что-то под названием open tracing, GO. Вот. Даже интересно, что это такое. Ну, то есть, как бы у них, опять же, повторюсь, у них интерфейс к этому будет вывален вообще просто в их SQL. То есть у них есть explain, который выдаёт разбивку в миллисекунду даже вплоть до некоторых вызовов там глубоко внутрь. Кстати, вот этот open tracing выглядит интересно. Нужно будет в него поближе посмотреть. Может быть, в следующий раз мне придётся. О, привет, Вася! Мы тебя даже сегодня уже упоминали. Да-да-да. В часик зашёл наш бывший коллега. Тот неловкий момент, когда чат отстаёт от эфира на полминуты, а Валера отстаёт от чата на полминуты. Да, я извиняюсь заранее, что сегодняшний выпуск получился сумбурным. Это наш первый эксперимент с эфиром. В общем, извините, что здесь вместо эфира получился кефир, но вот будем, наверное, ещё немножко экспериментировать. Надеюсь, найдём какой-нибудь способ. Да, нам надо привыкать реально. Да. Но в любом случае получилось более интерактивно. Ну да, с этим не поспоришь. Дальше тема тушёдшего гостя, которую я, честно, не смотрел. Кстати, ты смотрел тему или это гостевая тема? Нет, нет. Нет, нет. Такая печаль. Но тема выглядит очень интересно. Я думаю, даже просто её не надо выбрасывать, нужно просто дальше скачать вниз. Я положил. А, ну что ещё? Тут кто-то притащил свежий релиз расты, повесил на меня, я осуждаю такой вот хилый решет. Нет, не правда, там стоит знак вопроса. Ну окей, ну всё равно. Кто-то ещё хочет про расты, кроме меня, поговорить? Я хочу поговорить, но ничего не знаю. Ну просто смотри, там в том-то и дело, что это типичный релиз расты, мне кажется, что релизы расты прежде чем вешать в новости нужно всё-таки смотреть, если что-нибудь интересное. Тут с натяжкой можно сказать, что из интересного они добавили ещё один способ вываливать API FC, который должен стать удобнее, более совместим со всяким, лучше оптимизировать вот это всё. Но это, пожалуй, единственный хайлайт релиза. Ну и там ещё куча перформанс-импрувментов, куча всяких там бираев и низко-новых платформ, но в общем как бы обычный релиз раста. Вот я обычно, как сказать, высказываюсь не особо за раст, но в последнее время он как-то становится мне всё интереснее и интереснее. Я думаю, это связано с тем, что я на C начал писать много и сталкиваюсь с реальными проблемами. Одна из таких проблем, с которой я буквально сегодня, ну сегодня, вчера и позавчера там 3 дня подряд сталкивался, это собственно отсутствие нормальных генериков, нормальных контейнеров с типами, назовём их так. И вот только ради этого я уже прям готов взять раст. То, что они ещё там накрутили поверх проверок на… Я уже забыл, что он там ловит, рейс конечно он ловит, да? Немножко. В общем, всевозможные проверки на многопоточность, ну да, оно немножко заумно, но раз чуваки написали, оно работает, ну и имеет право на жизнь. Вот, так что интересный язык. А я ещё начал на ГО немножко писать на этой неделе. И мне так не хватает вот этих растовских if это expression. Кстати, Ваня, ты впервые используешь ГО? Да, да, да, я тоже впервые. Как твоё впечатление? Сложно. Честно, говори честно. Что не нравится, что раздражает? Ну мне не нравится пока упрощённость языка, то есть они реально сделали его слишком простым. То есть я трогал этого раст немножко примерно так же, сейчас начинаю трогать ГО немножко примерно так же, и мне реально не хватает многих вот именно синтаксических вещей раста. Меня очень настроило, что я ожидал там, условно говоря, компилируемого Питона, а получился такой, чуть более высокоуровневый СИА. Ну то есть реально язык невыразительный, это мы уже про ГО. Кстати, Ваня, а что ты на нём пишешь? Я пока просто hello world. Ну в частности вот этот, как его сейчас делаю, один и тот же проект надо писать на разных языках, вот сейчас пишу преобразователь из Урла в Тайтл для нашего подкаста. Когда публикуем мы, мы Тайтлы пишем, вот сейчас на нём написал на ГО. В чате пишут, что С++17 намного интереснее раста. Ну С++17 всегда, то есть С++17 по умолчанию более интереснее раста, именно это причина, по которой я бы не хотел использовать С++17. Это знаешь, логика из разряда, что героин намного интереснее марихуаны. Кстати, на самом деле, дай голосовалку про ГО и раст. Ну кстати, такой момент. Ну камон, ну это же интересно. По поводу ГО, ребята из ГО, что мне очень нравится в ГО комьюнити, мне очень принято радоваться, что ГО язык скучный. Я как бы не стремлюсь, что мне не хватает некоторых вещей в ГО, я в целом одобряю, потому что, как это, в общем, у них, это один из немногих языков, на котором люди реально пошли решать проблемы вместо всяких других вещей непонятных. То есть, ну появился ГО, появилось, ну и конечно, в прошлом выпуске уже говорил, появился ГО, появились решения из некоторых классов задач, которые раньше не появлялись почему-то. Вот, и это радует. Кстати, по поводу раста, тут еще статья, которую я планирую как-нибудь взять, наверное, на следующий выпуск, но в общем, вкратце, в дропбоксе есть статья, про то, как они писали компрессион на расте. И у раста есть местами проседания производительности по сравнению с ГОМС, но они, как бы, в дропбоксе сказали, что мы готовы на это пойти просто ради сейфти. Типа там не такие сильные проседания, а сейфти мы получаем сильно больше. А вот не во всякой задаче прокастит. Ну, как бы, у них при этом там жати, то есть у них там код, который, то есть типичный C супер заоптимизирован, но опять же ожидается, что раст станет быстрее. То есть там, насколько я понимаю, у них основная проблема, которая прям такая непреодолимая. Это... точнее так, одна проблема, она отключается, то есть, грубо говоря, раст по умолчанию зануляет память. Это отлично в отладочном режиме, и даже, типа, можно какую-то процентку продакшна на этом гонять, но типа для... в принципе, можно задавление, как я понимаю, отключить. А менее решаемая проблема, то что там в расте есть баланс-чекинг везде, и если обычный он тебе не нужен, потому что для обычного прохода по коллекциям тебе баланс-чекинг не страшен, потому что ты просто терапиями ходишь и ты никаких баланс-чекингов не делаешь. Проблема в том, что конкретно к алгоритму сжатия им бывает нужно ходить назад по определенному смещению. И для этого, понятное дело, нужно брать операцию индексирования в коллекцию и, собственно, натыкаться на баланс-чекинг. Наверное, можно написать на ансейв подможестве, но ребята не хотят. Не хотят. Я их понимаю, да. А ты хочешь следующую тему? Давайте, наконец-то, мне слово. Я хочу порадоваться, т.е. тема состоит из двух частей. Я учитываю, что недавно возвращалась в Минск, и мой полёт задержали на 8 часов, и через буквально день-два мне твиттер прислал статью рекомендованную. Статья была от IBM, про то, как человек из IBM исследовал ситуацию с самолётами. Т.е. задача такая, как определить и предсказать, что будет задержка самолёта, учитывая погодные условия, с помощью SPARC и машинного обучения. Просто идеально мне твиттер вмостил. Я порадовалась, что у них алгоритмы действительно работают. И, собственно, статья следующая, что, во-первых, для получения этой PDF-ки с описанием того, как это происходит, вам нужно зарегистрироваться. Это плохая часть, но хорошая часть, что там довольно всё подробно описано. Описано, какие моменты нужно делать, т.е. нужно вам проанализировать данные, откуда эти данные брать, дальше какие API использовать, какие конкретно сайты указаны. В принципе, если вы хотите попробовать написать своё первое приложение с использованием машинного обучения и SPARC, и решить какую-то более-менее прикладную задачу, то это вполне неплохо. Но проблема в том, что в этой статье всё-таки идёт реклама IBM, и они показывают, как было бы круто использовать стулы от IBM. Но если вы просто не будете на это обращать внимания, и возьмёте чисто концептуальные идеи из этой статьи и замените на нормальные технологии, то вполне можно сделать что-то интересное. Т.е. как вводная статья и руководство для написания такого небольшого приложения, оно вполне годится. Т.е. я, в принципе, одобряю. Вопросы? Дополнения? У меня нет. И все ушли читать чат. Хватит читать чат. Уже про конференции послушайте, например. Ой, Света, может, это тебе тут про Беларусь. Не смотрел? Нет? Sorry, guys, я забыл размутиться. Я пытался спросить, я думаю, почему Саша так нагло не требует, а потом я забыл размутиться. Что ты хотел спросить? Они насколько подробно описали, что именно они там использовали из ML, насколько там это подробно описано? Они больше про архитектуру или больше про ML? Там есть про этапы решения задач, т.е. анализ, не анализ, а подготовка и получение данных, потом моделирование данных в питоне и подстройка непосредственно модели, и третья часть – анализ полученных результатов. Они описывают и говорят, какие библиотеки, какие частности, какие, в частности, алгоритмы из Spark и ML они используют. Так что, в принципе, просто не обращайте внимания на то, что там идёт такая хорошая реклама IBM. Вы можете взять любую другую базу данных для этого. Просто неплохая статья для старта. Окей, спасибо. Так вот, в Беларуси… Конференция в Беларуси. С 25 по 26 августа пройдёт конференция LVEE 2016. По-моему, мы уже год назад рассказывали про такую конференцию Linux Location Eastern Europe. То есть она про Linux, про Open Source и так далее. Я так понимаю, всё ещё собираются спонсоры, докладчики. И, по-моему, от нас никто не был там в прошлом году. Поэтому трудно сказать, насколько хорошая конференция или нет. Кто-нибудь, может, в чате знает на LVEE. Никто не ездил, нет? Ну, если кто-нибудь ездил, то потом расскажем. Собственно, это всё. Ссылка будет в шоу-ноутах. Вот, ознакомьтесь. Может, неплохая конференция. Насколько я знаю, эта конференция больше посиделки, укостра и разговоры по поводу Linux. Насколько я слышала от ребят, которые посещали. А, то есть ты такие знаешь этих людей? Ну, я ни разу не ездила, но у меня есть первые знакомые, которые ездили. Ну, мы поняли, да. Один твой знакомый ездил и рассказывал. Два, два. Нет, даже три. Туристы, небось, ешли? Конечно, да, да. Обязательно. Это не без этого. Звучит весело. Укостра за Linux. Что ещё звучит весело, тут на GitHub, ну, по крайней мере, я только сегодня увидел ссылку. У Apollo 11 было некое ПО на Assembler написано, и вот его залили, скажем так, уцелевшие части. Вот те исходники, которые остались, и народ смеётся над именами файлов. То есть, например, тут есть файл burnbabyburn, ну, там типа .s. Вот, ещё там есть комментарий, я не помню дословно, сейчас секундочку. Временное, я очень-очень-очень надеюсь. Да, да, да, этот код временный, очень-очень-очень надеюсь. Вот так пишут в софт, как будто для кого-то это открытие. Ну, сейчас вроде бы сильно лучше пишут. Так писали в софт. Я тебе могу заверить, что у Postgres довольно приличный технический долг. У любого проекта, который 20 лет развивается, там полно такого. Нет, просто потому что у нас сейчас вроде более жёсткий процесс. Ну, то есть, он при этом всё ещё такой, с одной стороны, agile-agile, они вроде как это рассказывали, но с другой стороны, у них довольно жёсткие гайдлайны и довольно жёсткий код ревью. Я очень-очень надеюсь, что это временное, и такого не происходит. Может быть не в PC, а в чатике, поправься, то, что какой-то софт на Лиспе летал в космос, и его реально там обновляли на лету. Было такое, но это не было, это было позже. Позже. Да, насколько я знаю. Кстати, по теме технического долга, сегодня в блоге у, как его нормально зовут, который написал Learn with Summerlang? Ферт. Да, у него брат. Зовут Ферт, да. А ник у него Ферт, да. У него была интересная аналогия, что это как разгребать снег перед собой, ну типа вперёд. То есть ты себя отщаешь дорогу, но впереди растёт огромная такая гора. Я попробую найти ссылку и прилепить. Да, я даже её видел сегодня. Shoveling forward. Да. Да, действительно, как в чатике подсказывают, Lisp scales to the stars, и как там ещё любят говорить, даже звёзды, даже небо, даже Аллаха. Лисп так скейлиться, такие дела. Что, господа? Я хотел бы немного разгребать там всякие темы, которые не приоритетны, но недолго, потому что время вроде позволяет. Тогда ты забирай у меня контроль и разгребай, потому что я не знаю, о чём ты хочешь поговорить. Я вот просто по чатике. Я хочу поделиться ссылкой. Мой коллега Александр Коротков, он давно-давно-давно писал у себя в блоге про… Ну, то есть мне такое даже в голову бы не пришло. То есть идея в следующем, что у тебя открыт терминал с ITR, например. Там открыта сессия к постгрузу, и ты там можешь набрать команду. Ну, типа, хочу подрубиться с атлатишком к этому бэкэнду, с которым я сейчас общаюсь. Что она делает? Она у себя в ITR открывает вкладку, во вкладке этой запускает GDB и цепляет его к нужному процессу. То есть вам вообще в голову такое когда-нибудь приходило? Мне нет. Из консоли открывать вкладки в терминале. Да. Ну вот, во-первых, пост рассказывает о том, как это сделать. А в комментариях я ещё дописал, как то же самое сделать, если вы пользуетесь Ubuntu. То есть там идея в том, что есть консольная утилита, которая может симулировать нажатие, типа, CTRL-SHIFT-T. И потом в новую вставить команду. Так что это всё работает. Если вам вот такие ходки для чего-то нужны, то сходите, ознакомьтесь. Ну, давай тогда дальше с GDB. Да-да-да, я просто немножко мьючусь. Я знаю, что у меня очень громкая мышка, но я ленюсь купить менее громкую. Ну, ты купи тачпэд. Специально для прикаса. У меня есть тачпэд, но мне неудобно к нему... Нет, неудобно. Попробовал только что. Ты знаешь, я уже плохо помню, что я тут когда добавлял, поэтому давайте уже перейдём, пожалуй, к темам слушателей. Окей, давайте. Вот, GameZen'а не будет, значит, такие дела. Но я могу GameZen. Нет, он короткий. То, что 19 июля выйдет Neverwinter под PS4. Это MMO. Вот, такая классическая, с D&D-механикой, вот этим всем. Есть, ну скажем так, если в какую-то MMO я буду играть, вот есть большой шанс, что буду в эту. Ещё тут буквально вчера есть такая игра, которую все ждали-ждали-ждали, и наконец-то ушла на золото. No Man's Sky. Вчера команда сделала большое групповое селфи с тем как это... Golden Master'ом. Вот, в общем, да. Это там, где девушку останавливают время? Нет, No Man's Sky это там, где у тебя... Как это, ты летаешь по космосу и... Я понял. Летаешь по космосу и исследуешь... А с чем я перепутал? Не знаю, возможно с Life is Strange, наверное. Да, точно. Ещё таких игр больше одной. Ещё был этот, как его... как же он назывался, не помню уже, неважно. Ага, темы слушателей. Ну, маленькая серебряная чайная ложечка убедилась в том, что... Точнее как-то упольстился на мои воспевания Алексея, решил подписать проект и спрашивать всякие вопросы. Там в комментах развеётся дискуссия, если кому интересно, что там такого читать, что-то писать на Алексея Реланги, добро пожаловать в дискуссию в комментах. В принципе, мне кажется, что прям голосом это обсуждать. Ну, я обычно рекомендую книжки по WTP in action и, собственно, избранной главой Learn with MLang, сегодня уже упомянутого. И в продакшене у нас Plug, и для админки у нас Phoenix. Ну, именно для админки пока. Нам просто некуда в продакшен ставить Phoenix. Вот, собственно, всё, что я имел сказать по этому поводу, чтобы прям голосом. Господа. Очень хорошо, замечательно, чудесно. Дальше, окей. Наш слушатель, Rashid80, задаётся вопросом, почему программисты так много рассуждают про библиотеки и ЭСТ, а это программирование ещё не так обсуждают, собственно, что бизнесу надо.",
    "result": {
      "query": "новое в кубернетес 1.3"
    }
  }
]