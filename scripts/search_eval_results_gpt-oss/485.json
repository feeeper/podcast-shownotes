[
  {
    "segment_id": "874609d2-0230-442c-b8a5-3f57a253e06b",
    "episode_id": "b0fc4de3-b5aa-49be-b595-74ea44c2fbe7",
    "episode_number": 485,
    "segment_number": 4,
    "text": "Вот, и также там есть специальные приседания, которые описаны, не хочу их пересказывать с тем, как время пробагетится через систему. В общем что нужно сказать, что чтобы вся эта конструкция работала время должно через систему хорошо как-то распространяться как бы в равномерном темпе. Иначе у вас будет такая ситуация, что вы что-то закомитили, в журнале оно оказалось, журнал там в свое время подвинул, а реплики там еще не успели прочитать, то есть вам нужно решать эту историю про то, что вот у вас есть значит клиент, который закомитил транзакцию, у него уже время подвинулось, он потом приходит на чтение, а там нужно чтобы сторожи тоже вовремя узнавали что метка по чтению подвинулась вперед тоже. И последний пост который я толком не успел прочитать и переварить, но я примерно могу сказать в целом о чем он. Вся эта конструкция также неплохо ложится на мультирегионную историю путем того, что у них журналы и аджудикейторы там метро как-то намазываются на эти регионы и соответственно у вас получается история с тем, что у вас в каждом регионе есть мастер аджудикейторы для какой-то группы ключей и видимо кворум по журналам опять же я не дочитал пост, но очень похоже на то и соответственно у вас классическая ситуация с тем, что если у вас выходит из строя один регион вы вообще все еще полностью доступны как бы с мажорити стороны сплита и недоступны на минорити стороне сплита вот если у вас нагрузка чисто по чтению вы можете просто том регионе где вы читаете вам вообще не нужно ни с чем координироваться кроме вообще ни с чем вам просто время нужно вовремя узнавать если у вас нагрузка на запись у вас может немножко вырасти лайтонси когда у вас отвалился регион ну и в целом latency для тех ключей, которые не родные для judicator того региона, в котором мы пишем, будут чуть повыше. И вот как бы на этом, да еще что очень круто в этом дизайне, что внутри транзакции у вас latency появляется только в момент коммита, а все остальные степменты внутри транзакции у вас довольно быстро откатываются, потому что они откатываются полностью локально, во всяком случае локально для вашего региона. Это очень прикольный элемент дизайна, это то, чего в той или иной степени было проблемой, что в Кокроуче, что в других дизайнах. Там если мы посмотрим на какой-нибудь фонд Dation DV мы его обсуждали в не знаю года два назад и уже там был какой-то большой разбав его дизайна и у них проблема в том что кросс региональная история по сути тебе нужно просто делать такую не знаю копию в другом регионе там вообще дизайн не то чтобы очень здорово навязывается на много региональность. У Кокроучи у них там эта история с тем что у вас есть аффинити ключей тоже к региону в общем так и здесь получается но там этот аффинити он насколько помню более как это более дорогой для тебя то есть даже если ты делаешь чтение поскольку это packsos если тебе хочется консистентное чтение тебе нужно все равно убедиться что у тебя там нет правильной что там одновременно с этим Paxos не согласовывает никакой записи здесь если ты делаешь чтение в своем регионе ты можешь полностью полностью быть уверен что чтение которое ты сделал покуда там хороший time stemp она полностью будет локально обслужена типа почти всегда или даже всегда Вот в целом как минимум прикольный дизайн Саша спросил очень интересные вопросы про DDL в новой системе нужно будет он в принципе ссылается в своих сетях на официальную документацию прям действительно интересно как они решали вот как-то так спасибо я все у меня есть тема внезапная ее нет в блоге потому что я об этом узнал вот прям сейчас Нет, не эта тема, не та тема, кто ее подвинул.",
    "result": {
      "query": "distributed transaction timestamp consistency"
    }
  }
]