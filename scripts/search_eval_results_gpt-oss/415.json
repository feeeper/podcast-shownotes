[
  {
    "segment_id": "6a6ec2f3-6461-497f-80e9-8d1635cac696",
    "episode_id": "27dd8ffc-8149-4798-8fd8-dfbee48b4ae8",
    "episode_number": 415,
    "segment_number": 8,
    "text": "Потом услышишь, как оно было в записи. Не важно, не останавливайся. Я догадываюсь, да, что там произошло. Нет, я ничего такого не говорил. Это... Но название проекта хорошее. Да, прям один язык для анализа, для доказательств теория, где никак не могут выдумывать новое название. Да, в общем, есть такое, не знаю, группа продуктов что ли, или не продуктов, технологий, которые делают SQL поверх Data Lake, там есть Delta Lake, есть Iceberg, хотя Iceberg-то больше формат, чем полностью завершенное решение. И вот есть еще Apache Hoody. Мы про него на самом деле говорили, я совершенно был удивлен, что теперь это Apache проект. Это на самом деле штука, выросшая из Uber. Мы, наверное, года два назад, даже больше, мне кажется, это было в 2019-м или даже чуть ли не в 2018-м, Uber как раз-таки рассказывали, как для них ничего не работает, они пошли делать свое. Мы такие, окей, Uber, желаем вам успеха, посмотрим, что получится. В общем, получилось. И конкретно в случае этого проекта, отличие его от Delta Lake, от Data Bricks, в том, что очень многие фичи, во-первых, есть, которые пригождаются в работе с таковым родом системами, они, во-первых, есть, во-вторых, они есть бесплатно, потому что Delta Lake, поскольку это продукт Data Bricks, у них некоторые вещи есть только в паприетарной версии. Например, в Хаюди сразу из коробки четыре типа индексов для вашего, для ваших данных там в паркетах, тогда как в Delta Lake некоторые, например, Bloom Filter до сих пор только в паприетарной реализации. Там, не знаю, есть такая штука, как Merge and Read, что, например, для того проекта, на котором я бы думал такую систему использовать, было бы очень здорово. То есть, когда вы читаете данные, в таких системах часто у вас могут быть данные, лежащие, данные старые, лежащие одним огромным, хорошо пожатым файлом. Есть более новые данные, которые, как бы, при чтении подмерживаются и перекрывают, как бы, записи, которые обновились. И вот Хаюди может, например, когда оно так вот во время чтения подмерживать, еще подмерживает заодно и на диске. То есть, результат подмерживания клает обратно на диск. И там таких вот маленьких или даже не очень маленьких фичей, которые бывают полезны в проектах, их там просто полно. Плюс оно работает много с чем, в отличие от того же самого Дельтелейка, который сфокусирован на Spark ecosystem. Я теперь уже сам этим едва ли воспользуюсь, потому что я очень далек теперь от этой темы. Но я рад тому, что Uber не просто получилось что-то сделать, но они еще это выложили в Open Source и теперь это еще похоже подхватили какие-то другие компании. И вот, я приятно удивлен. Другая вещь, про которую я узнал на этой неделе, это на самом деле мой коллега Джеймс ковырялся с тем, как максимально распараллелить запрос в Пасгрессе. И выяснил, что даже если вы с конфигурируете max parallel workers, max parallel workers per gather, выкрутите в ноль косты для параллельного плана и вот просто скажете в Пасгрессу, пожалуйста сделай мне параллельным, у вас все еще может быть не параллельно, если у вас очень маленькая табличка. Оказывается, на каждую таблицу есть KKT, ее собственный parallel workers на таблицу. И в общем там есть формулка, я не помню ее так на память, на основе которой вы можете определить, сколько по дефолту у вас запустится максимально параллельных workers на ваше количество страниц в таблице. Вот, и если вам очень нужно распараллелить почему-то запрос, вы можете сделать alter table set parallel workers сколько вам нужно. В общем, удивительное открытие про конфигурацию Пасгресса, такие дела. У меня на этой неделе тоже удивительное открытие про конфигурацию Пасгресса, не новая статья в блоге site of data, Thomas Monroe, автор насколько я помню, рассказывает про да, Thomas Monroe все правильно, рассказывает про Пасгресс 15 и про то как в нем ускорили, как в нем уменьшили лаг при репликации Пасгресса в реплику и соответственно так же ускорили насколько я понял статьи, ускорили процесс рекаврии, есть после остановки. Вкратце, идея заключает, кстати мне не понравилось введение, введение очень долгое муторное, прежде чем перейти собственно к тому, а что произошло. В некоторых системах, не исключая линукс, есть системный вызов, называется POSIX F-advice и он позволяет тебе сказать, что я в ближайшем будущем собираюсь из заданного файла читать под окомнато смещение, все, достаточно простая штука. Есть нюансы, не все операционные системы вообще имеют такой вызов, те которые имеют, некоторые могут ничего не делать, когда это происходит, когда происходит такой вызов, но в линуксе это не так. Дальше у тебя поведение зависит от файловой системы, например в линуксе XFS и X4 они поддерживают такие F-advice, другие файлы системы не поддерживают. Там есть ряд других ограничений, например это работает только для операции чтения, для записи тут никаких пенефитов, но в целом это такой, это асинхронный вывод, но для бедных, сейчас секундочку кошечку выпущу. Пока Саша выпускает кошечку, я успею поздороваться. Привет Вань, ничего себе, ты дошел. Всем привет. Раньше чем мы закончили выпуск. Лучше раньше, чем раньше, нет, лучше раньше, чем позже, но лучше позже, чем никогда. Привет Вань, мы тебе рады. Так вот, и в целом POSIX F-advice это такой асинхронный вывод для бедных, потому что ты можешь сказать, что я собираюсь оттуда читать, и пока ты делаешь что-то другое, потенциальная операционная система может это действительно асинхронно прочитать в кэше файловой системы, и когда ты реально будешь из файлов читать, твои данные уже в кэшике. Ручка, которая в POSGRSA доступна с 15 версии, называется maintenance IOC on currency, и как она работает, у нее значение по умолчанию 10, и это работает так, что, в чем специфика Right-Hat Log, то, что у тебя в Right-Hat Log есть референсы на странице базы данных, и ты, когда читаешь Right-Hat Log, ты знаешь, что очень скоро ты по-любому будешь к этим страницам обращаться, и в этом месте ты можешь использовать F-advice. Ручка говорит, значение по умолчанию 10, она говорит, что когда ты идешь по Right-Hat Log в случае рекаври, ты между двумя вызовами чтения, pairit в данном случае, до 10 раз вызовешь F-advice. Больше 10 раз ты не будешь пытаться, потому, ну, в предположении, что я и так много раз вызвал, наверное, операционность у тебя занята, не буду ее больше напрягать вот этим F-advice. Вот, но поскольку это ручка, ее можно увеличить и уменьшить. Вот, то есть, ты 10 раз сделаешь F-advice, если ты 11 раз попытаешь его сделать, то поздростей не будет его пытаться сделать по умолчанию, если только эту ручку не поменяешь. Вот, какая-то такая штука, там красивые графики приводятся в статье, которая показывает, как с помощью этой ручки можно уменьшить отставание реплики. Вот, хорошая статья рекомендую. Я вот про POSIX F-advice, я даже не знал про такой системный вызов, как-то не сталкивался. Чему я еще научился на этой неделе? Я узнал, что есть такая штука, ну, поскольку вот я читал про ZX Spectrum, retro компьютер, и про то, что он загружался, программу в нем загружается аудиокассет, я пошел читать википедию про аудиокассеты, нашел, что, оказывается, существует такая вещь, как радиокассета. Радиокассета работает именно так, как вы, скорее всего, предполагаете, то есть, если у вас есть магнитофон и в нем нет радио, то радиокассета – это штука, которую ты вставляешь как кассету в магнитофон, но на самом деле это радиоприемник, и он будет… В рот мне ноги дает байн. И он будет ловить радио и передавать аудиосигнал на считывающую головку, и у тебя магнитофон будет воспроизводить как приемник. Основная проблема с радиокассетами, что… Я посмотрел по виду, и они там действительно есть, но многие из них делались под конкретные магнитофоны и имели специальные пины под этот конкретный магнитофон, чтобы с него же сразу брать питание. Были универсальные радиокассеты со своими батарейками, но они как будто бы менее распространены, или по крайней мере, я не нашел. Но вот просто факт существования такой вещи поразил меня для глубины в душе. Что плавно переводит нас к тому, что я узнал про авито, точнее, я узнал про авито-доставку. Мне кажется, ее относительно недавно запустили, и по крайней мере, я раньше не пользовался, я решил попробовать, и мне прямо реально понравилось. То есть это такая кнопка. Вот у тебя есть объявление, ты хочешь купить. И вместо того, чтобы идти к продавцу и там договариваться, а вот там почта отправить и не почта, а вот там служба и доставки, не служба и доставки, вот это начинается, ты просто нажимаешь кнопку купить, выбираешь способ доставки, там есть несколько транспортных компаний, есть экспресс-доставка через янт эту доставку,",
    "result": {
      "query": "Apache Hoodie data lake features"
    }
  }
]