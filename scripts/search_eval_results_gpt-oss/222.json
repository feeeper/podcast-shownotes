[
  {
    "segment_id": "a227e9f1-c0a7-4252-9ddb-5ff51b4658b5",
    "episode_id": "d672741e-0105-4c3e-aabe-30e003a0bf2c",
    "episode_number": 222,
    "segment_number": 10,
    "text": "Туда нужно еще больше AVX, вот это вот странные фигни, которые не знаю кто использует и какие компиляторы умеют. Все компиляторы умеют. Ну вот если я сейчас возьму Postgres с компилированной со всеми флагами оптимизации и посмотрю в его disassembler-ный листинг, ты думаешь я там много этих инструкций увижу? Подсказка, я пробовал. И что, нету что ли? Ну откуда им там взяться? Ты понимаешь, у тебя какой-то wild-цикл с какими-то интами и вот этим всем и как ты его, как ты туда AVX вкорячишь, в C-шечку? Ну как бы Я не могу сказать про в данном случае Postgres-вый код и не могу сказать каким компилятором ты пользовался, но Ну любой C-шный код, любой Clang, GCC, чем все компиляторы А вот в том-то и дело, ты просто не используешь правильные интеловские компиляторы, вот если бы ты использовал правильные интеловские компиляторы используешь. Во-вторых, нет, на самом деле, вот как бы когда я последний раз трогал, GCC не сильно отставал от интеловского компилятора по анализу кода и раскручиванию циклов и использованию всех вот этих вот супер инструкций. Кстати говоря, о справедливости ради, конкретно Postgres, он написан из того, что я слышал от, короче, по-моему где-то в интернете кто-то писали Не продакшн ради? Не то что не продакшн ради, это не самый Готовый к оптимизациям кода Да, то есть Если ты посмотри, как пишет код для того, чтобы он векторизовывался, просто вот Glipsy открой и посмотри И там инструкции не носи больше, чем инструкции носи. А я объясню, почему Postgres так написан, потому что Он на всех платформах. Да, именно И если я пишу код так, чтобы он работал не только на интелах, но еще и на армах, и на рейсках, и хрен знает где еще, на мипсах, то разумеется, я туда не буду вкорячивать пастели для одной конкретной платформы Я согласен. Поэтому Glipsy для x86 компилируется лучше, чем Postgres Хотя Glipsy он тоже должен быть для всех архитектур Ну, кстати, еще такой момент, что Как бы если просто писать хорошо векторизуемый код Там есть некоторые гейглайны Я сейчас так вот ни разу этого не делал, я просто знаю, что они есть То вроде как в теории компилятор будет попроще, он-то будет угадывать независимость архитектуры, будет пытаться То есть Применять векторизованные операции а не обычные и там типа в пример могу привести проекты вроде Гандива, кажется, называется Это сейчас Это такой Такая обвязка, ладно, с другой стороны к концу начну, вот есть",
    "result": {
      "query": "Postgres AVX usage analysis"
    }
  }
]