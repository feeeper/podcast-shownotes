[
  {
    "segment_id": "548ab3a4-f13d-49e4-8aba-80f914c1903e",
    "episode_id": "a8cdfb0a-74cf-4bd2-91ec-c9483430ec55",
    "episode_number": 395,
    "segment_number": 8,
    "text": "проблем. А здесь получается, что у нас два разных языка, у которых разная поддержка на уровне языка и runtime. Как получается переключать в общем смысле все программы с го на программы на джовескрипте? Я вот, если честно, мне до конца не понятно, как это все происходит, но у меня будет какая-нибудь сложная и хитрая заморочка с каналами, со слайсами там или еще с чем-нибудь, и что вот любой, любой мой код будет работать на джовескрипте, если я его скомпилизую? Ну, смотри, вообще цель проекта такая, что да, любой код будет работать. Понятное дело, что это на самом деле это не совсем так, есть некоторые слабые места, которые очень сложно заставить работать в контексте джовескрипта. Самое очевидное это unsafe. Арифметику указателей в джовескрипте реализовать очень-очень сложно или хотя бы как-то убедительно проэмулировать. Есть некоторые ограниченные способы, как ее можно реализовывать, например, если у тебя есть арифметика указателя, но ты можешь быть уверен, что это все в пределах одного слайса, то в принципе runtime можно подкрутить так, чтобы он там прикинул, окей, сначала у тебя было начало слайса, потом мы тебя просто вернем слайс, который показывает куда-то на середину массива, и это как бы твоя арифметика, но в общем случае она не будет работать. Есть другие ограничения, если у тебя, твоя программа пытается активно взаимодействовать с операционной системой, то понятное дело, что браузер тебе это не позволит, если ты исполняешься в браузере, грубо говоря, читать файлы или пытаться там открывать сокеты, вот это все работать не будет. Оно может работать отчасти, если ты исполняешься на ноде, потому что по крайней мере доступ к файловой системе и несколько вот таких фундаментальных вещей мы можем просто транслировать в API, которые нода предоставляет, и также в браузере мы можем поддерживать вещи вроде Http клиента, просто поверх обычных там fetch API и тому подобных вещей, вот, но понятное дело, что вот близкое взаимодействие с операционной системой не получится. Раньше у нас был такой бинарное расширение для ноды, которое позволяло делать произвольные системные вызовы, но работало оно не очень, весьма ограниченное, и мы в итоге от него отказались, и вместо того, чтобы пытаться делать системные вызовы, мы просто, некоторые наиболее полезный набор функций вроде вот файловой системы просто эмулируем через API, который нода предоставляет, но в плане примитивов языка мы стараемся сделать так, чтобы и каналы, и гарутины, и рефлексия, все работало, вот, для этого приходится тащить довольно много дополнительных метаданных, которые обычному JavaScript бы не понадобились, например, нам нужно тащить с собой полное описание типов, нам нужно тащить с собой некоторое количество стандартного рантайма, которое там, даже реализация каналов, реализация шедулера наших гарутин и тому подобное, и в целом это приводит к, наверное, самой болезненной части от того, что размер сгенерированных JavaScript файлов получается очень большой. Если у нас есть некоторый бенчмарк, я не знаю, слышали ли слушатели про такой проект To Do MVC, это такой классический проект, который вроде Hello World of Frontend, который реализуется там на самых разных фреймворках, на ангуляре, на реакте, там, с риалт, на всех языках, о которых вы можете подумать. Вот, и у нас есть его версия для Coffer.js, и мы смотрим с каждым релизом, сколько килобайт у нас занимает вот скомпилированная версия этого проекта, и даже такой простой проект, он почти 3 мегабайта, если мы не пытаемся минифицировать, чуть меньше 2 мегабайтов, если мы генерируем минифицированный код, и он сжимается до 380 килобайтов, если пройтись Gzip по нему. То есть это в принципе не то чтобы совсем неподъемные размеры, особенно для современного веба, но вообще говоря хотелось бы поменьше. Вот, одна из причин, почему он такой большой, это как раз потому, что нам приходится тащить с собой runtime.",
    "result": {
      "query": "Go to JavaScript compilation runtime size issues"
    }
  }
]