[
  {
    "segment_id": "cb2b9fcf-748d-4655-9694-fa2578a909b8",
    "episode_id": "073b4099-f9e9-4f00-810a-b6f8313ad97d",
    "episode_number": 350,
    "segment_number": 16,
    "text": "они ждут пока, прокси ждет пока отбегать большинство локс-серверов, то есть это прям такая очень сильно ориентированная начинания система, и вот там, даже если они очень сильно оптимизируют шаги между секвенсорами, резолверами и всем остальным, все равно у нас задержка того, что у нас должны ответить три или четыре системы с дисками, пусть даже и с SSD, это прям долго может быть. Да, да, да. Но тем не менее, у, кстати, система очень популярная, ее используют, их купили Apple, и используют, собственно, для Cloud Kit, я точно так же, то есть прям в пейпере есть еще Snowflake, и некто ребята из Antithesis.com, я не знаю, что это за компания, то есть как минимум Apple и Snowflake из больших компаний, которые используют FoundationDB для каких-то своих крупных разработок. Мы обсуждали, что D1 на Foundation переходят. Вот, да. То есть, в принципе, система явно рабочая, а еще, да, из этой сложной матрешки, с кучей компонентов сложных взаимодействий, у них, я вот тут как раз обещал, но забыл, рассказать про то, как у них устроены системы с регионами. Они ставят storage в двух регионах, lockser.r в двух регионах, плюс в первом регионе получается еще такой, типа, дополнительный регион, в котором стоит компонент, который в этом регионе, дополнительный регион, в котором стоит дополнительный lockserver, который нужен для того, чтобы в случае смерти дата-центра, основного регионального дата-центра, чтобы второй, если он еще жив, мы с него успели забрать последние записи, которые произошли в первом дата-центре. И соответственно, в том дата-центре, куда происходит failover, это связывает log-routers, которые забирают данные с этих сателлитных дата-центров. И система координации транзакций, она крутится только в главном регионе, то есть записи всегда происходят в каком-то главном регионе. Опять же, это дополнительная такая, последний такой гвоздь в крышку гроба, того что эта система ориентирована на быстрое чтение, а запись, как бы там, типа, ебись на сотни миллисекунд. Ну и соответственно, вся эта координационная петрушка, она может крутиться еще в каком-нибудь дополнительно третьем регионе, на всякий случай, то есть если в каждом из двух, плюс еще в третьем, чтобы уж точно всегда собралось majority. И когда там у нас регион основной падает, у нас транзакционная система будет запущена в standby регионе, логи, дай бог, успеют сочетаться из дата-центра, который еще не успел умереть. У меня к этому дизайну есть такая претензия, что если у нас регионы это прям разные континенты, то нужно прям очень сильно думать про сетевую инфраструктуру между континентами и хорошо так закупиться избыточными каналами, чтобы точно смочь заработать график. Потому что если у нас дата-центр в огне или там, не знаю, питание выключили, это работает. А если у нас материк отсоединился почему-то, то могут быть проблемы. Вот. При фейловере таком. В общем, я, наверное, все, что хотел рассказать, рассказал. В принципе, система интересная, но у меня от нее были какие-то, не знаю, больше ожидания, когда я сказал, что в итоге даже поленился пейпер дочитывать целиком, потому что показалось, что мы такое уже видели в разных местах, в разных конфигурациях, и в принципе наверное я не то что прям суперфанат именно этой реализации такого подхода. Вот. Но в целом я прямо осуждать не могу. Если у тебя завтра Apple заханит писать фундэшн ДБ, пойдешь? Ну почему бы нет. Я повторюсь, мне она не кажется ужасной, просто я как-то в данный момент, если бы там, не знаю, с точки как-то, вот не с точки зрения разработчика, который это будет писать, а с точки зрения человека, который знаешь, смотрит и выбирает свою будущую базу данных для веб-скейла. Если смотреть фундэшн ДБ, во-первых, все не очень хорошо с тем, чтобы продавать себя, они не очень пытаются продавать себя, если честно, они очень нишевая такая штуковина. Но даже если у них был такой список фичей и список сильных сторон, и посмотреть на список фичей и сильных сторон того же, как ручдб, тот же самый как ручдб, не знаю, может он работает хуже, но вот на бумаге выглядит интереснее. Особенно они в последние годы прям нажимают на то, как у них здорово делать много региональности, как у них могут быть пользователи привязанных регионам, и как на этом удобно сделать gdpr и прочие такие вещи.",
    "result": {
      "query": "FoundationDB region replication delay"
    }
  }
]