[
  {
    "segment_id": "c3e48df7-7fbe-4f44-9141-c1768485936e",
    "episode_id": "238e04da-da20-4232-ba7d-4c8c6b7ee1f9",
    "episode_number": 103,
    "segment_number": 4,
    "text": "Больших преимуществ нет. Вот, она будет, FreeBSD, она вряд ли куда-то денется, просто она вот прям очень непопулярна и вряд ли станет популярной. И это печально. На самом деле да. То есть, ну, для меня печально. Что совершенно не связано с темой, которую мы сейчас обсуждали, это чего? Composing Music? Свет, что это? Ты вовремя спросил. Света отошла. Ну, судя по заголовку, это статья про то, как вот мы тут недавно... Может, мы Свету подождём, а я другую тему? Пока. Ну, можно, можно потрепаться, но можно просто другую темку, действительно. Следующая темка, она про то, чем я занимался последние 3-4 месяца на работе. То есть, я эту информацию особо не освещал, потому что её в открытых источниках не было, а теперь она вот появилась и, собственно, имею право. Раньше тоже вроде как не запрещалось, но это как-то некрасиво. Собственно, есть Postgres, у него есть временные таблицы, и есть так называемый каталог. Это таблица, где хранится информация о других таблицах. Есть некоторые приложения, которые создают много временных таблиц. То есть, прям, типа, установили соединение, создали там 100, например, временных таблиц, туда что-то населексили, потом поджуняли, и грохнули эти временные таблицы. Собственно, проблема этого подхода в том, что в каталоге у тебя создаются и удаляются много тупов с информацией об этих таблицах. Пока понятно все? Да. Хорошо. И это называется bloating, когда у тебя таблица распухает. Распухает она, потому что она, ну, собственно, незаменяемые данные в ней, и они просто помечаются удаленными, а место надо компактить время от времени. Чем и занимается Автовакуум. Проблема в том, что Автовакуум на каталоге он аффектит производительность всей базы данных, потому что тебе нужно ходить в каталог, каталог золочен, он вакуумится. Собственно, я занимался задачей, цель которой, вот попытаться решить эту проблему, сделав временные таблицы, которые не... информация о которых не хранится в каталоге. То есть, если подумать, это довольно тупо, писать в глобальный каталог информацию о таблицах, которые есть только в сессии. Ну, в смысле, если у тебя есть два коннекта к Postgres, ты не видишь временной таблицы в соседнем коннекте. Тем не менее, информация пишется в глобальный каталог, и это довольно тупо. Вот, и теперь я это запустил в pgsql-hackers, не читал, что там отвечали и отвечали ли что-либо за это время, то есть буквально в пятницу запустил. Вот, но можете посмотреть патч, можете посмотреть проблемы, он прямо рабочий. Может у вас это, ну, вдруг это у вас проблема на продакшне, вот, можете, в принципе, применить этот патч, потестить. Вот, такие дела. Если у вас есть... Вопрос? Да, да, я рад, что у тебя есть вопрос. Меня интересует, наверное, не техническая часть, а больше такая социальная, open-source часть. Это же все open-source, то есть поделись, насколько много было... Ты начал делать отдельную данную задачу, функцию. Сколько много людей пришлось согласовывать изменения и убеждать в чем-то и так далее? То есть, вот такой вот вопрос. Я просто не представляю себе, как разрабатывать такие большие системы, которые куча людей контрибьютит, и, может быть, согласовывать надо много вопросов? Да, собственно, не сколько людей. Но ты сделал фичу, да, ты максимум, не знаю, спросил у 2-3 админов, как им было бы удобнее, ну, какой таких, если они хотят. Ну, подожди, Саш, ты немножко укаверш. Это просто ты конкретно эту фичу только засубмитил, и там написано прямо в сообщении, что типа, ну, все равно еще раза 3-4 перепишем. То есть вспомнить твою предыдущую фичу и твою историю про это, что ты там раза 4 переписывал, вот. Потому что... Потому что... Слушатель Барлок М, он спрашивает, мне проще ответить голосом, чем писать в чате, причем тут футжицу. Футжицу – это название моей машины, поэтому оно в message.id в ссылке, которую... А что, что такого название? Это реклама. Скрытая. Ну, допустим. Даже не скрытая. Product placement, скорее. Да-да-да. Так, ну, то есть вопрос, я так понял, не про разработку, а про принятие патча, да? Потому что, ну, я так понял, звонил вопросу, что он именно про разработку. Когда ты это разрабатываешь, вот, пишешь патч, тебе действительно особо взаимодействовать не с кем. Когда это попадает в рассылку, там, разумеется, поднимается дичайший срач на тему, не знаю, ну, хорошо, если просто кто-то багов нашел, да? А может быть, там, куча вопросов по перформансу и всему такому. И да, ну, сидишь и переписываешь. Вот, другой вопрос, что ну, вот, у нашей компании есть собственная сборка, Postgres, и туда оно попадает очень легко. И оно легко попадает клиентам. А то, что это не хотят брать в open-source, в ванильный Postgres, ну, как бы никто особо сильно в последнее время не хочет рвать на эту тему жопу. Типа, ну, мы патч сделали, не хотите, не берите. Ну, можем его там чуть-чуть подправить, но так, без фанатизма. Погоди, ну это же значит, что ваше версия будет все дальше уходить от Postgres, от оригинальной ванильной. Ну, когда примут, перестанет. Если примут. Ты же говоришь, что не очень хайп. Если не примут, значит, не перестанет уходить, согласен. То есть, вот, вы из своей тоже удалите? Ну, если она клиентам нужна, зачем ее удалять? Я про это и говорю. То есть, ванильная не будет иметь этого патча, а ваша будет иметь этот патч. И у вас все дальше будет уходить. Ну, там и так уже есть патч, какая разница. Ну, это значит, что каждая следующая версия ванильного потребует больших, возможно, работ. Как вы будете потом это синхронизировать? А что вы предлагаете? Вот есть патчи. Патчи нужны конкретным людям, там, с конкретными программами, да? Есть open source сообщество, которое на это смотрит и говорит, мы этого не хотим. Или мы это хотим, но вы там потратите 100-500 времени на это там, типа, за бесплатно. И что делать? Взять сотню котиков и говорить, как там говорил, я буду убивать котиков, пока вы не согласитесь. Ну, не знаю, продавливать как-то сильнее, договариваться с людьми лучше. Но я не верю, что единственный возможный выход, это увеличивать разрыв между вашей версией и ванильной. Нет, понятно, что вот этот разрыв между ванильным и неванильным подскрипством особо никому не нужен. Но если не получается без разрыва, то получается так. А сколько у вас уже... Вот тут у вас не единого разрыва пока, или много разрыва? Я знаю, что есть специальная сборка для DNS'а, она прямо на сайте лежит, и по-моему там чуть ли не со всеми патчами. Вот, можешь посмотреть, какой там разрыв, я не смотрел. А в остальном вроде как пока что мы ваниль не поддерживаем. Расскажи, Саша, такой вопрос. Ты один раз написал патч, его не приняли, сказали переделывать, потом ты второй раз переделал. Засабмитил, получил тоже какой-то фидбэк, тоже пришлось переделывать. Как ты находишь в себе силы это все из раза в раз переделывать, для того, чтобы сообщество таки приняло этот патч в ванильный постгрес? Ну, ты не только этим занимаешься, у тебя там какие-то другие задачи параллельно идут. Просто понимаешь, это очень фрустрирующий фактор, особенно когда для вашей сборки... То есть для вашей сборки в принципе этого хватает, а там все никак, никак, никак, и ты упираешься в такую стену, и оно, наверное, очень убивает желание что-то дальше делать и помогать сообществу развиваться. Ну, бывает, чё уж, душой кривись. Так вот, откуда ты силы находишь? Ммм... Шоколад? Ну да, во-первых, нужно по утрам есть шоколадки, тебя от них прёт весь день, не отпускает, вот.",
    "result": {
      "query": "Postgres temporary tables catalog bloating patch"
    }
  }
]