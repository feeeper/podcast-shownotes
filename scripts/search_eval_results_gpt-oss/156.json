[
  {
    "segment_id": "c670789c-ef5a-46d2-9529-2307434b7685",
    "episode_id": "869db0dc-e45e-423a-aba4-8f4aca36b0af",
    "episode_number": 156,
    "segment_number": 3,
    "text": "Хитро вывернулся. А почему? Что за условия такие? Первый раз, когда я столкнулся с докером, мне нужно было организовать стриминг-платформу вещательную. РТМП стриминг. Прошу тебя сразу, я уточняю, в каком году это было? Это было на заре докера. Это был, наверное, 15-16 год, докер был сыроват вообще. Он не влетел. Сейчас докер допилили, подпилили. Ну а фоточек остался. Нет, тут еще фишка в другом. Вполне возможно, многие натыкались на такое. К примеру, докер-контейнер запущен, и тут внезапно падает хост. Были промаплены порты, маппинг портов. Называется вопрос в залу. После рестарта у меня контейнер поднимется или нет? Ну теоретически не должен. Ты не должен на это надеяться, скажем так. Он не поднимется. А почему он должен был бы? Точнее, почему он должен подняться? Контейнер добавлен в автостарт, скажем так. В какой автостарт? Ну у докера, если мне не изменяет память, есть такой параметр, что если перезапустить сервис, то подними мне все контейнеры, которые были у меня. На самом деле справедливости ради, я, конечно, могу ошибаться, но когда ты работаешь с кубернитесь, то там докер используется минимально, просто чтобы выпускать контейнеры и вот такие вещи уже отвечают кубернитесь, у которого нормальная распределенная координация, а не вот та непонятная хрень, которая у докера наверчена. Ну да, да, да. У куберов все в этом плане хорошо. Особенно если говорить про кубер, который живет у нас в Google Cloud. Там он просто шикарен. Слушай, но никто не говорит кубер, говорят K8, я не знаю. Ну да, K8. Да, это моя уже... Я такое определение услышал на DevOps Days в Москве от разработчика кубернетиса, туда приезжал из Польши, насколько я помню. Его доклад многим не понравился, но человек прикольный достаточно. Ну, K8, хорошо. Я на самом деле могу ответить за москвичей, у нас кубер говорят. Я первый раз сейчас такое услышал. Ну, Москва это... Это Москва. Я как человек, выросший на юго-востоке Москвы, повидал там веселого. Вот. И, соответственно, возвращаясь к докеру, я сейчас именно про чистый докер, у меня к нему ряд... Всегда было претензии. Я не говорю, что он плох, либо хорош. Я к нему ровно достаточно отношусь. Не стартует он именно потому, что там остается файлик Networks, RBA, если мне не занимает память. Вот. И докер считает, что у тебя порты заняты. Соответственно, этот файлик надо удалить. Либо в автостарт добавить строчку, если файл существует, при старте удалять его. Вот до такого. Слушай, ну ты... Как его? Мне не нравится Kubernetes из-за того, что в докере есть проблема с автостартом. Ну, как-то совсем уже плохо. Нет, нет, нет. Я не говорю, что мне Kubernetes не нравится. Я его просто не применяю. Он меня местами не применим. Еще, допустим, на одном из проектов там было больше 200 вихостов с больше 200 сайтов, написанных на кривом местами PHP. И я не хочу сказать, что PHP плохо или хорошо. Это просто конкретный пример. Но мы обычно его ругаем здесь в подкасте, так что не бойся. Нет, я не люблю именно там холивар, какой язык хороший, какой плохой. Я видел хорошие вещи, написанные на PHP, видел ужасные на моем любимом Python, написанные. И видел очень ужасные вещи на Ruby. Но тут фишка в чем, что когда мы пытались перетащить на Docker вот эти 200 вихостов, к этому всему еще сверху был CloudFront, и под каждый вихост должен быть отдельный балансировщик, мы поняли, что Docker у нас не взлетит. Мне кажется, Kubernetes как раз то, что ты описываешь, решает именно потому, что Docker там уже не особо нужен становится. Да, вполне возможно, но просто вот честно не смотрели. В Kubernetes, может быть, мы посмотрим, когда будем перестраивать платформу. Потому что в итоге мы ее будем перестраивать по ряду причин из-за того, что там уже нужно перестроить и места есть достаточно узкие, которые очень нерентабельно использовать. И там есть в Амазоне некоторые сервисы, которые я врагу не посоветую использовать, особенно если хорошая нагрузка. Вот, кстати, делюсь сразу. У нас в команде очень многие не любят Docker, и хотя мы используем Kubernetes, сейчас все обсуждают активно, стоит или не стоит сейчас попытаться перейти на Rocket в Kubernetes или подождать еще месяц и потом попытаться перейти на Rocket в Kubernetes. То есть это постоянная тема для обсуждения. Ну вот такая тема на любой там айтишной тусовке или там около DevOps тусовки начинается с, а может уже начнем стартовать с нового, попробуем все модное и молодежное. Я не знаю, я бы подождал, честно. Лишний раз перестраховаться. Нет, если это Dev какая-нибудь, это еще можно рискнуть. К примеру, насколько я помню, чистый Docker не взлетел в московском метро. Вот как мне говорили. Docker не смог взлететь в метро, просто отличная заголовка. Название даже для подкаста, для выпуска. На турникетах причем. На турникетах? Да, не взлетел на турникетах. Слушай. Прям не знаю, просится картинка с китом на турникете.",
    "result": {
      "query": "docker autostart containers after host restart"
    }
  }
]