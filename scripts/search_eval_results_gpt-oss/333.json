[
  {
    "segment_id": "87906a3a-9148-4188-94c4-c6e9a56e8858",
    "episode_id": "8b8082a2-71c7-4d2b-b146-188fda14048d",
    "episode_number": 333,
    "segment_number": 12,
    "text": "Но, тем не менее, у него в статной поставке идет библиотека для работы с Postgres. Она лежит там в userlib. И эта часть файловой системы, ее нельзя модифицировать, она редонлим, поэтому ты с этой библиотекой ничего не можешь сделать, ее не можешь переместить, не можешь удалить или как-то еще на нее повлиять. И ты не можешь ее теперь рерайднуть с помощью DLT, вот этой вот переменной. И происходит следующее, у тебя запускаются тесты, но они запускаются не с тем, не с тем, libpq, с которым тебе нужно, а с системным, который вообще другой версии, который там по-другому совершенно с конфигурированным и так далее. И ты просто не очень понимаешь, а с хреналей твои тесты не проходят. И это требует некоторого ковыряния с LLDB и как бы с так-то рейсами, с всяким таким, чтобы понять, что вообще произошло. Потом некоторого времени на то, чтобы понять, почему это вообще произошло. Вот, ну, достаточно интересное времяпрепровождение. Пропрошу тебя, когда ты понимаешь причину, я нашел на Github инструкцию, как это можно отключить. Я проверил, инструкция нифига не работает. Она там сколько-то лет назад написана, сейчас скажу, в 2017 году. И в Mac-е что-то поменялось. То есть вот как бы по этой инструкции отключить это поведение у меня не получилось. Сообщество Postgresok, оно, естественно, давно с этим столкнулось. И я просто спросил в списке рассылки, кто как иначе это решает. И там есть воркараунд, ты делаешь сначала make install, потом уже make check. Тогда оно работает окейно. Можно ли по прорыву не... Почему оно в этом случае работает? Я не то чтобы прям очень внимательно изучал. Там, скорее всего, вот эта динамическая библиотека, она ляжет прямо рядом с бинарем по правильному пути или что-то в этом роде. Да, то есть она кладется в путь, который ты ожидаешь, что у тебя библиотеки там лежат. И этот путь получается ближе к началу, чем дефолтный, который... Старый липпи-ки установлен в системе. Да, точно. В принципе, в теории ты, наверное, мог бы переписать сгрысовые тесты, так чтобы они на любой системе правильно запускались. Естественно, ты можешь любое приложение написать так, чтобы оно загружало в динамическую библиотеку, которую тебе нужно. Просто нужно понимать, это проект, которому 20 лет, и тебе нужно, помимо того, что его перепишешь, может быть пойти на... Как это... На build farm, то есть на местный CI, как-то его поковырять. В целом, никто не хочет этим заниматься, поэтому есть известный воркараунд, и их всем пользуются, он всех устраивает. Либо ты можешь полностью отключить с IP, что тоже некоторые делают. Но я делать не стал. Вот такая клевая история. Вместе на виду, что вот этот механизм с LDLibraryPath или DILDLibraryPath, он на маках по дефолту сейчас не работает. Кто еще по дефолту не работает, это Ваня. Но Ваня очень не хочет эту ситуацию исправить. Точно-точно. Я как-то доббисвободен. Здесь эта шутка применима в двух случаях, потому что я на самом деле больше не работаю. Это была последняя моя неделя, я счастливый ничего не делатель, начинаю со следующей недели. Я получил несколько оферов, я больше не собеседуюсь. Сейчас я отдохну какое-то время, несколько недель и начну работать в одной из компаний, где у меня есть оферы. Пока еще в процессе принятия решения, поэтому не знаю куда. Не могу сказать. Вторая причина, почему доббисвободен это применимо, это потому, что я получил офер от Facebook, и они прислали мне носки. По-настоящему прямо носки прислали в почте. Приехала коробочка и четыре пары носков. Я знаю точно, какая будет КДПВ к этому выпуску, потому что выше в чате у нас шутили про, как стать Архитектором, нужно одеть распределительную шляпу, и она скажет, Архитектор! Простите. Да, сейчас доббисвободен. Немножечко интервью с Эн продолжим, я получил несколько вопросов, я хочу их ответить на них.",
    "result": {
      "query": "Postgres libpq dynamic library path macOS"
    }
  }
]