[
  {
    "segment_id": "813c61e9-30e6-45e9-905a-392bb8f15480",
    "episode_id": "6e24db21-cfb2-435c-bdde-92de9755af96",
    "episode_number": 108,
    "segment_number": 4,
    "text": "Ну вот, у меня всё с этой темой. Если ни у кого нет дополнений, то я предлагаю вернуться к Славе и его теме про Python 3. Так, конечно, можно. Мне приглянулось видео, которое на Reddit попалось на этой неделе, решил поделиться. Это видео о том, как Facebook переходит на Python 3. Возможно, у вас есть вопрос, откуда в Facebook Python 3? Ведь они всё на PHP пишут. Наверное, оттуда же, оттуда и хаскаль. В общем, у них всё опсовое, на самом деле написано на Python все обвязки, и вообще опсы у них, ну или как они там у них называются, все компании по-разному их называют, они предпочитают Python. И долгое время писали на Python 2.7, и этот товарищ рассказывает на конференции в Агайо о том, как он случайно оказался продвиженцем Python 3 в Facebook, осознал себя в этой роли, и как ему удалось всего года за 4 перевернуть отношения. В общем, из интересных моментов, которые можно выделить... Можно сразу главный вопрос, который у всех сейчас возник? А зачем им это? Ну есть 2.7, но не развивается, но не поддерживается, ну старый легосе-код пусть так и тухнет, работает же. Да, проблема в том, что новый код писали на 2.7. А они на Python пишут так много кода, что, я имею в виду, такие большие скрипты вот эти для поддержки, то есть их проще где-то тянуть и решать заново? Да, там целые сервисы, там целые сервисы и большие решения, на которых там основаны другие сервисы и все это развивается, более того, пишутся новые сервисы и все равно выбирается 2.7, понимаешь? А они не могут не выбирать 2.7, когда у тебя куча библиотек, модулей уже написанных и ты должен использовать. То есть либо ты все переводишь и все работает на тройке, либо ты продолжаешь использовать 2.7. Надо использовать микросервисы, и наступит добро и счастье. Но не для опрошенств. Да, но каждый новый микросервис все равно пишет на 2.7. Вот в этом все проблемы. Короче, я бы хотел короткие моменты из видео, основные такие. Он начал с того, что он подсунул новый линтер, который требовал совместимости с Python 3. Народ поплевался, но допилил свой код. Потом они столкнулись с тем, что их Frift, Frift это RPC и API внутри Amazon, и все построено на Frift. РПЦ, Российская православная церковь. Да, да, да. Amazon или Facebook? Facebook. У них все внутри на Frift связано, и оказалось, что Frift нифига не поддерживает Python 3. И пришлось, ну вот этому товарищу, пришлось долго и упорно пробивать, чтобы Frift допилили. Дальше ему, он сел писать новый сервис. Этот сервис был достаточно такой корневой. Управление пакетжами, зависимостями и так далее внутри Python. Он сел его писать и обнаружил, что он его начинает писать на Python 2.7. Понял, что он что-то делает не так в продвижении 3-го Python, и решил писать на 3-м Python. Стал писать и понял, что на самом деле 3-й Python нифига не работает внутри Facebook. Он обнаружил кучу зависимостей, которые были несовместимы. И пошел их переписывать. Где-то переписывал, где-то людей подключал, ну, тех, кто... Прям вот у него куча свободного времени. Я вот так и представляю себе, вот тебе задача, срочно за две недели сделай какую-то штуку. Он говорит, ну сейчас подождите, я 20 библиотек перепишу с 2.7 на 3. Прям какая-то халява. У него не просто куча свободного времени. В Facebook подход так организован, что менеджеры у них не приходят и говорят, ты должен сделать такую-то задачу. Инженеры сами ищут задачу и ее делают. И на этот момент товарищ не занимался фулл-тайм Python 3. Он делал это часть своего времени. Часть своего времени он уделял этому проекту. И когда он пришел к этому моменту, когда оказалось, что все сломано, он осознал, что он практически уже фулл-тайм занимается вот этой задачей. И они там пилили, перепиливали этот весь... Все модули, все зависимости. Это заняло буквально несколько лет. И такая по времени, он говорит, что 2013 год. Подходишь к человеку, говоришь, ну что, на 3-м Python напишем? Ему говорят, ты что, дебил? У нас такого вообще не может быть. В 2014 говорят, ну, мы видели, Python 3 есть, но вряд ли. А в 2015 уже люди внутри говорят, ну, может быть. А в 2016 все новое уже пишут на Python 3. Любой новый сервис, который внутри Amazon начинает писать, его пишут уже на 3-м Python. И это прям еще один момент, который был в видео, шаги, которые они проходили, это когда его позвали участвовать в обучении новичков. Так вот, приходит, набирает новых людей, свежую кровь, Facebook, в том числе перед ними выступает OBS и рассказывает. И этот OBS ему там, не моргая глазом, говорит, ребята, внутри Facebook все на Python 3. Что будете писать? Пишите на 3-м, не сомневайтесь. Причем на тот момент не все было готово. Они все еще продолжали бегом все допиливать и чинить. Где что рассыпалось. Вот такая особенность. Интересное видео. Если вы можете смотреть на нерусском языке, очень рекомендую. Я не могу не порецессировать чат сме... ну, я не знаю, смеется, радуется или наоборот очень сильно огорчается над цитатой. То, что перепиливание заняло буквально несколько лет. То есть, по контексту, буквально, ну, это там, не знаю, буквально пара дней. А тут буквально несколько лет. Ты же знаешь, что у Facebook деньгами опять залило нижний этаж и им нужно сжигать. Сжигать. Они, нет, в честь Facebook они не переписывали, они писали новое на новом, а старое они переписывали только если уж совсем разваливалось. Мне кажется, в масштабах Facebook несколько лет это быстро. Плюс один. Наверняка. Ну, бог с ним, с Facebook. Да, вот, вот, есть отличная тема от Валера. Про Times Series Database. Да, в общем, тут вышло недавно как это, такое сравнение... Где Influx не на первом месте. Да, представляете, так бывает. Оказывается, Influx это... Извините, у меня почему-то подвис документ. У меня клуб документов, они хотят показать документ. Все очень плохо. У меня вообще браузер немножко сходит с ума. Это очень-очень плохо. Просто отвратительно. DolmatinerDB я могу подсказать тебе. Блин, действительно Dolmatiner.",
    "result": {
      "query": "Facebook Python 3 transition"
    }
  }
]