[
  {
    "segment_id": "ace0a9df-e507-4383-aca4-e740534d6500",
    "episode_id": "b845aae2-3f00-4814-a1cb-117e65d46ba3",
    "episode_number": 382,
    "segment_number": 6,
    "text": "вот выполняться на вашей инфраструктуре, и соответственно все бонусы, скидок и вот этого всего будет без супер насынки, будете сразу платить своему cloud-провайдеру, но потом пришли некоторые компании, и такие вот мы не хотим свою инфраструктуру подключать, потому что можно, мы просто денег дадим. Ну вот так тоже. Какой был план заработка, если по умолчанию предлагалось пойти самому настроить? Ну, собственно, мы, план был, что компании платят за оркестрацию, то есть вот 10 долларов за человека в месяц, да, то что мы оркестрируем сяй на вашей инфраструктуре, то есть это была не такая уж новая идея, это такой получается, то есть это вот как если бы в GitHub actions только свои ранеры были, то есть либо сейчас более стал популярным еще один CI, BuildKite называется, они вот тоже, но они только делают так, что можно только подключить свою инфраструктуру, нет вот такой гибридной модели, что например можно и с этим, например, для своих Linux и использовать свою инфраструктуру, но из-за того, что там macOS так сложно поддерживать эту самую инфраструктуру, потому что нужно иметь hardware от Apple и там куча других заморочек, не все компании сразу готовы сами этим заниматься, поэтому хотели бы, например, использовать какой-то облачный, то есть вот в Syruse можно, например, macOS использовать облачную от нас, а все остальное у себя выполнять, что тоже такая интересная особенность. Собственно, ну раз мы про macOS заговорили, наверное, наверное, пора переходить к, собственно, таблику, который как-то надоумил нас тебя позвать, это, собственно, Tart. Почему, зачем новое что-то? Есть же как бы вот гипервизор, встроенный в macOS. Да, так он есть, но как его использовать? В Syruse, то есть на самом деле, кто пытался когда-то что-то собирать под macOS и особенно делать какую-то Syruse и вот эту сборку для маков и для iOS, то как бы там совсем все не так радужно, как мы привыкли с VRO, AWS, контейнеров, кубернетисов, когда там кнопку нажал, там сразу по щучьему велению возникло 10 новых машин, они начали что-то там все делать. Вот как бы еще поза прошлый век вся вот эта инфраструктура про сборку под мобильное, особенно под macOS, и, соответственно, стартом хотелось принести похожий сценарий использования как с контейнерами, но вот с виртуальными машинами для macOS. И, соответственно, если так подумать, то есть в основном только виртуализации, которые больше предназначены для того, чтобы запускать Windows на macOS, чтобы там не знаю какие-то старые enterprise приложения можно было запускать и всякое такое, то есть они не очень приспособлены для того, чтобы использовать с какими-то автоматизациями, типа из терминала что-нибудь запустить, там не знаю, пекер-плагин, который может автоматизировать сборку этих виртуальных машин, там обычно ты просто ее запускаешь, ты сам ручками все прокликиваешь, что-нибудь там запускаешь, максимум что ты можешь это сохранить и там куда-нибудь на FTP-сервер какой-нибудь залить и поделиться, но все довольно примитивно и плохо, и, соответственно, сама Apple добавила сначала в Big Sur, это позапрошелая macOS, они вот гипервизор добавили. У них же раньше тоже как-то был только по-другому назывался. Ну вот он был гипервизор framework, это вот что в Big Sur у них добавили и вот в Monterey в последнем они добавили virtualization framework, это вот собственно то, чем мы как бы воспользовались, то есть как бы мы не писали, если сказать, что мы написали виртуализацию, можно сразу подумать, что мы написали там Network Stack, пошли там Zeriver с инжинировали там, Driveri и так далее, и так далее, нет, как бы такая действительно компания типа Parallels и там VMware и там Anka, они для Intel это и делали. Мне кажется, немножко обманываешь, потому что гипервизор framework появился в Yosemite. Ну может быть, то есть, может быть да и раньше, но вот именно virtualization framework, который позволяет абстрагировать, что не нужно свой bootloader писать и вот драйвера и вот всяким таким заниматься, а это вот появилось в Monterey и там соответственно есть две возможности запускать Linux и запускать OCE. И вот Linux, частью виртуализации, которая для Linux использует Docker, desktop, соответственно там в какой-то момент там в экспериментально эта галочка появилась, что использовать virtualization framework, но сейчас мне кажется это уже по дефолту. Не, она все еще так себе работает. Все еще эксперимент. Ну вроде я с ней сижу и все, все вот локально у меня более-менее прекрасно работает, то есть жалоб моих нет, но я не то, что сильно много контейнеров запускаю, ну то есть не сильно сложенные такие поды, то есть обычно там 2-3-4 контейнера, не более. Вот и мы соответственно, для Intel это было слишком сложно, а для Apple Silicon, то есть для M-девайсов это получилось довольно просто, то есть вот Николай он сделал всю самую-самую сложную работу по этому, как надо было инвестигейшн сделать, как бы вот это MVP написать и потом я уже присоединился больше как с точки зрения продукта, как вот сделать плюс такой тестировщик, который может и потестировать и подебажить проблему и pull request отправить, который фиксит. И вот соответственно мы где-то месяца за 2,5-3 написали вот TARP, который на наш взгляд решает проблему для ряда автоматизации, то есть это не только CI, но еще можно просто тестировать свои изменения, то есть некоторые люди уже начали тестировать вот эти вот системы, которые автонастраивают компьютеры для сотрудников, то есть больших компаниях там уже тебе приходит компьютер, а там уже все настроено вот этим менеджментом, соответственно тестирует вот эту настройку тоже в TARP. И в общем да. Слушай, а есть же X-Hive, такой типа поверх Hypervisor Framework сделанный CLI-гипервизор для MacCasee, вы его рассматривали или там чем-то не подошел, там были какие-то проблемы? Там все равно все слишком сложно, то есть там нужно было и workloader писать, и я так понимаю много других вещей, то есть мы пытались немножко поинвестигировать это наверное прошлым летом, но на тот момент это было слишком неподъемно для нас двоих, то есть не зря там есть такие огромные компании, которые занимаются только виртуализацией. Подожди, мне казалось, мне казалось, что ты можешь взять X-Hive, взять ISO-шник нужной операционной системы под нужную платформу и запустить. Ну возможно для, где у тебя есть ISO-шники и так далее, то да, но с MacCasee там не все так сложно. Да, я понял, да, да. Не все так просто. Да, и тем более там понятно было, что пытаться фокусироваться на Intel уже бесполезно, а то, что они переделали с bootloader под MacCasee, можно вот прекрасно, по-моему, у вас даже в темах было про Asahi и Linux, где собственно просто какой-то, не знаю, гений, не гений, но вот смотреть стримы, когда там копаются в регистрах и так далее, как он там разбирается, там reverse engineering, как там bootloader это работает на Apple Silicon, это, конечно, потрясающе, и там это что-то, это как смотреть, когда ты как-нибудь спортом занимаешься, потом смотришь Олимпиаду и такой вот не могу так, но понимаю. Тут тоже, как бы вроде все понимаешь, но, то есть как бы отдельной части, но то, что все вместе происходит, там, конечно, какая-то магия. И в общем, да, там Apple все сильно переделали под Apple Silicon, и из-за этого, например, вот тот же Parallels, который сейчас тоже поддерживает виртуализацию MacCasee под Apple Silicon, и Anka, которая такая более тоже сфокусированная на continuous integration и подобных автоматизаций, они тоже все переписали и используются тем же virtualization framework, то есть если раньше у них был know-how, как вот они за reverse engineering сделали свой там bootloader, сделали там драйвера для того-то, сделали свой network stack и так далее, это реально много инженерной работы, это know-how, но с Apple Silicon, Apple немножко им под, как это прилично сказать, не знаю, как сказать, прилично, короче, под насрал им немножко, и там все сильно стало непонятно, и плюс они сделали вот этот virtualization framework, который для, как бы вот работает прекрасно. Вот мы, я говорю, два человека, которые никогда раньше не писали ни виртуализацию, ни на свифте не програнировали, он за два месяца с копейками запилили довольно прикольную виртуализацию, все прекрасно работает, народ сейчас звездочки ставит, feedback дает, все хорошо работает, не радоваться не могут, так что получилось очень удачно. Я смотрю, там еще какой-то UI есть, довольно здорово, потому что, да, я могу представить больше одной ситуации, иногда бывает, то есть у меня, наверное, самое недавнее, что было, это, короче, на каком-то курсе, по-моему, к урсердскому предлагали понаставить себе всякого в систему, чтобы выполнять упражнения, я не люблю себе в систему ставить всякое произвольное, непонятного происхождения, даже не потому что оно там каким-то маловарем, я боюсь, и кажется, а еще и просто потому что многие вещи по тому системы очень тяжело выковыривать, и мне вот нравится идея взять это как-то упаковать в виртуальную машину, запустить, потом все это снести на чертовой матери, вот, я, возможно, буду таким панашним пользователем этой штуки. Да, прекрасно, еще можно, соответственно, если ты сам какие-нибудь такие делаешь, не знаю, курсы, не курсы, когда нужно вот это, именно, сделать настройку, у нас же Tart умеет эти виртуальные машины пушить в Container Registry, то есть можно взять просто собрать вот какой environment нужен для той или иной задачи,",
    "result": {
      "query": "виртуализация macOS через virtualization framework"
    }
  }
]