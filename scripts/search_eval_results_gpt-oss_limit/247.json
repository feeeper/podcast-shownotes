[
  {
    "segment_id": "1963fdaf-8c64-4ec7-9680-7287a55adca0",
    "episode_id": "0dd9b3aa-fd09-4f2d-8a07-abf819b65f92",
    "episode_number": 247,
    "segment_number": 3,
    "text": "Почему я спрашиваю? Потому что чаще всего код-ревью или архитектур-ревью, оно может проходить очень поверхностно. Это же зависит от культуры в компании, и мало компаний пытаются сделать эту культуру достаточно сильно. Как у вас это проходит? Ну, во-первых, надо быть реалистами и понимать, что на уровень непосредственно кода архитектур-ревью не спускается. Иначе невозможно было бы объять несколько проектов и так далее. Да и смысла нет. Условно говоря, занимаясь вообще архитектурой, в каком-то роде разработчик, который начал этим делом заниматься, он жертвует глубиной своих знаний в программировании в обмен на ширину своих знаний в программе технических знаний. То есть, условно говоря, архитектор – это максимальная ширина знаний, но при этом глубина знаний может страдать во многих местах. Понимаете основную мысль? Но, естественно, мы стараемся обсуждать как можно более подробно. Особенно в области интеграции с другими вещами, там и в области интеграции с секьюрити-механизмами. То есть, не третий-сторонними, а с внутренними сервисами обсуждается все достаточно подробно. Так, поехали дальше. Итого, мы на чем остановились? Ты хорошо получил все, ты сделал какую-то минимальную архитектуру. А давай погрузимся в архитектуру. Для меня это очень сложный вопрос со следующей точки зрения. Смотри, для того, чтобы сделать подходящую для данного приложения архитектуру, ты должен либо знать все виды архитектуры и, соответственно, выбирать, что, в принципе, мало реально. Мне кажется, невозможно прочитать все книжки про архитектурирование и посмотреть все виды программ, которые существуют в мире. С другой стороны, можно знать пять основных типов, в них неплохо ориентироваться. Или ты, может быть, сталкиваешься с одними и теми же типами задачи, поэтому ты приблизительно представляешь, как надо делать. Да. Вообще есть не такое большое количество архитектурных решений стандартных. Я не знаю, если привести в пример Layered Architecture, Plugin Architecture Decision. Такие вещи, которые есть в коде, условно говоря, Patterns, наши любимые шаблоны проектирования на русском. Да, вот есть шаблоны проектирования, относящиеся к коду. Также и в мире архитектуры, в принципе, можно выделить некоторые шаблоны архитектурного проектирования. Погоди, Стэн. Вот как раз уже на этом этапе вопрос. Здесь, мне кажется, все шаблоны проектирования, как это, Тиеринг полны. То есть на любом шаблоне можно сделать любую задачу. Ну, не совсем. Это не совсем так. Потому что некоторые шаблоны, ну, как бы у каждой системы есть какое-то количество, скажем так, свойств. Ну, не знаю, может быть, как сказать, в общем, расширяемость, гибкость, какие-то подобные свойства. Естественно, разные шаблоны проектирования предлагают различный баланс между этими свойствами. То есть, например, если у вас полноценная Layered Architecture, то есть полноценная, что я имею в виду, у вас есть интеракторы, юзкейсы, бизнес-объекты. Ну, вот это то, что всем известно по таким огромным интерпрайз-джава-приложениям. Естественно, имея такое приложение, у вас огромные-огромные слои абстракции, можно очень много чего поменять, большой уровень гибкости, но вместе с тем огромное-огромное количество, скажем так, дополнительного boilerplate кода, который это поддерживает, дублирования сущностей и так далее. То есть у каждого типа архитектуры есть свои слабости и сильные стороны. Так что я бы не сказал, что каждый вид архитектуры, он тьюринг-полон, но у него есть сильные и слабые стороны в любом случае. Сильные и слабые – это понятное дело. Я имею в виду, что слабости, они не из тех, которые нельзя превозмочь. То есть их можно превозмочь, будет еще больше boilerplate или каких-то других проблем, но все можно сделать. Да, съесть кактус, например. Да, да, да. То есть получается, что ты, грубо говоря, берешь пять основных темплейтов архитектуры, имеется в виду, и выбираешь среди них тот, который лучше всего подходит под данный тип, потому что есть какие-то особенности приложения, верно? Там, я не знаю, надо очень сильную расширяемость или какой-нибудь другой совершенно случай, я даже не могу его сейчас придумать сходу. Или как? Да, именно так. То есть подбирается архитектура. На самом деле, я бы не сказал, что конкретно приложения, которыми я занимаюсь, они из ряда вон выходящие. То есть таких вот, может быть, я бы вспомнил какие-то особенные архитектурные решения, если бы подумал какое-то время, но в основном это достаточно, скажем так, приложения с предсказуемой архитектурой. Хорошо, то есть ты вот выбрал тип, типаж архитектуры, говоришь, я буду использовать вот данную тип архитектуры в этом проекте, сразу раскидываешь, то есть вам всем архитекторам, которые в том числе будут делать тебе ревью, всем понятно, что это значит, и ты просто раскидываешь для архитекторов других, говоришь, вот эта часть будет покрыта вот здесь, вот этим, вот эта часть будет покрыта вот здесь, вот этим, то есть фактически делаешь документацию для архитекторов, верно? Как это преобразуется в код в дальнейшем? То есть ты начинаешь высокоуровневые вещи какие-то делать, или этого вот описания достаточно, чтобы программистов уже подцеплять на этом этапе? Ну да, на самом деле проект дальше уже идет по обычному своему, скажем так, пути, в плане того, что набирается команда, определяется там продукт-менеджер, часто даже в той команде есть тех лид, в команде, которая набрана, и взаимодействие между мной и тех лидом, это и есть основная форма, скажем так, не то чтобы даже контроля над тем, чтобы это соответствовало архитектуре, это даже не столько контроль с моей стороны, сколько диалог, насколько это сейчас соответствует, насколько это будет соответствовать и так далее. То есть в принципе я всегда, вот когда проект находится в активной фазе, я стараюсь всегда, скажем так, находиться на страже вот этого соответствия. У меня из личного опыта самые большие проблемы с архитектурой и с подключением людей, связанные с интеграцией. Особенно если интегрируется в какую-то большую плотную систему, когда даже сама идея интеграции вызывает дрожь и волосы становятся дымом. Как учет интеграции и вообще как интеграция влияет на выбор архитектуры, на выбор, ну в смысле на работу с людьми, то есть, ну давай расскажи что-нибудь про интеграцию. У меня по щеке потекла скупая мужская слеза. Я вот что могу сказать. Так вот, по поводу интеграции, да. Значит, да, это на самом деле самое сложное. Иногда бывают даже случаи, когда просто надо будет, ну так как там какие-то сложные кусочки, я в принципе пока что еще не разучился программировать и могу даже какие-то куски, бывает, что я просто добавляю во фреймворк для интеграции или что-то в этом роде. То есть, это естественно боль почти всегда. И, ну, бывают митинги, я достаточно регулярно встречаюсь с тех ледом, чтобы обсудить интеграцию, там я слежу за межреквестами, а иногда просто делаю какие-то куски интеграции сам, именно даже не из-за того, что я там какой-то полубог в плане программирования, а из-за того, что я уже встречался с такими, с такого типа, с интеграциями, с этой системой, а команда может быть не встречалась. Соответственно, у меня есть возможность как-то сильнее погрузиться именно в интеграции, дав возможность команде, может быть, заняться бизнес-логикой, внутренними задачами. Так что это опять-таки достаточно индивидуальная вещь. Хорошо. Ну и идем дальше. То есть, получается, что в этот момент, когда, я так понимаю, что работа с главой команды, которая будет работать над данным решением, она начинается еще с момента, когда ты еще архитектуру не разработал. То есть, начинается поиск людей, но смысла нет ждать, можно делать это все в параллель постепенно, более-менее осознавая, сколько людей будет участвовать в процессе, в проекте. И до самого конца ты работаешь с этим человеком, с главой команды, возможно, со всей командой, постепенно все дальше отодвигаясь от процесса. То есть, постепенно ты начинаешь уже переставать кодить, переключаться к другому проекту, а просто следишь, что они что-то не поменяли. Если что-то поменяли, ты обсуждаешь с ними и отражаешь документации, как мы обсуждали до этого. Я все правильно воспринимаю? Да. Ну, в идеале, скажем так. Иногда требуется, не знаю, ну, естественно, иногда требуются какие-то дополнительные интеграции. И я возвращаюсь к своему прежнему участию в проекте, скажем так. Насколько много проектов может быть одновременно у тебя? То есть, ты сейчас заканчиваешь написание архитектуры для одного проекта, и в этот момент ведешь одновременно 10 других? Нет, к сожалению, до такой многостаночности я еще не дошел. Но вообще, было в какой-то момент 4 таких проекта на разных стадиях, и это было уже много. То есть, это уже было очень сложно успевать. В принципе, 2-3 это еще реально, а если 1, то можно погрузиться более плотно. То есть, в какой-то мере я могу это регулировать каким образом. Я могу не браться за новый проект. Просто если кто-то собирается какой-то движуха, так скажем, на тему новых каких-то проектов, я могу сказать, вот извините, у меня тут очень большая занятость по другим проектам. То есть, на самом деле, 2-3 это хорошее число. Но у меня есть еще какое-то количество обязанностей. Мы сразу так нырнули в обязанности именно сопровождения и поддержки архитектуры проектов. Есть еще какое-то количество вообще вещей, которыми я занимаюсь, поэтому, наверное, может быть, это тоже влияет. Понятно. И я даже не знаю, что здесь добавить. В принципе, мы поговорили достаточно много и плотно. Саша, есть какой-нибудь вопрос? Нет, нет, у меня чего-то вопросов нет. Геннадий, может мы о чем-то забыли спросить? Да, забыли спросить самое главное, зачем к таким классным разработчикам вообще нужен такой человек, как архитектор? А, ну это же очевидно. Или нет? На самом деле, тут есть несколько особенностей. В первую очередь, связано с тем, что много интеграций. То есть, может быть, если бы это небольшое приложение, то тех лид может выполнять роль архитектора в полной мере. Просто вопрос в том, что очень большая система, много внутренних сервисов. И самое главное, что у нас есть, самое главное, это скорее организационная проблема, связанная с тем, что в основном команды, которые разрабатывают приложения, они находятся в других местах. Внутренние, внешние, по-разному бывает, но они, условно говоря, в нашу техническую организацию, непосредственно нашего офиса, они не входят, и очень удобно, чтобы были такие представители в разных проектах и командах. То есть, тут скорее именно вопрос организационный. На определенном масштабе просто нужны люди, которые как-то все координируют. Вот так вот. Слушай, я забыл еще один вопрос уточнить. Смотри, у меня самая большая проблема, когда я... Нет, самая большая все-таки интеграция, но вот следующая. Следующая программа, и слеза все равно течет по щеке, как ты правильно говоришь. Это правильная работа с данными. Очень много бывает случаев, когда... Ну, к примеру, сейчас я делаю дизайн системы будущей, которая будет как-то работать, и самый сложный момент – это разобраться, какие данные куда текут, в каком месте они складываются. А в моем случае они еще должны каким-то образом мерджиться. Ну, то есть, мне нужно придумывать, каким образом правильно делать дейтадизайн, и каким образом вообще вот эти данные все будут работать. Для того, чтобы это все сделать, практически мне приходится окунаться в каждую подсистему, которая посылает данные, почему она посылает именно так, можно ли поменять то, что она посылает, каким образом оно будет в нашей системе складироваться, объединяться с другими типами данных, приходящих из других систем. И это требует колоссального количества времени. Судя по твоим рассказам, у тебя не возникает таких проблем. Можешь поделиться, как ты так делаешь? Конечно же, возникает. Вот и весь ответ. На самом деле, вообще складирование данных – это такой вопрос очень общий. Ну, на самом деле, во-первых, у нас в каком-то роде спасает то, что у нас нет хайлода. То есть, есть достаточно много способов хранения данных, достаточно больших данных, которые не предполагают хайлода, и есть возможность просто их хранить и кашировать в каком-то месте. Я к тому, что, может быть, именно интерпрайс составляющего этого отсутствия хайлода, оно дает возможность гораздо лучше спроектировать данные, из-за того, что решений уже есть огромное количество. Меня больше интересует не… ну, в смысле, сложности у меня возникают не со складированием, а со правильным складыванием, потому что даже при хайлоде или не при хайлоде все равно есть какие-то уже готовые решения, мы рассматриваем 2-3 варианта и из них выбираем. А больше именно с правильным пониманием, то есть это уже бизнес-логика плюс какая-то работа над этой бизнес-логикой. Ну, это правда сложно. На самом деле, достаточно часто приложения являются продолжением какой-то работы дата-аналитиков. То есть существуют дата-аналитики, которые проанализировали данные, а приложение является продолжением, логическим продолжением их работы. Соответственно, всегда можно посоветоваться с ними по поводу внутренней логики этих данных. Следующий момент на тему организации, мерджа и тому подобных вещей. Тут, да, можно требовать не только посоветоваться, можно также требовать от них документации на тему того, каким образом, предположим, мерджить данные. Вот есть несколько источников данных, мы их должны объединить по каким-то правилам, а эти правила разработаны дата-аналитиками. То есть разделение ответственности и конвейерный подход. Вот наш ответ. А что же дата-аналитики? Их много? Это отдельная команда? Да, на самом деле это не отдельная команда, это отдельные команды. То есть есть огромное, ну, как большое количество дата-аналитиков, это люди, которые анализируют данные. Естественно, если компания занимается консультацией клиентов, то эти консультации проходят, скажем так, они database, то есть они основаны на большом количестве различных данных. Есть люди, которые анализируют эти данные. То есть они... вот. И таких команд много, скажем так. То есть это люди, которые проанализировали данные, которые потом, предположим, превратились в некоторое решение. Ну, это один из случаев, когда вообще очень, ну, как бы, такие data intensive приложения получаются, в которых очень важно то, что ты говоришь. То есть у нас всегда есть какая-то поддержка с точки зрения знания внутренней, да, бизнес-составляющей этих данных и тому подобных вещей. Хорошо, когда у тебя есть в помощниках команды, работающие с данными. У меня вот нет такой возможности. А еще вопрос. Вот ты коснулся слегка, но как-то мы обошли его немножко стороной. Бывает ли так, что у вас... ты же сам вырос фактически из software engineer. То есть бывает ли так, что кто-то из команды, который сейчас там работает над каким-то текущим решением, узнает, что надо развивать другое решение, сказать, типа, ребята, я уже придумал для него архитектуру, давайте я это сделаю. Да, у меня это часто бывает. То есть не то, что часто бывает, часто бывает желание просто взять и какой-то кусочек реализовать сам. Ну, иногда я это делаю. Просто на самом деле, да, я стараюсь как-то продолжать программировать, чтобы не утратить навык, не стать Markdown-программистом. Ну ты не только Markdown, а еще и Email-программист. Это не так все страшно. И YAML иногда уже.",
    "result": {
      "query": "архитектура кода интеграции компании"
    }
  }
]