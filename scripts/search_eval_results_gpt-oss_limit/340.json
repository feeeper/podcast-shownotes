[
  {
    "segment_id": "5e111640-aaa0-433c-a37a-004f31bea8cd",
    "episode_id": "a4bafce8-1a2c-4c91-92e0-4b48689ee2e9",
    "episode_number": 340,
    "segment_number": 5,
    "text": "Вот к тому, что Валера сказал, нужно еще учитывать, что Cockroach это не 100% замена Postgres и, например, Save for update skip locked в нем, типа, вообще нет. Да, еще тут, как раз, тоже из поста Ивана, что нет хранимых функций триггеров, что, может быть, важно для сложной, ну, то есть, как бы для системы, где сложная, намороченная бизнес-логика в этом хранится. Или даже, типа, вот, то я работал над системой, я, по-моему, рассказывал, где на функциях и триггерах было сделано, было сделано, была сделана куча оптимизации. То есть, бизнес-логика, конечно, могла жить где-то еще в другом месте, но она вызывала какие-то такие функции, которые просто были написаны на C в Postgres, как extension в Postgres, чтобы это работало быстро. То есть, например, специализированные типы данных, которые решали специализированные задачи. Или там специализирована функция агрегации, которая, типа, имела нашу специальную логику какую-то, которая, в принципе, более-менее абстрактная, то есть, она отделена от всего остального приложения, но эта функция была, например, написана на C и работала быстро в Postgres. Нету FullTextChurch, но есть Jin, и можно FTS-но крутить на внешних, короче, системах. Я там, залинга соленкован, Post, который я не читал, и DDL все еще скорее не транзакционен, чем транзакционен, и я, так сказать, удивлен слышать, потому что мне казалось, что у как раз в этом системе все хорошо, а оказывается, вот, нет. И это бы меня огорчало, потому что от такой базы я бы как раз-таки хотел транзакционного DDL, во всяком случае, по части, то есть, у меня это бывает сдачи, когда нужно внутри одной DDL-транзакции создать таблицу, убить старую таблицу и переименовать таблицу, короче, на место вот старой таблицы, типа, транзакционно подменить таблицу, короче, бывает нужно. Или, например, транзакционно более реалистичной, когда это бывает нужно. Если, например, у нас партизированная таблица, мы не целиком таблицу заменяем, а какую-то партизу, например, мы их ратируем. Я, конечно, догадываюсь, что это на чем-то типа, короче, это может быть не очень актуальная задача, потому что, скорее всего, короче, сам просто внутри себя будет менеджить рейнджи, вот у них такой низкуровневая абстракция, у них данные хранятся по таким, короче, диапазонам ключей, которые сами там перераспределяются, потом, наверное, это просто, может быть, не очень нужно там, но в целом я периодически могу хранять такой от баз данных, потому что другой юзкий есть, например, если у нас есть какая-то джаба, которая баз данных наполняет, и джаба, она обычно пишется на какой-нибудь херня типа спак, ходу по еще к какому-то такому дерьме, а любое такое высокопараллельное дейта, короче, дейта-мешалка, она будет вам вываливать вашу дейту в базу много потоков, совершенно не транзакционно, поэтому типичный подход это завести таблицу с кем-нибудь там, не знаю, outtable underscore, короче, бла-бла-бла-бла-бла, записать, как оно называется, дать дейта-мешалке налить дейты в эту таблицу, когда дейта-мешалка сказала, что у меня все готово, без ошибок и там все нормально, вот тогда приходит транзакция, и короче, таблицу переименовывают в ее конечное состояние. Это второй такой юзкейс, который все еще должен быть актуален для кокроуча, я, в принципе, могу представить ситуацию, где-то, может быть, полезно, потому что, например, у нас есть какой-нибудь аналитическая джаба, есть какие-то наши OLTP-системы, в которой у нас профили пользователей лежат, и мы, короче, нашу аналитическую джабу проанализировали наши какие-то потрясающие аналитику по пользователю, и потом хотим, значит, добавить в нашу OLTP-базу какой-то уже вычисленный показатель, скажем, это какая-то аналитика про этого пользователя, мы знаем, например, что ему рекламу нужно показывать такую, например, когда таргетинг для него отработали или там, не знаю, какой-то более человечный вариант, если это, не знаю, какой-нибудь магазин, вместо того, что там, типа, общенную таргетинговую рекламу показывать, давайте, значит, просто вот, ну или ладно, давайте не про магазин, давайте что-нибудь более, опять же, человечное, ну скажем, вы делаете сервис рекомендации видео Netflix, короче, вот вы пересчитали рекомендации для этого пользователя, и можете просто кусок его профиля обновлять какой-то такой Spark-джабой, как раз, потому что вы их обновляете сразу для многих пользователей, например, и вот эти обновленные профили неплохо бы, короче, типа, транзакционно обменить что-нибудь такое, это бы фантазировал грубо, было бы неплохо, если бы DL хотя бы для таких сценарий был транзакционным, но по формулировке все еще скорее не транзакционен, не очень понятно, до какой степени он там не транзакционен, я вижу, что Иван Актерин в чате напишет, потому что мне вот прям интересно, а вот тут даже есть ссылочка СМ, видимо, она как раз транзакционно, да, там типа non limitations, окей, я ее почитаю, но это все равно гораздо лучше, чем ничего не иметь, сорри Саш, я тебя перебил, ты по-моему что-то другое хотел говорить. Нет, я хотел на самом деле дальше идти по пунктам, то есть мы поговорили, что, ну как бы, по сути, любое продакшн использование это за деньги, что не обязательно плохо, то есть как бы, я ничего не имею против проприетарных баз данных, как бы, если они решают вашу задачу вперед. Я имею против совсем проприетарных баз данных, потому что когда происходит какая-нибудь хтунь, она происходит обязательно, просто даже при установке, разобраться, что происходит в проприетарной базе данных невозможно, единственное допустимое вариант проприетарной базы данных, когда тебя вместе с базой данных, ну как это Oracle делает, продают, короче, специальных людей, которые имеют долг к ее исходному коду и умеют ее пасти, это единственный допустимый вариант продажи проприетарной базы данных. Есть, ну раз уж мы про проприетарщину заговорили, есть другой риск, то что тебе компания вендер в какой-то момент может просто не продать лицензию, там по геополитическим или whatever reasons.",
    "result": {
      "query": "Cockroach vs PostgreSQL транзакционный DDL"
    }
  }
]