[
  {
    "segment_id": "b553ebd8-5023-43ef-b5e5-a489fa366037",
    "episode_id": "db4723b7-a33b-4c9e-b45d-a72015a2a050",
    "episode_number": 23,
    "segment_number": 2,
    "text": "Ну, круто-круто. Вот, ну, короче, и у вас, Саша, нет никакого опыта со Spark'ом вот такого прям продакшн? Нам пока не особо и нужно. Ну, вот у вас же была вроде Cassandra, нет? Cassandra? Нет, у нас никогда не было Cassandra. Мы рассматривали ее как вариант по сваливанию с DynamoDB, но нет, у нас нет Cassandra. Просто, что на самом деле довольно естественная выглядящая архитектура. Если смотреть на всякие спейнеры, всякие foundation DB и прочую такую фигню, то типично у тебя есть какую-то key value с транзакциями, без транзакции, неважно. И для запросов к нему в всех этих distribute'ах, в итоге пришли к тому, что делают отдельную систему, которая как раз аналогичным образом сделана, как Spark Streaming, просто как Spark, что она умеет на кучу машин разбить кусочки запроса, локально там что может прогнать, потом дальше на какую-то машину агрегатор прогнать. Из той же оперы я могу, пожалуй, вспомнить ReactPipe, который сделан для такого же типа запросов в React'е. Ну, то есть, я подумал, что может вы этот агентист попользовали. Нет, нет. Но мы с тобой вдвоем были на этом Cassandra meetup'е, где все это рассказывали за Spark'а и за Cassandra. Подожди, мне казалось... Казалось, что это Cassandra в итоге было. Там за Spark'а был только один маркетинговый деклад, поэтому меня это расстроило. Мне кажется, он был не такой уж маркетинговый, то есть, ну, там дядька показал DSL, красивый DSL, мне прям захотелось. Нет, ну, я на самом деле называю маркетинговым декладом все, что я могу почешкнуть из источников типа сайта или пейпера. То есть, мне хочется всегда послушать вещи, которые я не могу прочитать просто на их сайте, на первой странице. Ты же не одобряешь Cassandra. Что ж ты ее тут распиарил? Я не одобряю Cassandra, но я знаю, что она у вас вроде как планировалась или была, или что-то такое. То есть, я помню, что ты мне ее упоминал. А почему ты не одобряешь Cassandra? Потому что у ребят... Короче, у них бывают проблемы с доведением... Досведения пользователя, что некоторые варианты использования могут приводить к потерям данных. То есть, вот тот самый случай, когда мне не нравится, что маркетинг бежит впереди продукта. И вот, например, когда добавили, как они это называли, микротранзакции. То есть, язык повернулся назвать Atomar Compare & Swap микротранзакциями, которые, к тому же, еще не работали в тот момент. И это вот так резко стригерило отражение, что как можно на такую не работающую альфа-штуку, которая еще и... То есть, она не просто... То есть, там были не просто баги в реализации, там баги в концептуальном... То есть, грубо говоря, у тебя там был Compare & Swap, который завязывался на какой-то там таймстэмп, который брался из какого-то времени. То есть, такая вещь, на которую за это можно заполагаться, что-то такое было. Я уж сейчас точно не вспомню. И мне кажется, что очень некорректно было с их стороны это, во-первых, так называть, а во-вторых, это релизить вообще на публику. Поэтому в целом у тебя даже к команде уже больше предубеждений. Ну да, я просто вижу, как большой эту фичу. То есть, сейчас React и Cassandra развиваются практически назрю-обназрю. У них немножко разные кастомеры, у Cassandra гораздо больше сетапы. Cassandra, она в основном используется как такая... То есть, я так понимаю, в нем реже хранится всякая мутабельная. Хотя, на самом деле, в React тоже нечасто мутабельная хранят. И они сейчас развиваются почти назрю-обназрю, но React чуть потормознее и постабильнее, как я понимаю. Cassandra такая более экспериментальная, и у нее больше инсталляции. И она уж устрее, именно в плане перфоманса SuperNode. И я просто видел, как вот эту фичу делают в React, и как она буквально через год вылезла в Cassandra. А в React ее несколько лет проектировали, несколько лет делали... Ну нет, делали ее где-то около года. Но она была настолько вылезанная, там все покрыто тестами. Ее три человека ревьювило, потом еще отдельный человек ревьювил, писал документацию по тому, как это все устроено, чтобы никто потом это не забыл. И с другой стороны, я вижу, как в Cassandra такая фафь, вот вам микротранзакции. Они типа вам... Транзакции типа в Cassandra. Хотя, на самом деле, это даже не транзакции, а все равно их так называют. Ну то есть, разница подходов. Меня тут много отторжения вызывает. Бомбануло. Ну да. Ну и на самом деле, там мне еще не нравится, что они со своими... Короче, в Cassandra же есть только Last Strike Wins. И пока не было коллекций в Cassandra, опять-таки, было очень много абьюза, который мог приводить к потенциальным потерям данных. Сейчас коллекции, я так понимаю, я не очень, к сожалению, смотрел в кишки, но я так понимаю, коллекции это более или менее CRDT. И я так понимаю, с ними проблем быть не должно или почти не должно. А вот с тем, как было раньше, до выхода коллекции CQL, ну, наверное, у людей были с этим проблемы. Я не специалист по Cassandra, но, по-моему, там уже давно не только Last Strike Wins. По-моему, у них никогда не было вектор-клокков. Я ни разу не слышал, чтобы у них были вектор-клокки. В общем, это под вопросом, вот то, что ты говоришь про Last Strike Wins. То есть, когда-то такое было, да, но они приложили какую-то альтернативную схему. Я, опять же, я не специалист. Вот среди наших слушателей наверняка есть, ну, из многотысячной аудитории точно есть один специалист. Вот я прошу его прийти и объяснить, что там сейчас в Cassandra. Ну, я вот сейчас вбиваю в Google Cassandra вектор-клокк. Первая статья, продатированная, ну, там, прошлым годом. Why Cassandra doesn't need vector-klocks. Ну, то есть, и там, в той статье я ее читал. Насколько я помню, как раз упоминание коллекции CQL, что, типа, они все решают. Первая ссылка в Google. Этому источнику можно доверять. Ну, это сайт DataStax, вообще-то. И какой датой датирована статья? 2 сентября 2013. Да, давайте доверимся статье уже почти двухлетней давности. Ну, ты понимаешь, да, что, ну, как бы, такой слабенький поинт. Ну да, я, на самом деле, единственное, послушал бы кого-нибудь более в этом разбирающегося, наверное. Ты в последний раз кого-то под дерглом, и мне сказали, что ничего такого нет пока. Ну, давай я озвучу ту тему, которая начинала озвучиваться.",
    "result": {
      "query": "Cassandra микротранзакции проблемы данных"
    }
  }
]