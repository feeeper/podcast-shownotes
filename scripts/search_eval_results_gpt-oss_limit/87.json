[
  {
    "segment_id": "0ba13af3-c4cc-417b-a28c-f197087af7c9",
    "episode_id": "42f6486a-4b6b-4142-8bc9-5d5a8ddec030",
    "episode_number": 87,
    "segment_number": 3,
    "text": "Слушай, ну а вернемся обратно к поиску. То есть вот, допустим, я написал твит, в нем там 100 символов и 10 слов, да, и вы фактически равноценно все эти слова запихиваете у себя в индекс, и я могу по любому слову найти мой твит. Или есть какое-то, ну не знаю, хэштеги более важные, если я ищу, то мне в первую очередь выдать слова с хэштегами, или, я не знаю, не искать какие-то слова, или, ну скажем, я не знаю, слово add, или там there, ну какие-нибудь вот эти вот ключевые штуки, которые всегда есть в поиске. Можешь что-нибудь поделиться, нет? Да-да, конечно, все такое есть, там ничего такого в Rocket Science нет, стоп-слова выпиливаются, предлоги всякие, но хэштеги рассматриваются так же, как обычные слова, то есть действительно по любому слову, которое в твоем твите есть, ты можешь его найти, можешь еще дополнительно там указать from, двоеточие, твой юзернейм, да, чтобы отфильтровать все отлично. И несколько других там операторов есть, фильтры в хэштеге, но так да, просто обратный индекс строится по словам и по хэштегам точно так же. А, и есть, конечно, еще ранжирование, то есть есть два вида поисков, есть по ресенсе и релеванс. Ресенсе это просто все твиты хроматически ассортированные, или они называются на леве, по-моему, live. Да-да-да. И есть еще топ, вот топ это ассортированные по релеванс, то есть твиты, которые получили больше твитов, больше фейворитов, извините, лайков и больше, скажем так, ответов, или, может быть, они были в каком-то verified аккаунте или что-то такое, ну там сложная формула, они будут приоритизироваться и показываться выше, чем тот, который никто не видел и никогда не кликал. Но временной фактор в этой формуле тоже очень большой влияние имеет, то есть даже очень популярный твит, если он был написан 3 года назад, будет ниже, чем какой-нибудь недавний и менее популярный. Слушай, ты вот коснулся этого, важности тех, кто видел и так далее, мне всегда было интересно, вот я там статистику видел, граф, или как она называется-то, что твой твит столько раз ретвитнули, столько ответили, но посмотрело столько народу, как вы это вообще можете оценивать? Ты, случайно, не можешь нам поделиться этим? То есть мне всегда было интересно, как это вообще делается, у меня даже в ЖЖ иногда показывают, там, в Твиттер в правой колонке, он сам автоматом там что-то подключает. Как вы можете вообще оценить, что вот это число, именно вот оно более-менее правильное, оно же может там вообще на порядке отличаться, нет? Не очень понял, то есть почему бы нет? Каждый раз, когда ты в клиенте или на сайте нажимаешь лайк или просто крутишь ленту, да, и просмотрел твиты до какого-то момента, это все и ленты, которые можно послать на сервер, да, и залогировать там, потом собрать в агрегатор логов и просто там делать MapReduce уже любые, суммировать, джойнить по какому-то там отдельно под каждому твиту. А вы используете реально MapReduce, потому что, насколько я знаю, вот в Гугле его уже давно ни для чего не используют. Как бы сказать, концепция все равно используется. Ну да, это же концепция, понимаешь, это не конкретный фреймворк MapReduce, а просто паттерн, так сказать. Я думаю, он активно используется. Да, согласен, если вы посмотрите на нашу консольную репозиторию, то у нас есть Scalding, это как раз фреймворк, который позволяет описать любой джок на скале, битч про скинжоп на скале, он транслируется в план для MapReduce Cluster. И еще есть Summoning Bird и Каждый Царь называется. Это вот как раз для... это еще сверху Scalding'а, такие библиотеки, которые позволяют тебе делать такой вот log aggregation. Для числовых данных, которые тебе нужно посчитать, какие-нибудь просмотры или ретвиты, вот Summoning Bird, которая суммирует эти самые числа и, наверное, даже агрегирует отдельно по твит-айдее. Погоди, стой, можно я вернусь к своему вопросу? Ну то есть, допустим, у меня есть поток твитов, да, и у меня есть куча агрегаторов, которые их скачивают. Вы вот это каждое скачивание засчитываете, что вот если мы этот твит отдали в данный запрос, в смысле, в ответ по данному запросу, то мы прибавляем в этот твит плюс еничка, что его посмотрели. Я прав? Я думаю, грубо говоря, да. Я, честно говоря, не знаю, как это реально сделано, но предположу бы, что так. Большой поток данных, конечно, идет. Ну понятно. То есть как бы то, что на самом деле у меня есть свой агрегатор, который там считает, не знаю, там, дни рождения людей, и с помощью, не знаю, просто по слову яблока из твиттера как-то это делает, вы теперь мне кучу плюс единичек добавите во все твиты, которые они нашлись, хотя на самом деле они нигде не использовались, никем не виделись и так далее. То есть мы работали с твиттером, мы выкачивали огромный поток данных, у нас там фархоз был в свое время, и я предполагаю, что везде были расставлены плюс единички, хотя большую часть этих твитов никто никогда не видел. Ну знаешь, Ваня, думаю, что, наверное, все-таки там как-то… Валера пришел. Валера пришел, да. Всем привет. Я думаю, что, наверное, все-таки у твиттера есть официальные клиенты, и, наверное, не зря официальные, скорее всего, официальные клиенты немножко хинтят, что вот этот твит его реально на экране показали. Это всегда интересно, что происходит с неофициальными клиентами, как твиттер, который твитбот, по-моему, так и называется. Да, есть неофициальные клиенты, есть поисковые всякие штуки, да есть куча всего. Да, конечно, API-открытки, просто любой программист может написать приложение, и оно может дергать твиттер API, и, наверное, в том логовенте, который посылается на сервер этот, как называется, API-кей, да, он указывается, наверное, и можно по нему тоже отфильтровывать и смотреть, ага, это официальные клиенты, неофициальные клиенты. Ну понятно, да, то есть если считать с официальных, то мы получим числа меньшие, но более-менее надежные, потому что официальные клиенты, мы знаем, как действуют, и мы знаем, что они отобразили, что не отобразили. Да, так понятно. Ну я думаю, там статистика тоже, понимаешь, такая примерная, так же, как у нас по слушателям, мы не можем вот точно сказать, что нас там 153 человека послушало этот выпуск в какое-то время, вот, так что примерно такая же ситуация, я думаю. Ну мы стараемся поточнее считать, потому что это же все-таки ключевая такая бизнес-метрика, да, то есть мы не можем рекомендателей больше просить денег с них, потому что, можно сказать, что вот, ваш кит посмотрел столько людей, и это очень, они нас спросят за это. Кстати, я хочу сказать молодцы вашим, как это, людям, которые отвечают за UX, я все больше начинаю читать рекламы в вашем твиттеровском официальном клиенте на телефон, то есть раньше эти рекламные блоки были совершенно выделяющимися, и можно было всегда спокойно глазами промаркнуть, даже не заметить, что там было написано, а сейчас все ваши рекламы очень сильно похожи на твиты обычных людей, и очень тяжело их пропускать, в конце только замечаешь, что это реклама была, черт.",
    "result": {
      "query": "поиск по ключевым словам и хэштегам в Twitter"
    }
  }
]