[
  {
    "segment_id": "acda2144-6c40-460e-a091-85fb4ae8bf61",
    "episode_id": "efc558ba-27d6-48c9-b919-1159bffa6f08",
    "episode_number": 174,
    "segment_number": 2,
    "text": "Добрый вечер. И у нас сегодня еще Алексей, который у нас уже практически ведущий. Я даже не знаю, наверное, тут есть карточка про расспрашивание гостей. У меня есть вопросы. Один из вопросов, это то, что, казалось бы, не совсем новая тема в мире блокчейнов, это всего. Даже не знаю, как бы к этому лучше подвести. Ну то есть в том году мы рассказывали про блокчейн в целом, то есть я не хочу это трогать, если вы хотите, если вы вообще ничего не знаете про это, то, наверное, он немножко в более старой выпуске. Вот в этом году люди начали пытаться делать блокчейн более скейлабл. Одна из вещей, вроде как про него сейчас много говорят, много пытаются делать, на самом деле начали делать раньше, чем в этом году, но в этом году про него начали много говорить. Это всякие Lightning Network, какие-то всякие Raiden и вот это все. Вот мне интересно послушать мысли гостей по этому поводу. Куда это, как это работает. Я могу начать, наверное. Поскольку, да, представлюсь гостем, если не очевидно по голосу. Меня зовут Сергей Тихомиров, я изучаю всякие блокчейны в Люксембурге, университет Люксембург, делаю PhD и в выпуске номер 1, 2, 3 можно послушать меня и Йона про это. А что касается Lightning и прочих таких вещей, я как раз на протяжении вот последнего, наверное, месяца-двух разбирался с этой темой и наконец разобрался, теперь понимаю, что это собственно из себя представляет. Тут идея-то в чем? Ну вообще вначале была идея именно Lightning Network, а потом ее только стали переносить на другие блокчейны. Но если взять именно Lightning, такая, если очень high-level подойти к этому, то идея такая, что вот у нас есть транзакции в биткоине и поскольку у нас ограничено место в блоке и ограничено количество блоков в единицу времени, то мы не можем все транзакции запихнуть в блокчейн. И чтобы побольше транзакций как-то обрабатывать, не запихивая их в блокчейн непосредственно одну за одной, люди придумали концепцию платежных каналов, когда люди обмениваются подписанными или какими-то подписанными заготовками транзакций между собой, и в любой момент эта подписанная транзакция может быть отправлена в сеть, подтвердена в блоке, и тогда, значит, деньги будут распределены так, как договорились стороны. Но пока стороны еще продолжают свое экономическое взаимодействие, скажем так, то есть какая-то одна сторона потребляет какой-то ресурс и за него платит, а вторая сторона, значит, его предоставляет, получает деньги. Они могут каждый, скажем так, квант этого взаимодействия не заверять на блокчейне, а обмениваться этими полуподписанными транзакциями и только потом в конце заверить финальный баланс. Ну, это если говорить очень на высоком уровне. А если углубляться в эту тему, то обнаруживается, что там интересные возникают проблемы, как то, если вот Алиса и Боб организовали такой канал, они обновляют свои балансы. Как сделать так, чтобы стороны не могли подтвердить в блокчейне более старый стейт? То есть если баланс обновлен таким образом, что Алиса заплатила Бобу какое-то количество денег, то Алисе как бы выгодно взять старую заготовку транзакции, подписанную Бобом, и ее отправить в блокчейн. Тогда она как бы обманывает Боба. Они думают, что они обновили балансы, на самом деле Алиса достает из-за кромов старый стейт и его подтверждает на блокчейне. И, собственно, лайтнинг — это способ, как нам таким хитрым образом совместить транзакции, чтобы если Алиса это сделает, Боб имел возможность ее наказать, забрав все деньги из канала. И на оборот. То есть это достигается с помощью выставления таймлоков на unspent transactional quota. То есть в биткоине можно условия записывать внутри транзакции по поводу того, кто может потратить эти деньги и при каких условиях. И там, в том числе, можно ставить условия на время. То есть эти биткоины могут быть потрачены не раньше, чем блок номер такой-то. Или не раньше, чем через 100 блоков после такой транзакции. Если эти все штуки скомбинировать правильным образом, получается, что читить невыгодно. Если ты пытаешься считить, то твой партнер сможет забрать все деньги. Вот, собственно, и все. Могу рассказать еще более подробно. Или есть еще вопросы? Давайте. Какой-нибудь такой пример. Не знаю. То есть все проповедуют, что это такая штука, которая придет и избавит нас от проблем со скайлабилити блокчейна, потому что мы можем транзакции делать вне блокчейна. Мне интересно, на самом деле, какой-то такой пример посмотреть, где бы это было, не знаю, ну, жизненная транзакция, которую мы можем встретить, не знаю, просто в кафешке, где-то еще. Мы же не держим просто так без причины каналы открытыми. То есть почему у нас платежный канал, почему он у нас должен быть открытым, почему у нас там будет много транзакций, а не одна? Я могу объяснить. В этой архитектуре предполагается, что, ну, скажем так, да, собственно, то, что я писал в предыдущей реплике, это простой канал между двумя участниками. Ну, понятно, что если мы хотим это скейлить на весь мир, мы не можем между любыми двумя участниками открывать свой канал, потому что весь канал, весь жизненный цикл канала включает в себя как минимум две реальных транзакции на блокчейн. Это открытие канала и закрытие канала. Причем, если закрытие канала происходит не кооперативно, а в результате попытки чита ее пресечения, тогда даже три транзакции попадают на блокчейн. То есть в любом случае нам нужно как-то делать не просто набор каналов, а их соединять в сеть. И, собственно, почему это называется Lightning Network? Потому что предполагается, что будут такие сущности, некие хабы, которые будут предоставлять следующую услугу. Они будут перенаправлять... Ну, условно говоря, если я хочу с Бобом какое-то взаимодействие произвести, при этом у меня с Бобом не открытого канала, но у нас обоих есть открытый канал из Чарли, а Чарли от некоторых провайдеров такой услуги. И я свои эти транзакции подписанные перенаправляю через Чарли, и там отдельно есть механизм, который обеспечивает целостность конструкции. То есть Чарли не может убежать с деньгами, с одной стороны. С другой стороны, гарантируется, что либо деньги дойдут по назначению, там все получат то, что они ожидают, либо наоборот ничего не случится и атомарность не будет нарушена таким образом. То есть предполагается, что это будет что-то вроде банков, но с одним большим принципиальным различием, что провайдеры этих вот услуг Lightning Network принципиально не могут сбежать с деньгами, потому что, собственно, все, из чего состоит Lightning Network, это абсолютно валидная биткоин-транзакция. И любая из этих транзакций, будучи помещенной на блокчейн, подтверждается и распределяет деньги так, как договорились участники. И когда транзакция, еще не подтвержденная, проходит через провайдера, он ничего не может с ней сделать, потому что она подписана ключом от правителя и предназначена получателю. Все, что может сделать этот хаб, это либо ее перенаправить по нужному адресу, либо по какой-то причине не перенаправить, то есть отказаться предоставлять эту услугу. Ну тогда предполагается, что будет реализован некий механизм автоматического раутинга, то есть автоматически находить наиболее оптимальный маршрут по сети, и можно будет перенаправить этот трафик по аналогии с тем, как перенаправляются пакеты интернет-трафика по наиболее оптимальному маршруту. Да, и можно, собственно, реализовать, собственно, почему эти хабы будут возникать, как предполагается, опять-таки, что экономическая модель такая, что хабы будут брать небольшую комиссию за свои услуги. Но эта комиссия, естественным образом, будет гораздо ниже, чем комиссия за настоящие биткоин-транзакции, потому что настоящие биткоин-транзакции, весь мир сейчас борется за ограниченный ресурс. Там каждые 10 минут производится новый блок, в каждом блоке, грубо, 2000 транзакций, и вот это то, что получает весь мир для всех, значит, всех бирж, всех обменников и так далее.",
    "result": {
      "query": "Lightning Network масштабируемость блокчейна"
    }
  }
]