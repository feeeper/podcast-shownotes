[
  {
    "segment_id": "477c6de5-f846-4c94-ac38-1ad041ab1c2e",
    "episode_id": "ba752bfe-d4e4-4a5f-8d71-a7be088c076f",
    "episode_number": 167,
    "segment_number": 12,
    "text": "Согласен. Так что не зря мы её отложили. Ну давай я расскажу тему вкратце. То есть тема в том, что я увидел эту тему в Твиттере голосовалкой. Какая сейчас самая распространённая операционная система в мире. И, соответственно, варианты – это Linux, Windows и Миникс. Я сразу вспомнил книжку Тонбома, в которой он рассказывает про Миникс. Я сразу вспомнил книжку Линуса Торвальдса, Just for Fun, в которой он тоже рассказывает про Миникс. И в обоих книжках какое-то было противостояние Миникса и Линукса. И я не помню, в какой из них кто-то смеялся, что давайте посмотрим через сколько-то лет. Ну блин, выбор, конечно, очевидный. Конечно же, Линукс везде побеждает. Оказалось, что нет. Извини, я просто хочу делать вставку. Противостояние наверняка на тему монолитных ядер против модульных ядер. Потому что позиция Тонбома, что только… Как это правильно называется? Микроядерная. Микроядерная архитектура, да. А позиция Торвальдса, что… Монолитные. Это хорошо в теории, на бумаге у теоретиков, а в реальности попробуй напиши такое ядро, чтобы оно было ещё эффективным, поэтому только монолитные. Ну в смысле такие, с модулями подгружаемыми, но как в Линуксе. Да. И оказалось, вышла статья, что на самом деле мы все ошибаемся, и на самом деле самое распространённое в мире ядро – это ядро Миникс, которое сейчас по умолчанию установлено на всех интеловских процессорах, которое работает на уровне, недоступном для обычных пользователей, то есть на самом минус третьем, что ли, я не помню какой там уровень. И оно включает в себя достаточно много всего, включая чуть ли не веб-сервис, который может обслуживать какие-то запросы. И интел его разместил для своего собственного удобства, для того, чтобы выполнять какие-то свои задачи, и более того, он не только разместил, но даже никому не сообщил об этом, и вот буквально недавно это стало известно. Я, кстати, не понял, из-за чего это стало известно вообще? Кто это разгласил? Кто-то из реверсеров надампил, по-моему, так. Надампил код в процессоре? Ну да. Понял. И, соответственно, продолжение, которое было, я его не очень читал, и к этому Мбаум ответил что-то вроде «ай-яй-яй, что ж вы мне не сказали?» Ну он не так, он же серьезный взрослый дядька. Который читает лекции. Да, да, да. Ну у него ответ такой, что «ребят, ну вы мне, помните, пару лет назад писали, с вопросами про Миникс, я вам там все ответил, а потом еще через пару месяцев вы просили сделать какие-то патчи, которые еще меньше уменьшают футпринт операционной системы, и в девчиков напихать, и я вам там все сделал бесплатно, и так далее. И потом вы куда-то пропали на nLED, и я внезапно узнаю из новостей, что вот та работа, которую я делал, она была для ваших процессоров. Ну как бы понятно, что вы мне никаких денег не должны, и лицензия Миникс позволяет ее так использовать, и никто не просит от вас писать там большими буквами, что в ядрах Интела используется Миникс, и так далее. Но как-то некрасиво. Ну могли хоть там просто сказать, что вы знаете, а мы тут вашу операционную систему используем. Я знаю, зачем это ему нужно. Ему это нужно было, чтобы поставить жирную точку в его споре с Линусом. Ну вот представь, у тебя есть какие-то проекты на GitHub, и тебя просят что-то доделать, а потом ты узнаешь, что это используется во всех Android-телефонах. Ну, наверное, неприятно, правда? Не, я его вполне понимаю. Ну просто некрасиво. То есть это немножко не принято. То есть в нашем мире современных технологий ты делаешь, когда подобное решение с безлицензией, ты все-таки ожидаешь, что, не знаю, тебе хотя бы расскажут что-то. Это же не особенно секретно, люди раскопали это сами. То есть разницы нет, все равно стало известно. Я еще слово, как-то это не хороший тон, ну короче, так делать не принято, это большой-большой минус в корму Интелу. И в ответном письме он, кстати, заодно рассказывает, в поясняющем письме, он рассказывает, что это заодно ставит точку между спором JPL и BSD лицензии. То есть ему всегда не нравилась, это наоборот, JPL лицензия, и он видел много примеров, когда компании не используют продукты, которые на JPL, только потому что лицензия не очень дружелюбная. И он именно из этого выбрал BSD, и вот сейчас он понимает, что да, это был совершенно правильный выбор, и еще раз топит за BSD лицензию. Так что знайте, с сегодняшнего дня, что самая распространенная операционная система это Миникс. Микроядерная архитектура, и кто бы вам что ни говорил, никого не слушайте. Чего-то так захотелось Миникс скомпилить, какую-нибудь книжку по нему прочитать. Да-да, почитай, есть же книжка там обоим, там все про Миникс как раз, там на основе кода Миникс. Да-да, я начинал даже читать, но потом понял, что это про какую-то странную, несуществующую операционную систему. Теперь знаешь, что это самая распространенная. Ну да, теперь там продажи просто слетят. Кстати, да, я думаю, что так и есть. Ну и новое издание надо выпустить, там на первой странице будет прямо написано, что это самая популярная операционная система. Ну да, и про FDF вот эти дополнительные поставлены, чтобы у тебя меньше места занимало. И про преимущество BSD лицензии. Точно, точно, точно. И про Линуса, как он не прав в введении. Ну что, я думаю, мы это обсудили. Мне только стало интересно, Postgres работает на Миникс или нет. Ну он на всяких странных операционных системах работает, а вот про Миникс я совсем не уверен. Я прям уверен, что работает. Миникс это хорошая операционная система, я доверяю этому БАУ. А ты, кажется, Ваня упоминал про ЛогХау? Да, да, ЛогХаус. Расскажи подробнее. ЛогХаус это подделка компании Flandre, которая как раз была на Highlord. И я очень надеюсь, что мы приведем оттуда гостя. Я уже договорился, мы просто пока еще не согласовали дату. Для чего она нужна? Она нужна для того, что мы уже сегодня обсуждали, что эластик не выдерживает больших объемов, и при каких-то объемах начинает разваливаться. Именно с этим столкнулись ребята из Flandre. Насколько я понимаю, компания Flandre занимается подготовкой, с одной стороны, готовых продуктов, для того, чтобы кастомеры устанавливали, с другой стороны, какой-то саппорт, каких-то систем. Ну вот пусть они придут, сами расскажут. Но идея в том, что у них есть несколько кластеров, где эластик не справлялся с логами, которые из кубернетов кластера ведутся. И мы уже обсуждали в чате во внутреннем, что Валер как раз говорил, что вот только он хотел пожаловаться, что нет систем, которые нормальное логирование делают, и тут появляется локхаус. Мне кажется, мы в прошлый раз это обсуждали в теме слушателей в прошлом выпуске. Может быть, да. И локхаус – это система, которая основана, как вы уже догадались по названию, на кликхаусе от Яндекса. Он его использует в качестве базы данных, и по их заверениям это дало огромный выигрыш производительности. То есть у них там была система, по-моему, из пяти инстанцов, которые держали эластик, и они были перегружены, разваливались, и вот это всё. Но когда они всё переставили на кликхаус, на одной ноде, они занимают там 1-2 процессора, и всё. То есть теоретически кликхаус поддержит кластеризацию, ты можешь несколько кликхаусов поставить вместе рядышком. И получается, что если ты вместо пяти эластиков поставил один кликхаус, который загружен только частично, а ты можешь этих кликхаусов поставить точно так же пяток, у тебя появляется такой запас производительности, о котором ты даже не смел и мечтать раньше. У них есть до сих пор ещё много проблем, в частности, прямо сейчас у них по умолчанию локхаус запускается на одном из инстанцов, в смысле, в поде кубернетоса, и поэтому падение рестарт-пода автоматически удалит все эти логи и стейты, поэтому ты должен как-то бороться, чтобы куда-то выносить это всё. Но они говорят, что мы сейчас прямо запилили штуку, которая будет просто работать из коробки без каких-либо настроек. Прямо сейчас у них уже есть готовый бэклог, что они собираются и как развивать. В частности, съёмщик логов они прямо сейчас запускают в DiamondSet в кубернетосе Flow-nd, который вроде как достаточно производительный для того, чтобы все текущие логи снимать. Но они хотят ещё увеличить эту производительность, плюс добавить туда дополнительную функциональность, поэтому в качестве первого пункта в их бэклоге присутствует переписывание вот этого куска системы, который работает на каждом инстансе и который снимает логи со всех подов на свой собственный написанный на Go, и который там добавит дополнительной функциональности. Мы там обсуждали у них прям громадные планы, что и как они хотят делать. Я прямо сейчас это не буду озвучивать, мы всё равно вполне потом зацепим. Прямо сейчас этот проект находится в состоянии альфа, и они говорят, что, ребят, вы можете попробовать, но в продакшене мы вам не советуем, но мы сами уже используем её в продакшене в течение двух месяцев, и оно вроде как работает. Но в целом, как бы, связка выглядит очень многообещающе, и я надеюсь, что у них проект разовьётся до состояния, которое позволит его использовать везде, где надо. Как-то так. Можно в топик? Давай. Зашёл на сайт Миниксов. Во-первых, я узнал, что он работает на одноплатных компьютеры Beaglebone, поэтому как бы очень удобно, не нужно ничего сносить, на одноплатнике взял, запустил. Во-вторых, я узнал, что на нём ставятся тысячи пакетов NetBSD, включая Postgres, но почему-то версии 8.4, судя по тому, что написано на сайте. Вот, может быть, они просто когда-то давно получили список пакетов, и сейчас он уже более свежий. Да, и кедрово. Миникс состоит из 12700 строк кода, т.е. вполне влезает в голову одного человека, всё остальное работает в юзерспейсе. Вот такие интересные факты про Миниксов. Ты прям еле уже зажёгся. Ну, я так же быстро потухну, но интересно же. Согласен. Ну что, настаёт тема, которая была у нас с душком. Правда, Валера? С душком. Да, она уже давненько с душком, согласен. А есть продукты, которые вот если их немного, как это сказать, дать им немножко подгнить, они только лучше становятся. Конечно есть. Так это же главная мантра Саши, как сказал. Семилетняя мантра. Семилетняя выдержка. А, вино, кстати, да. Вино это всё-таки напиток. А есть же ещё и, например, вот едят всякие шведы и норвеги, едят рыбу, которая полежала, китайцы едят яйца, которые полежали закопанными в землю. Клэм чай ещё ест. Сыры под сплесенью едят люди. Чай ферментируют. Да, чай ферментируют. Ну, тоже напиток, на самом деле. Наши слушатели едят темы, которые мы выдерживали для них неделями. Справедливости ради, у сыров с плесенью, насколько я знаю, тоже есть сыроугодность, и он весьма ограничен. То есть то, что там плесень, значит, что он долго выдержался. Вы тему-то будете обсуждать уже, нет? Я-то её не читала. Подожди, как ты не читала? Подожди, какого хрена? Я думала, ты почитал, Валера. Я тебя ждал, в смысле, я готов был поддержать тебе тему. Я была для тебя готова почитать. Не заставляйте слушателей плакать, а давайте уже расскажите вкратце хотя бы. Ну ладно, окей, совсем вкратце. Там история такая, что господа хорошие из Yahoo выпустили нам какую-то систему чего-то. Называется Веспа. Называется Веспа, да. Я до конца даже не понял, эта система, она типа как поисковая? Валера, ну... Что с чем вообще? Я честно пытался это посмотреть, я не пытался её ставить, я пытался её посмотреть, я не понял, что это и зачем это нужно. Ну чего тут непонятно? Big Data Processing and Serving Engine. Ну что, вопрос? Ну то есть на самом деле я поняла, что это похожая штука, то есть это вот про Data Platform, о которой я говорила ранее в подкасте. Вот они, видимо, выпускают решение open-source для вот этих проблем, но без использования каких-то других тулов. Вот они прям всё сами написали. Ваня, ты хотел что-то спросить? Я наблюдаю странный глюк в трело прямо сейчас, у меня эта тема одновременно переехала... Скриншот сделай. Да, точно, точно, точно, сейчас сделаю. Продолжайте, пожалуйста. То есть система с душком себя исчерпала, я правильно всё понимаю? Мы слишком долго её выдерживали. А что-то она испортилась. Какая негодная тема. Она действительно пришла в негодность, поэтому я предлагаю Data Platform этой темой чаще почищать. Такая у тебя постоянность за то, чтобы почистить бэклог, а вы такие нет, нет, потом, короче, давайте ещё полежат. Ну вот мы наблюдали, как тема себя исчерпала очень быстро. Она же в холодильнике была полгода, что с ней будет? Действительно. Нет, если серьёзно, если кто-нибудь слушался или понял, что такое Веспа и как она позволяет процессить дату и сервить энжин, то, пожалуйста, расскажите нам. А мы приходим к нашему старому знакомому из блога The Morning Paper и он снова нам принёс прекрасную тему. Это правда, Ваня? Да, да, да, замечательная тема, которая тоже настаивалась, но она не потеряла от этого в своей важности. Это, я сейчас попытаюсь перевести вкратце, подсчётные фильтры общего назначения. Наверное, так. General Purpose Counting Filter. Идея в чём? Есть... статья очень интересно построена. То есть, статья построена от простого к сложному. И не приходится сразу понимать сложную конструкцию финального решения, которое подготовили авторы, а мы к необходимости этого решения постепенно приходим, всё усложняя концепцию. Это прям очень удобно сделано, я очень сильно благодарен авторам за такой подход. Авторы начинают с объяснения Bloom Filter, что Bloom Filter нужен для того, чтобы понять принадлежит какой-то элемент множеству или нет. И он не отвечает на вопрос «да» или «нет», он отвечает на этот вопрос только ответами «либо нет, либо возможно». То есть, когда он ответил «нет», это однозначно элемент не входит в множество. А «возможно» это значит, что он может быть входит, может быть не входит, мы точно не уверены. И этот Bloom Filter очень бывает полезен, то есть казалось бы, что он не очень нужен, потому что он не отвечает однозначно «да». Но мы зато можем точно однозначно получить ответ «нет», это бывает очень полезно. Но у этих Bloom Filter есть четыре недостатка. Это у стандартных Bloom Filters невозможно удалить объекты, плохо скалируется, если объём элементов превышает рам, невозможно динамически изменять размер, невозможно определить количество вхождений каждого элемента. Про количество отдельная основка, там количество очень бывает важно в некоторых случаях, и финальное решение как раз поддерживает количество вхождения каждого элемента. Следующий тип структуры, который, соответственно, по усложнению, который подходит здесь в статье, это... вот здесь вообще переводить все эти названия довольно сложно. Counting Quotient Filter. Подсчётный количественный фильтр, я так это перевожу. Это развитие Bloom Filter, то есть недостатки Bloom Filter все уходят, при этом он хорошо работает с точки зрения соотношения времени отклика и объёма памяти, он работает несколько раз быстрее Bloom Filter и поддерживает количество объектов. Ой, это финальная структура, прошу прощения. Чтобы прийти к этому финальному, то есть мы убираем все минусы Bloom Filter, получаем дополнительные достоинства и быстродействие, необходимо рассмотреть несколько других фильтров, и вот как раз авторы их по очереди рассказывают. То есть он сперва рассказывает, что такое долевой фильтр, рассказывает, как можно его построить, потом долевой фильтр он достраивает до... долевой фильтр с возможностью ранжирования и поддержки рейнджей, и потом от этого уже фильтра он переходит к финальному решению, который, соответственно, очень хорош. Статья очень хорошая с точки зрения объяснения архитектуры, то есть мы там спускаемся вплоть до битиков, то есть вот этот битик лежит здесь, и это нам даёт такие преимущества. То есть фильтры, которые промежуточны между Bloom Filter и конечным решением, они, скажем, среднее количество бит метаданных на один элемент, оно равняется 3.25. Это, казалось бы, ненужная вещь, а с другой стороны, когда у вас этих элементов миллионы, каждая одна десятая в этом числе имеет уже большое значение, ладно миллионы, а то ещё и больше. И, соответственно, авторы этих фильтров пытаются максимально сократить объём метаданных, которые необходимы для поддержания структуры, а с другой стороны не потерять в функциональности и в скорости обработки. Я очень рекомендую статью, мне реально очень понравилась статья, особенно для тех, кто пытается применять, скажем, Bloom Фильтры, или сталкивается с необходимостью определения, входит ли элемент в это множество или не входит, или в каком количестве входит. Статья хорошая и очень легко описана, прямо вот читается, ну ура. Я не хочу опускаться в все подробности, потому что смысла нет, наверное, в рамках подкаста. Ссылка будет в шуму-то. Чё, никто кроме меня не читал, да? Никому не интересно вот это вот, интересные статьи почитать? Меня вообще слышно? А, сори, я был замьючен, я её прочитал месяца два назад, что ли. Спасибо, валяля. Да, я, к сожалению, уже не хранил, не помню, что она правда нетривиальная. Ну, правда интересная статья. То есть как бы для меня было несколько откровений, вида, как можно... Ну то есть у тебя есть какой-то элемент, да, ты берёшь от него какой-нибудь ша и пытаешься сделать структуру данных, которая может ответить одновременно на несколько вопросов. Ну то есть все понимают, как устроены хэши, скажем, все понимают, как устроено какое-нибудь, я не знаю, ну там, управление памяти в той же библиотеке, типа Gleepsy, да, как мы работаем с этими хэшами. Но вот одновременно сделать её и быстрой, и выполняющей много функциональностей, это довольно нетривиальная штука. И именно такие вопросы очень сильно любят задавать на всяких собеседованиях, я не знаю, в гуглах, в фейсбуках. А вот у вас есть 5 битов, а что вы можете сделать с этими 5 битами? И вот подобные пейперы очень сильно могут помочь. Так что прям советую всем почитать. А что ещё мы советуем? Это поиграть? Это поиграть. Хватит работать. Когда нечего читать. Да, GamesInf, в который я накидал много тем, и Валера, я уверен, присоединится.",
    "result": {
      "query": "most popular operating system"
    }
  }
]