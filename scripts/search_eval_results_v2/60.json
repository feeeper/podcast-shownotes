[
  {
    "segment_id": "bbeaaa8b-c465-4bde-9926-d58a7839bd33",
    "episode_id": "e7fc976d-9a0a-4d89-898a-3f216ce2d714",
    "episode_number": 60,
    "segment_number": 6,
    "text": "Смотри, у тебя есть здоровый кластер. Извини, я просто перебью. Но сами флеймграфы он строит скриптом, да? Нет. Просто мы очень долго искали библиотеку для флеймграфов, а оказалось, что в JVM есть не все. Флеймграфов нет. Ну, я скину доклад, эту ссылку на доклад. Может быть, даже есть видео, не только презентации. Собственно, в чем дело? У нас есть большой Hadoop кластер, и мы хотим его профайлить. Как это сделать? И при этом у тебя же получается распределенные джобы. Это довольно сложная задача. Что человек написал агенту. И в этом агенте он делает следующее. Он раз в какой-то периодичности, например, каждые 100 миллисекунд, либо каждые 10 миллисекунд, он снимает стэктрейсы со всех потоков. Ну, это, конечно, остается вопросом, насколько это влияет на производительность. Но не суть. Он получает эти данные и записывает эти данные в InfluxDB. И после этого из InfluxDB он может оттуда строить данные. По сути, это хорошо база DAO приспособлена для временных рядов. И после этого строятся графики, вот эти флеймграфы. И на них хорошо видно, где у тебя что-то тормозит. Вот, скажем, краткий пересказ этого доклада. Ну, подход интересный, но мы все понимаем, какой у него недостаток. Ну, да. Расскажите мне, какой у него недостаток. Мне интересно ваше мнение. Я имел в виду то, что ты можешь проскочить через вызовы, или, например, ты не поймаешь точно время, в которое ты вышел. Например, ты ловишь стэктрейсы с этим шагом в 10 миллисекунд. Ты говоришь «ага, я в методе А». Потом 10 миллисекунд проходит, а ты уже из него вышел. И, может быть, в один вошел, и с него снова вышел, и так далее. Тут же понимаешь, какая проблема решается. То есть, в том плане, что ты не получишь трейса. Вот этот недостаток ты видишь. Ну, флеймграф будет какой-то странный. Ты будешь на него смотреть и думать, что за фигня. Я смотрю в код, у меня там 15 вызовов. Я смотрю во флеймграф, а этих вызовов вообще нет. Может, там код неправильный. Смотри, какая задача профайлинга. Были конкретно джобы, которые тормозили. И там тормозили, скажем, 8 секунд, что-то выполняется. И эти 8 секунд ты действительно увидишь на флеймграфе. Быстрые методы, тебе их не интересно видеть. Это такая натуральная фильтрация. Я здесь вижу другую проблему, которую тоже все знают. Снятие стэктрейса не может быть сделано каждые 10 миллисекунд. На самом деле это будут другие расстояния. И эти расстояния обусловлены нахождением сейф-пойнтов. Будет у тебя сейф-пойнт без. Можно делать на этом выводы какие-то, можно не делать выводы. Но в принципе ты не получишь очень четкой картинки, что же у тебя на самом деле тормозит. Или можешь не получить. Когда ты смотришь на систему, ты изменяешь систему? Нет, там другое дело. Я согласен насчет сейф-пойнтов. Я хочу вернуться к вызову. Представь себе, что у тебя цикл из 10 тысяч операций, и в нем маленький-маленький метод. И он в этих 10 тысяч операциях очень много времени занимает, но ты его на флеймграфе можешь не увидеть. Такой кейс. Мы аналогичную проблему решали намного проще. У нее тоже есть недостатки. Мы просто делали... Поскольку это скала, там можно обернуть все в лямбдочку. И мы писали там trace, потом первым аргументом передавали какое-то его название, потом твой блок кода. И в логах у нас писалось прямо, мы вошли в метод такой-то, мы вышли из метода такого-то. Недостаток тоже есть. Тебе нужно руками это все распихать по коду, и ты не получаешь из коробки такого, что это работает для всех-всех-всех методов. Но для нас это неплохо работает. Мы знаем, что в этом месте может тормозить. Давайте обернем это в trace. Да, это тоже обычный подход. Это мануальный trace. Можно сделать в профайлере trace с помощью инструментации. Можно снимать эти stack traces. Вот и все. Подожди, Саш, я не очень понял. У тебя есть 10 тысяч вызовов маленькой функции, но у тебя вот этот цикл, он все равно будет на флеймграфе показываться, что в нем мы проходим очень много времени. Нет, у тебя вообще не будет на флеймграфе в том варианте, который Света объяснила. Потому что у тебя в trace не попадает цикл в stack trace. У тебя попадает метод, в котором есть цикл. То есть метод попадет, тебе больше ничего не надо. Ты дальше уже копаешь нужным дальше. Да, он туда попадет в 10% случаев. Почему? Потому что у тебя этот метод выполняется недолго, а stack trace ты снимаешь с шагом 10 миллисекунд. Более того, еще с поправкой на сейфпойнта. Тут можно спекулировать на тему, что делает вообще этот метод. В нем только один этот цикл или в нем 20 циклов? И какой из них тормозит? На самом деле, то, что там миллион раз вызывается маленький быстрый метод, он скорее всего будет на флеймграфе, если он тормозит. То есть все тормозящие будут там, и это плюс этого метода. Именно сбора равномерного. Пусть он не все туда захватит, но после 10 запусков у него будет достаточная информация, чтобы показать тебе все. Спорный момент. Предлагаю двигаться дальше. Я на этом спорном моменте хотел бы раскланяться, на самом деле, с участниками. Спасибо, что позвали. Был рад поделиться информацией. Надеюсь, помидорами не будете кидать потом. Заходи еще. Все, давайте. Пока. Мне лично было очень интересно узнать про горячее обновление кода в Java. Да, прям хорошо. Спасибо, очень интересно было. Пока-пока. Счастливо. Приходи еще. А дальше опять я. Да, дальше ты. Ну, в смысле, не опять, а... Снова. Да. Вот Света была с конференциями, а я с вакансиями. Я расскажу, какие вакансии сейчас есть интересные, связанные с FB, разумеется, как у нас здесь принято. Первая вакансия от компании Nexters. Называется серверный разработчик Scala. Все выглядит очень неинтерпризно, очень функционально. И вот это Agile, Cassandra, RabbitMQ. Пахивстики, в общем. Да. Это Scala, и здесь даже указана вилка. Но не вилка, а как бы нижняя граница. От 120 тысяч рублей в Москве. Офис. Ну и там обсуждается индивидуально с каждым кандидатом. Вот я могу сказать, что знаю нескольких людей из Nexters, и о компании я слышал только хорошее. Следующая вакансия прилетела в рассылку Erlang Russian. Это серверный программист Erlang в Москве. Ну и там можно почитать обсуждения. Я, честно говоря, не знаю, что за контора, и стоило ли туда идти. Кто-нибудь изучал вопрос? Нет? Неизвестное мне. Еще одна вакансия интересная, как мне показалось. Это Санкт-Петербург, и вакансия связана с информационной безопасностью. При том, там не нужно быть хардкорным реверсером, ковырять вирусы или такого рода. Требования довольно-таки незавышные. Назовем это так. То есть, тут знания Python, знания JavaScript. И я так понимаю, это в первую очередь информационная безопасность, связанная с вебом. Компания Digital Security. Так что, если у нас есть слушатели, которые только начинают карьеру, и хотят ее сделать в сфере ИБ, то, мне кажется, вариант интересный. Буквально сегодня на Хабаре нашел статью про то, как за CRD-эксплойт в iOS 9 назначено багбаунти в миллион долларов. При этом бюджет 3 миллиона долларов США. То есть, там до 3-х человек. Занимается этим компания... Где-то тое название. Не могу найти. Ну, короче, это какая-то отдельная компания. Не Apple, ничего такого. А, Zerodium. То есть, они прямо специализируются на покупке CRD-эксплойтов, потом их перепродают, я так понимаю, спецслужбам или еще кому-то. Но смысл в том, что eBay — это очень прибыльная тема. Так что вот. Слушай, мы все не там работаем, похоже. А я уже много раз говорю, надо заниматься багбаунти, и ты за полчаса будешь срубать миллионы. Реально миллионы. В прямом смысле. Ну так. Кстати, по-моему, можно подхватить связанную тему, где-то тут она была. На этой неделе нашли баг в iOS 9, который позволяет разблокировать устройство, получить доступ к фоточкам без ввода пароля. Вот-вот. То есть, не разблокировать, а именно к части информации. К контактам, по-моему, и к фоткам. Мне это напомнило вот ту гифку про то, как Windows 98, открывая справку, в справке, там, не знаю, какую-то еще справку, в ней проводник, который крашится, и у тебя запускается Explorer, который тебе доступ дает ко всему. Вот из такого же рода. То есть ты запускаешь, вводишь три символа кода, потом запускаешь серию. Сначала неправильно запускаешь несколько раз, потом только три символа, потом серия одновременно с нажатием, и там что-то сказать, и запустить. Да-да, там очень... Я не знаю, как они нашли это. Это же перебором прямым. Код-то они вряд ли смотрели. Ну, настоящий QA, вот они такие баги находят. И очень похожий баг был в Android тоже прямо на этой неделе, или на прошлой. Ну, короче, это вот недавно. Там связано с... Ой, сейчас, я уже не помню. Когда ты можешь просто из сабвуфера админа вставить что-то вместо пароля. А, да-да-да-да-да. Там ты вводишь код, выделяешь его, копируешь, вставляешь, копируешь, вставляешь, копируешь, вставляешь, получаешь 4096 символов таким образом. Потом его еще куда-то там нужно скопипастить тоже. Ну, по такому же принципу, типа открываем такую-то менюшку, такую-то менюшку. Короче, кто-то не поленился, нашел какое-то поле ввода, куда нужно вставить 163 тысячи символов, подождать пять минут. После этого у тебя приложение крашится, и ты можешь зайти в Android. Я не понимаю, кто эти люди, как они это находят. Вот я удивляюсь. Интересно, почему... А этому человеку что-нибудь дали за это? Да-да-да-да-да-да, тот же вопрос. История умалчивает. То есть человек уже не смог рассказать об этом. Его больше нет. Да-да-да. Найти баку и умереть, да? Кстати, можем поговорить про QA. Я вот в предыдущий выпуск прогулял, слушал подкаст со Светой в радио QA. И меня тема зацепила. Повбрасывай, пожалуйста. Повбрасывать я хотел на тему «За что мы не любим QA?». Мне очень понравилось. То есть я когда слушал, мне прям захотелось высказаться. Давай, вперед. На самом деле я QA люблю и уважаю, да, поймите меня правильно. Но есть ситуации, которые случаются часто, и которые высывают у меня недовольство. Это первая задача, в которой нет описания, в которой нет шагов для воспроизведения. Очень часто, притом даже иногда, description какой-то вообще непонятный, знаешь, из серии там. Ну вот, постановка задачи. Неправильная сессия. Точка. И что ты должен сделать? И ты через, не знаю, две недели подходишь к этому QA, говоришь, а что это за задача, что надо было сделать? И он вариант А, он уже сам не помнит. Вариант Б, он начинает объяснять, что там, а вот если там взять клиент, и вот тут так вот хитро-хитро-хитро, блин, вот ты этого никогда бы не узнал. И меня задачи без нормального описания всегда очень печалили. Но ты знаешь, это из разряда, что QA не профессионально, а выполняет свои задачи. И это было на сонах. Ты не понимаешь, у нас agile. Agile, нет времени на всякую бюрократию. Подожди, поговори с человеком. QA тоже люди, они хотят тепла и общения. Ну, Свет, ну что ты. Ладно тебе издеваться. На самом деле люди непрофессиональными бывают везде, и говорить, что именно QA на стандарте, ну, такого нет. То есть есть типа... Ну, просто баги на программистов обычно заводят QA, понимаешь? Да. А я сама на себя баги завожу, понимаешь? Как мне быть? Ну, я тоже завожу. И я в них, кстати, пишу очень подробно, что я буду делать, потому что завтра у меня переедет автобус, кто-то будет чинить этот баг вместо меня, понимаешь? А поговорить сам с собой? Подожди, а ты для себя полностью так расписываешь это все? Я обычно для себя пишу такую небольшую заметку, что чтобы не забыть, вот такой баг я нашла, я буду его сейчас чинить. Ну, не поверишь, да, я очень подробно пишу. Более того, я, например, когда изучаю баг, я прям не ленюсь, в комментариях там дописываю, что там типа вот, я тут нашел такой странный стектрейст, там такого рода вещи. То есть, прям реально в любой момент можно прям потаскивать. Ну, я не уверен, насколько это легко по ней разобраться, но в принципе возможно. Ну, вообще записки хотя бы будущему себе, это всегда очень полезно, просто потому что тебя за час могут прибежать или перережить на что-то более срочное, а багу потом будешь чинить и заново это все выезжать снова, как правило, не хочется. Но я всецело разделяю мнение Саши, что, ну, по меньшей мере, самому себе через неделю должно быть понятно, что ты делал. Да, вот, ну, просто для себя я делаю как минимум. Одно дело, ты будешь писать там написал, скажем, стектрейст, краткое описание, все. Либо ты будешь расписывать как другому человеку. Это разные случаи. В одной компании меня, кстати, QA очень любили, потому что я когда делал задачу и отдавал им на тест, ну, там такая компания, в ней не было автоматических тестов на тот момент, потом вроде появились, но не важно. Я писал к ей, как тестировать задачу прям по шагам. Заходим, по вкладку такую-то, жмем там 1, 2, 3, ожидаем получить какой-то результат. Ну, то есть, прям, и я опять же, я это делаю не для кого-то, я делаю для себя, потому что я знаю, ко мне все равно подбегут и спросят. Ну и зачем я буду тратить свое время, я лучше сейчас напишу, пока помню. Так что, ну, не знаю, я всем рекомендую такой подход, прям все-все-все документировать, даже несмотря на agile, желание общаться. Еще, возвращаясь к, за что они любят QA, это когда, ну, я не знаю, насколько это прям реальная их проблема, иногда они не могут определить, на чьей стороне проблема, условно говоря, клиента или сервера. И, ну, хороший QA, он, по крайней мере, случайным образом подходит, там, один раз к серверу, второй раз к клиенту. Вот, но бывает QA, который, например, не знаю, что-то не работает, всегда виноват, условно говоря, клиент. Понимаешь? И вот всегда клиенту, клиенту, клиенту, а уже потом к серверу. Или наоборот. Да, кого он больше не любит. Или кто его меньше посылает. То есть, обычно так, на самом деле. Вообще, хорошие QA, они патчи сразу пишут на систему. Так-то. Ну и последнее, наверное, вот, что мне не нравится в некоторых QA, когда они не находят прямо реальных блокеров. Когда они, знаешь, находят какие-то мелочи, там, типа, тут вот, не знаю, опечатку, условно говоря, вот тут вот, не знаю, поле можно назвать лучше в JSON. То есть, какие-то такие мелочевки, они прям заводят кучу-кучу багов, чтобы, знаешь, показать, что они работают. Бывает еще и такое. Вот ты все на QA наводишь то, что к ним не относится. Чтобы показать, что они работают, это значит метрики такие у менеджеров, чтобы было количество багов, чтобы они показывали какую-то отчетность. Ну, опять же, не виноват у QA, что там менеджеры дебилы. Ну, мое дело просто рассказать, вот с чем я сталкивался, если это кому-то интересно. У меня все. Хорошо. Ну ты QA их не обижай. Я сам был QA. Серьезно? Ага. Ты, по-моему, рассказывал даже. Да-да-да. А я впервые об этой истории слышу. Я года три, по-моему, или четыре, тестировал этот компилятор. То есть, тестирование, ну, сначала написание тестов, автоматизация написания тестов, потом всякие тестовые окружения для регрессионного тестирования компиляторов. А ты, получается, из QA стал потом программистом, или ты был программистом, а потом упал на самое дно и писал тесты? Нет, я начинал именно как писал тесты, а потом все глубже и глубже переходил в программист. Ну, окей. И я считаю, что это вообще правильная штука. То есть, если вы нанимаете человека в компанию, посадите его писать тесты на первые пару месяцев, чтобы он привык, чтобы он понял, и потом уже с точки зрения тестов смотрел на систему. Слушай, это слишком лихо. Нужно сначала дать ему, ну, не знаю, пописать документацию полгода, потом поносить копии, и через год может начать уже что-то там, код-ревью делать. Писать нельзя пока. Код-ревью на тесты. Да, в ударе просто. Слушай, ну, поносить копии – это хорошая идея. То есть, вот, ой, у нас в кофемашину недавно починили, и я сейчас такой счастливый. У нас она водичку делала, а сейчас она кофе начала делать. Вы знаете, я просыпаться стал по утрам. Это же такое счастье. Водичку не штырило. Да, водичка еще. То есть, запах кофе вроде, вкус кофе, но чувствуешь водичка. А вот сейчас она кофе делает. Классная вещь. Ну, круто. Как починили? Сердцем заменили? Нет, три дня ее замачивали в каком-то растворе какой-то там кислоты молочной или какой-то. Но это не мы делали, специалисты специальные, специальные люди. Просто накипь получилась, что ли? Ну да, там ее три года уже ничего с ней не делали, не обслуживали. Ну, так запишем. В офис принесли кислоты и всех стола штырились. Черт. Я буду молчать дальше. Я буду молчать. Ладно, давайте дальше, а то у нас тем много, а времени уже мало. Мы тут болтаем про зерунду всех, про водичку и кислоту. Саша, похожая тема на продолжение. Ну, тут, скажем так, наши давние слушатели могут помнить, что есть такое антикафе Geek Time в Москве. Это как ключ в Питере, только Geek Time в Москве. Ну вот, и они проводят спидейтинг в вообще самое удачное время, 31 декабря в 5 часов вечера. Прям вот для спидейтинга то, что надо. Ну, вдруг кто-то из слушателей не в курсе, это когда, ну вот вы в хаусе, если сериал смотрели, могли там в одной из серий видеть, это когда вот есть столики, и девушки сидят, а молодые люди пересаживаются со стола за стол. И в течение, ну, по-разному, там обычно минут 5 они общаются. Если девушка и молодой человек понравились, то ты в бумажке ставишь лайк, и в конце подводятся итоги. Если лайки совпали, то вы обмениваетесь контактами. Как бы все это автоматически происходит. Какая-то странная эта штука. Надо фатализм. То есть вот сел один раз, и все, значит, и все, обмениваетесь контактами. Это прям тут демократия какая-то. Представляешь, неудачно сядешь. Ну, не повезло, значит, нечего ходить на спидейтинг. А вот, ну, знаешь, это такой экстра спидейтинг. Можно даже, не знаю, вообще в темной комнате глаза не открывать, просто обменяться контактами. Точно. Гарантированный успех. Вот у Светы есть что сказать по поводу спидейтинга? Ну, я считаю, что, как бы так помягче выразиться, что нормальные люди туда не пойдут. Простите, мне если я кого-то задела. Ну, меня, на самом деле. Я, конечно, не ходил, но если бы тут, как бы, вполне себе считают нормальной штукой, я бы туда пошел, если бы мне это было надо. Я просто не совсем понял, а что мешает нормальному человеку пойти на спидейтинг? Как бы это тут объяснять, там... Чтобы вас не обидеть. Да, чтобы никого не обидеть, чтобы это было очень предкорректно. Давайте представим, что мы нормальные люди, так? Вот мы хотим пойти на спидейтинг, но не можем. Почему? Слушайте, вот нормально, да? То есть мы сидим вчетвером, общаемся, да? И ты говоришь, давайте представим, что мы все нормальные люди. Отлично. Но ты же понимаешь, что сегодня вечер пятницы, и нормальные люди не сидят и не разговаривают там за темы. С компьютерами. Да, пожалуй. Да, давайте представим, согласен. Так. Так, я представил уже, давайте, что там дальше представлять? Я жду Свету. Свет, продолжай. Ну, я считаю, что это такой странный способ познакомиться, и... Ну, я бы не пошла на такое, вот, честно. Но мне кажется, это как-то... Блин, стрёмно. Ну тебя же никто ни к чему не принуждает, это просто способ завести какие-то контакты. Ну то есть бывает даже в спидейтинге не мальчик, а девочка, инвестор, стартап, если что. Ну то есть это как бы в принципе способ завести в себе контакты. Вот, например, я, как переехавший в другой город, в принципе, в другую страну, даже в принципе считаю это довольно хорошим способом себя растрясти, куда-то сходить. Я, конечно, человек с развиятиями, к этому пока ни разу не прибегал, но в принципе вполне мог бы рассмотреть такую возможность. Ну вот, а потом, не знаю, мне кажется, это очень удобно. Ты знаешь, как сложно найти свободную гиковую девочку? А тут вот прям куча на выбор, выбирай, не хочу. И с гиковыми девочками намного интереснее, с ними можно вместе компилить код. Обсуждать раз. Да, зайти в ЗАГС, зарегистрировать стартап. Ну то есть, не знаю, сплошные преимущества по сравнению с обычными негиковыми девочками. Я предлагаю немножко повысить градус гиковости и поговорить, Саша там хотел рассказать про скала ИДЕ. Мне на самом деле интересно, что слушатели об этом думают. Вы приходите в комментарии и обязательно расскажите, почему нормальные люди вполне себе ходят на спидейтинг. Или ни в коем случае никогда. А, ну еще Света, по-моему, в Голанг-шоу имела неосторожность сказать, что не знает людей, которые использовали скалы ИДЕ. Я использовал, то есть я, честно, примерно недельку поработал. Если есть вопросы, спрашивай. Ну нет, скажем, смотри, ты сейчас на работе используешь как основной ИДЕ, идею для скала. Да, совершенно верно. И это как раз таки имелось в виду, что как основной инструмент, эта идея, как основной инструмент скалы ИДЕ, и не знаю, кто использует. Нет, но я говорю, я в течение недели использовал, он нормальный, работает. Просто идея лучше. Это не использовать. Это попробовать. Я тут согласен, то есть это все равно, что я использовал Eclipse. То есть я тоже на протяжении двух часов использовала скалы ИДЕ. Ну, наверное, это можно сказать так. Ну, короче, ладно, я тебя понял. Хорошо, что ты докопался правильно. Если кому интересно, скала ИДЕ, она как бы нормально работает, просто она чуть, я бы даже не сказал тормознуть, и она такая, какая-то олдскульная, такая хардкорная по сравнению с ИДЕ. И, ну, поскольку я к ней уже привык, к ходкейм и так далее, то, ну, не знаю, я попробовал и вернулся. Она на базе чего? Ну, Eclipse, разумеется. А. Ну вот. И, то есть, в принципе, если бы я начинал писать на скале, и мне нужна была какая-то ИДЕ, то я бы выбрал в качестве первой скалы ИДЕ, то, ну, в принципе, нормальный вариант. Вот, у меня все по этой теме. Я считаю, что Валера очень мало говорит, давайте дадим ему следующее слово. Про раст? Валер, давай расскажу про раст. Про раст. Я опять добавил тебе тему, я надеюсь, ты не против. Ну, я просто не знаю даже, что про нее говорить. Ну, книжка, ну, перевели. Ну, книжку мы все это знаем, как бы это та, которая, насколько я понимаю, английская официальная. Ну, перевод здорово, теперь может быть перечитать по-русски. Я только одного не понимаю, как бы, а зачем? Ну, то есть, мне кажется, что если... Мы обсуждали эту тему. То есть, мне ответ очень понравился такой, что представь, что тебе 14 лет, ты решил покопать какой-то язык программирования. Не, я с этим совершенно согласен, просто кажется, что это не та книга, которую надо при этом переводить. Ну, почему же? Может быть, раст? Не знаю, мне просто конкретно раст-бук, ну, вот это, знаешь, такой, ну, Talmud, короче, это примерно как C++, как бы этот дизайн эволюции в C++, короче. Ну, ты же не станешь ей 14-летнего давать, ничего хорошего из этого не получится. Ну, на самом деле, книжка вполне нормальная для 14-летних, мне кажется. Нет, в смысле, она не сделает тебя хуже, нет, просто она к тому, что она большая, и это не самый эффективный путь, скажем так. Камон, подожди, подожди, подожди, в дизайне эволюции в C++ страниц 250. А, значит, путаю, значит, ну, да, значит, путаю. Есть, короче, такая мега-талмуд по C++, есть тоже, по-моему, автор с Трасструпом. Вот его, я имею в виду, наверное, не стоит давать. Понятно, ну, это да. Ну, в общем, закончили, перевели, можно пользоваться. Отлично. А вот если бы эти ребята, которые занимаются переводом таких книг, сходили в свое время на спидейтинг, им бы не пришлось тратить вечера на переводы, понимаете? Точно-точно, сидели бы, нянчили с детьми. Зачем нянчиться с детьми, если у тебя есть девушка и хаскель? Когда-нибудь с C++ дети появятся, это вообще... Ну, почему, не факт? Свои манатки появятся, и трансформеры. Точно-точно. Маленькие комбинаторы. Слушайте, у нас прям супергиковский выпуск получается. Поехали дальше уже. Расскажи нам, Саша, про ООП. Окей. Ну, есть такой блогик, dmitryfrank.com. Я уже не первый раз на него перехожу по каким-то внешним ссылкам. Там чувак очень интересные темы пишет. И вот один из постов, я не уверен, потому что таймстэмп как-то хитро спрятан, но вроде новый. Называется «Объектно-ориентированные техники в C». Начинается статья с того, зачем вообще это кому-то нужно. Как бы C и ООП. Товарищ пишет всякие embedded. Как бы по для встраиваемых систем. И проблема в том, что для такого железа обычно ничего кроме компилятора C нету от слова «вообще». То есть, у тебя есть желез, компилятор C, и пиши как хочешь. При этом программы могут быть довольно большими и сложными. И тебе там тоже, как всем нормальным людям, хочется DI. А для DI тебе нужен хотя бы интерфейс и один экземпляр для этого интерфейса. Ну, вот отсюда идет всякое ООП. И он описывает, как по сути руками построить, как на структуре симулировать объект. Понятно. Потом у тебя начинается интересно, когда ты строишь иерархию, тебе для них нужны vtables. И что там еще есть интересного? Деструкторы, интересно, автоматические. Нет, никаких автоматических деструкторов. Исключения. Исключения тоже с ООП никак не связаны. Я просто все из C++ перетаскиваю, что вспоминаю. Чего обычно не хватает в разработчиках на сях. Об этом тут речи нет. И деструкторы, и конструкторы здесь вызываются вручную. Идея именно в том, как у тебя смоделировать предметную область скорее. Еще из интересного, тебе нужно, как это называется, RTI, или RTTI. RTTI, точно. Runtime Type Information. Тебе нужно по ссылке понять, что это за тип вообще в иерархии. И оказывается, это можно довольно легко сделать, без всяких дополнительных флагов, байтиков и так далее. Потому что у тебя уже есть vtable, и ты по ссылке на vtable можешь понять, что это за класс. Единственное, что это плохо работает, когда у тебя глубокие иерархии, больше двух уровней. Потому что у тебя есть ссылка на объект третьего уровня в иерархии, а тебе нужно понять, что он является классом в корне, в первом уровне или в втором. Ты этого не можешь очень легко сказать, имея только ссылку на vtable. Но тут пишется, что на практике двух уровней более чем достаточно, поэтому такая реализация имеет право на жизнь. Ну и в конце приводится скрипт на рубях, который может все это кодигенерить, чтобы меньше лапками вбивать. Вот такая вот интересная статья. Мне понравилась, я всем советую. И честно говоря, я вот так смотрю и думаю, зачем вообще нужен C++, когда у тебя OOP на обычном C и в принципе норма. Более того, у тебя нет всяких протектед и private наследований. Все просто и понятно. Прям смотришь и понятно, как работает. Вопросы, дополнения? Вань, даже у тебя нет? Я вот как раз думаю... Тут понимаешь, в чем сложность? У него есть много допусков. Вот чаще всего не понадобится больше, чем два. Вот я всегда вызываю ручками деструкторы. То есть все вот эти вещи, они тебе заставляют кучу вещей упрощать из-за этого. То есть деструктор вызвал руками, то есть это значит, что ты всегда должен точно обрабатывать, в каком месте ловить ошибки и так далее. То есть удобство это уменьшает по сравнению с обычным C++. В смысле какие ошибки? Он пишет на СЮНИ, нет исключения, если ты об этом. Ну да, я об этом. Но заканчивая с область видимости, у тебя 20 созданных объектов. То есть у тебя не будет автоматической деинициализации. Ты должен ручками все всегда вызвать. Ну да, приходится писать руками. Зато у тебя просто и понятно, это то, что свет любит. У тебя нет никакой неявности, у тебя все происходит явно. Ну то есть это все очень... Я не против такого, я вообще на C все люблю писать, без всякого даже ООП. Но я к тому, что это очень требует большой практики в организации кода. То есть ты должен четко разбивать на небольшие функции, которые несут какую-то точную логику, скажем, обработка этого делания, того, чтобы у тебя не было какого-то лапши кода, чтобы у тебя не было сложных ретвлений внутри одной функции, которой тяжело потом в итоге проследить, кто куда уходит и кто как возвращается.",
    "result": {
      "query": "C OOP techniques"
    }
  }
]