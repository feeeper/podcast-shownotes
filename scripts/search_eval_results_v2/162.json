[
  {
    "segment_id": "84d31b6a-8625-411a-8be4-71bbbe870926",
    "episode_id": "ac787253-ae52-4cb3-8899-6f0acaa13450",
    "episode_number": 162,
    "segment_number": 2,
    "text": "А насколько я понимаю, сейчас у вас большинство партнеров – это российские компании. Вы думаете о выходе на международный рынок? Мы изначально регистрировались в США, так как мы делали фриланс для американских компаний, но как-то это не зашло у нас. В основном работаем с московскими компаниями. Ну а нацеливание есть на иностранном рынке или нет? Ну мы пару раз пытались выходить на европейских клиентов, но это не получалось у нас ни разу, и я думаю, что нас это пока не соединит. Похоже, что вопросы закончились. Ну да, чат-чат вроде тоже молчит, так что, наверное, если нет какого-то желания что-то еще рассказать или дополнить, то что-то, о чем мы могли забыть, сами спросите. Врывайте в любое время и рассказывайте интересные истории. Мы сейчас пойдем по темам, ты можешь нас поддержать, или можешь, если надоест, сбежать от нас, и мы всегда гостям даем по традиции какое-то там последнее слово, поэтому если захочешь сбежать раньше времени, то потыкай нас в слайки, например, мы дадим тебе высказаться и отпустим. Договорились. Вот, а тем временем у нас потрясающие новости. И на этой неделе, наконец-то, черт возьми, зарелизился десятый ползгольц, они его, по-моему, несколько раз переносили, релиз. Ползгольц стал двуциферным. Да, то есть они перестали называть его там... 9.17, 9.96. Да, он теперь просто 10. У них был большой маркетинговый номер, маленький маркетинговый номер и патч-левел. Вот теперь у них только маркетинговый номер и патч-левел. А когда вы перейдете, кстати, вопрос такой на год.месяц, или год.номер релиза, Ну, всё в твоих силах. Приходи на какой-нибудь девелопер-миссинг и предлагай. Хорошо, как-нибудь приду. Не знаю только зачем. Валер, а ты говоришь, наконец-то, и так далее. Есть какие-то фичи, которых ты очень сильно ждал? Да, конечно, про реализацию. Ну, то есть у нас же много-много-много всего, мы выгребаем это большими патчками, и поэтому, как только каждый раз какой-то ползгольц становится немножко более лучше параллельным, мы от этого радуемся. Ну, конечно, каждый раз, скорее всего, придётся патчить наши типа данные, чтобы они... Чтобы параллельно агрегация на них работала. Подожди, а я другого ждал. Я ждал официальный, безглючный, быстрый мультимастер. Ишь, ты что захотел, мультимастер? Не, ну я вот, если честно, я ждал десятку, думал, что в десятке точно будет мультимастер. Почему ты так считал? Обещали логическую репликацию. Ну, потому что 10 это суперцифры такая, нолик в конце вот это всё. Не будет темнения. Смотри, как бы берёшь столованный и вперёд. Чё ты ещё хочешь? Я хочу что-нибудь от Позга и Скейлта. Ну, по идее, подошли патчи, может быть, примут, скорее всего, нет. Скажут, есть вон стол, есть вон пист... Как он там, патроны. Патрони. Патрони. Есть такой. Да. Валер, тебе параллелизм поможет в случае, если вы всё в одну сессию делаете. Разве вы всё в одну сессию делаете? Мы... Ну, скажем так, у нас есть разные. Скажем так, у нас есть разные нагрузки, разные профили нагрузок. Где-то мы, конечно, можем просто ручками расправлять, сделать больше сессий, а где-то вот нет, где-то мы можем очень выиграть. Я имею в виду, если у тебя, например, там, не знаю, 4 ядра и там 20 сессий, да, ты своим параллелизмом ничего не решишь, у тебя этот запрос будет быстрее, остальные встанут. Нет, у нас же АЛАП, у нас наоборот, у нас очень много ядер на машинах и не так много параллельных сессий. Окей. Что вы всё уходите от темы? Давай уже, Саша, расскажи, там у вас минорные изменения, вы просто циферку поменяли или есть что-то серьёзное? Ну, это серьёзный релиз, который готовился год. В нём есть ряд мажорных фичей, среди которых хочется отметить, во-первых, логическую репликацию, то есть теперь можно безболезненно обновляться с версии на версию, без необходимости останавливать пасгарит совсем. Нет, ну подожди, ну ты же лукавишь, кажется. Ну ты же лукавишь. Она по гитам не умеет DDL. Ну да-да-да, конечно, там есть ряд ограничений, но в частности DDL не реплицируется. DDL что, напомните? Deadly Definition Language. То есть нельзя сделать create table на одной машине и чтобы он был на другой, нет, он должен быть и там, и там создан разум. А ты уверен, что ты действительно этого хочешь? Ну, физическая репликация, это как бы так и есть, а вот, то есть как бы... Понимаешь, она логическая, то есть ты можешь реплицировать из таблицы с одной схемой в таблицу с другой схемой. Поэтому, как бы, ты уверен, что хочешь у себя ограничить возможности? Скажем так, я понимаю, что я не хочу на самом деле от логической репликации, я просто хочу от физической репликации безостановочный апгрейд. На это уже надо сдать сотую версию. Тут Даниил отчаянно пытается что-нибудь сказать, а мы ему не даем. Да я все хочу про Каптиорему пошутить, потому что все изучено, но мы хотим из Пасгри кучу фич, которые присущи новому скейлю, мне кажется, достаточно странно. А релиз очень крутой. Подожди, а что ты называешь присущим скейл? Ну, та же самая мастер-мастер-репликация с кором-коммитами каким-нибудь, это у тебя по сути полноценный класс. Ну и да камон, у тебя есть и спейнер, и кротч, они вполне себе мультимастер, и вполне себе сиквел решения. То есть у тебя как это... Совершенно ортогональные вещи друг к другу. То есть я не вижу противоречия от Пасгриса хотеть такой асид базы, и хотеть, чтобы он был распылен асид базой. Про мультимастер, я честно не проверял, но вроде ничто не мешает сделать два инстанса на разных машинах и логическую репликацию с одного на первого и с первого на второй. То есть тебе придется как-то разруливать конфликты триггерами, но в принципе это будет... Слушай, вот тут разное же понимание того, что такое мультимастер. Кто-то говорит, что мультимастер это типа eventually consistent, когда ты пишешь в оба, оно потом как-то решает эти проблемы, а кто-то, как я, это обычно понимает, что у тебя есть просто выбор лидера. Что типа они все мастера, но кто-то из них мастерее. Угу. То есть не выбор лидера, а а-ля паксос, короче, штука, когда ты можешь с любым общаться. Ну то есть в постгейсте сейчас можно только выбрать самого главного, остальные будут с лейвами, но в то же время, в принципе, я не знаю, там какой-нибудь egalitarian paxos вполне может считаться мультимастер системой, при том она строго консистентная. Но я тебе только что описал, как сделать два мастера. Нет, ну они при этом... Тебе при этом уже нужно будет как-то решать конфликты. А в egalitarian paxos там у тебя не будет конфликтов. Да, как бы сакция лидеризуемой системы будет. 100 лун вперёд. Так вот, пройдусь по фичам. Логическую репликацию на асфальте. Появилось декларативное партицирование. Это как наследование таблиц, только специально заточенное под use case партицирование, когда вы хотите, чтобы одна таблица физически хранилась в разных таблицах, возможно на разных дисках, и вот это вот всё. И с возможностью быстро дропать одну из этих таблиц. Да, теперь это делается без всяких экстеншенов, прямо из коробки, хотя вот авторы некоторых экстеншенов, типа PGA Passman, они вам объяснят, почему оно в Postgres сделано не очень хорошо. Да, параллелизм, как было отмечено. Quorum commit, то есть теперь, как это сказать... Как бы ты это, Валера, описал, это подойдёт под paxos или не подойдёт под paxos? Нет, вообще никак, это никак не связано про paxos. Это просто, не знаю, правильная репликация. Точнее так, правильный фидбэк на то, что репликация случилась. Короче, можно честно реплицировать на мажоре T-реплик. Точнее так, с кем так считать? Это как бы у вас Postgres будет считать, что оно успешно среплицировалось, говорить клиенту окей, только если он, мастер, получил подтверждение от мажоре T-реплик, а не просто от кого-то. На самом деле я не очень понимаю, насколько это прям супер важно, потому что уже в предыдущей версии можно было указать просто список реплик, от которых ты хочешь подтверждение. Да, но тебе нужно было их явно указать, а тут от любого мажора. Да, да, но в принципе там тот же самый стол он умел менеджить. Какие сейчас те, от которых ждать. И, наконец, Scrum SHA-256 авторизация, которая на базе SHA-256, на секундочку, потому что считается, что MD5 уже не торт, деприкейтед и так далее. И с этим связан ряд прикольных историй, то что, например, не очень понятно, как прообразовать эту авторизацию, простите, аутентификацию через PgBouncer, потому что в случае с MD5 он активно паразитировал на возможности сделать Madden the Middle, а с SHA не прокатит. Да, и еще несколько прикольных историй. Во-первых, просто циферка, что всего в этом релизе участвовало 324 контрибьютора. И всякие забавные вещи произошли с тем, что изменилась нумерация, она стала там двузначной, ну типа десятка, один ноль. В частности, если там зайти в страницу со скачиванием Postgres, то там идут версии сначала 9.6, 9.5 и так далее, а десятка в самом низу. И это до сих пор, ну по крайней мере на момент записи этого выпуска еще не починили. Так что нумеруйте все двух, а лучше трехзначные, или вот по номерам года, как Вань, кажется, предложил, да? Да. А, еще вопрос. Да, пожалуйста, продолжай. Да, там же что-то с протекционированием, там вроде как декларирование протекционирования, таблицы добавили или что-то, да? Да, а что ты хотел бы об этом узнать? Ну, это круто, вот это реально очень удобно. Оно, как обычно, плохо работает, если партиций много, много это тысяча или десять тысяч. Но для случая, если у вас, например, 10 партиций, да, эти можно действительно пользоваться. Ну, это основные фичи, там еще есть длинный-длинный список всех исправлений, которые попали в релиз, ознакомьтесь, если вам интересно. У меня все есть, у вас есть вопросы, я постараюсь на них ответить. Ну, я не знаю, я помню, что когда мы приглашали пообщаться ребят из PGPF в выпуск, у нас как-то завязалась дискуссия про то, что оно все на самом деле странное и не очень хорошее, и в итоге они все еще так скажут, что оно странное и не очень хорошее. То есть декларативное протекционирование все еще, скорее всего, медленное, да? Оно не очень хорошо работает, когда партиций много, потому что там... То есть даже хуже, чем Pathman? Pathman работает отлично на больших количествах партиций, и он в продаже у многих, и с ним никаких проблем нет. О которых я бы знал. Ну, просто ты помнишь названное многое число партиций и реакцию на него? Нет, не помню, но помню. Ну, если ты помнишь, когда я сказал, что у нас сотни тысяч партиций, это вызвало некоторый шок, скажем так. У людей обычно не сотни тысяч партиций все-таки. Это действительно необычно, зачем вам столько? Ну смотри, мы как-то разбиты по клиентам, а каждый клиент еще разбит, ну я же тебе, кажется, рассказывал. У нас там что-то такое, я помню, даже в выпуске про это упоминал, у нас по большому счету делается такое, что таблицы за разное время, между ними делается мердж-сорт при выборке, и поскольку апдейт это безумно дорого на больших объемах вставок, мы пишем всегда одну таблицу, потом ее закрываем и больше не трогаем. Ну понятно, зачем. В смысле зачем? Чтобы было быстро, а не медленно. То есть у вас тормозит вставка в таблицу, серьезно? Ну, сочетание. И вы поэтому создали ее сто тысяч таблиц? Подожди, тормозит апдейт. Вставляем мы при помощи копий. И читаем, потом просто таблицу закрываем, оставляем ее в покое, ты потом просто читаешь из родительской таблицы, и Postgres очень клевенько делает мердж-сорт, и ты когда делаешь groupby, и он тебе мердж-сортит, то он не будет тебе, то есть он тебе будет сроки отдавать, как только вот он очередной группенький закончился, он знает, что ничего больше по этой строке не будет, просто все, что у тебя было в where, тебе нужно написать в having, и он тебе будет отдавать строчки, которые тебе нужны. Но чаще всего вы обращаетесь к последней таблице? Нет, мы обращаемся сразу, в тот сервис, про который я говорю, мы обращаемся просто сразу, внутри информации про одно клиентское приложение, мы обращаемся, как правило, всегда по всем таблицам. То есть там просто смысл сервиса такой, что всегда нужен full scan. Full scan по всем таблицам, а таблицы разбиты по времени. Ну да, типа того. Звучит как что-то, для чего можно завязать брин. К сожалению, нет, мы думали об этом, к сожалению, не очень будет осмысленно. То есть у тебя юзер мог совершить действие год назад, а потом вчера, а ты хочешь вот про него узнать, тебе нужно будет и на год назад посмотреть, и вот недавнее. Напомните, что такое брин? Это, короче, довольно прикольная идея в Postgres, то есть ты можешь в странице писать информацию о каком-то поле. Посмотрите на секунду, это тип индекса, как b3, как хэш, только брин. Ну вот он прикольный тем, что два инта, максимальное значение в странице, минимальное значение в странице. Если у тебя есть что-то типа времени, он очень клёво получается сработать, то есть что-то, что у тебя будет примерно сортировано и так внутри хипа, и соответственно ты очень быстро можешь отсортировать, просто вообще даже не прикасаться к страницам, которые тебе точно неинтересны. Да, понятно. Нет, непонятно, а почему при этом запись годичной давности и вчерашняя влияют? Ну ты говоришь, что он записал год назад и приапдейтил вчера, в чем мешает? Мешает что? Ну в смысле, если мы не апдейтим записи, у нас только вставки, потому что апдейты дорого. Так. И смотри, у тебя как бы сервис отдает информацию про пользователей, тебе нужна суммарная информация про пользователя, и то, что он сделал год назад, и то, что он сделал вчера, и у тебя не апдейт, у тебя как бы вчера просто дополнительные данные появились. Есть предложение от мусоливания этого очень странного юзкейса? Он, между прочим, не очень странный, это, мне кажется, нормальный юзкейс, то есть почти, это попытка сделать, конечно, колоночный баз данных из подрисов в каком-то смысле, но колоночный баз данных для нас тоже не работает, по той же причине, что нам нужен фуллскен. Вот буквально позавчера, когда я был на кликхаус-метапе, и кликхаус нам бы тоже не подошел, например. Не знаю, мне кажется, что существует не один способ решения данной проблемы, мы просто описываем один из них. Но я предлагаю тоже закрыть эту тему, пойдем дальше. Закапывать, как он назывался, дискью. Да, некоторое время назад мы, по-моему, даже, да, по-моему, мы взяли в подкаст его, или не взяли, просто побурчали в чатике. Дискью брали. Брали, окей. В общем, что такое диск, если вы пропустили, есть такой чувак, интересный. Это... Сальваторе Санфилипе. Да, тот господин, тот сеньор, он... Сеньор, ха-ха-ха-ха, простите. Да, это была очень такая смешная шутка специально пошученная. Он автор Redis, а Redis это такой отличный кусок софта. И он в какой-то момент решил такой, окей, а я хочу сделать какую-то очередь прикольную. И он пошел и сделал диск. И я уже давно на диске не смотрел, и мне он тогда показался каким-то непонятно зачем он такой нужен. Ты же расхваливал, говорил, это вообще самое лучшее, что может быть на свете. Я говорил, что мне нравится общее направление движения, куда он развивался, что он in memory, что... А, ну, скажем так, мне нравилось, что... Сейчас попробую вспомнить. Короче, да, что это хоть кто-то попытался сделать очередь, которая не про строгий порядок, жесткие гарантии, а гарантии помягче. Но у него все равно как бы другие всякие вещи, типа полное отсутствие персистентности или там такое, которое как в Redis, если повезет. То есть там очень многие вещи, если я правильно помню, это best effort. И то, как он сделал механизм acknowledge и все такое, мне тоже не очень понравилось. Ну, в общем, суммарно, то есть мне... Вот мы как бы... По моему теории, как я помню сейчас, может, я какие-то другие чувства по поводу имел. Мне кажется, что, в общем, да, это клёво, когда люди пытаются сделать какие-то системы, которые отличаются от того, что делают все остальные. С другой стороны, вот оно не очень применимо, на мой взгляд. Вот, так, в общем, после этого и само ему хотелось какие-то стримы завести в Postgres или какую-то очередь, что-то такое. И... Redis. Да. У нас еще выпуск посвящен Postgres, поэтому не удивляйтесь. Да, все так. 10-0. В общем, он периодически порывался завести в Postgres, как... О, блин, опять Redis, черт возьми, Redis, Redis, Redis, Redis, Redis-ка. Но у него как-то вот в голове картинка не складывалась, и люди тоже периодически хотели подвести что-нибудь еще, и тоже как-то не очень складывалось. Но в итоге он с кем-то там в какой-то момент на конференции пообщался, посмотрел на кавку, еще на что-то посмотрел, и у него вот в голове все сложилось. А, и при этом он еще правильно делал какую-то структуру данных, Pump Radix 3 какой-то. У него в голове щелкнуло, как это надо делать, и он сделал работающий прототип. Вот, собственно, в блокпосте можно посмотреть, как это работает. Я это решительно одобряю. То есть там оно реально похоже на штуку с клевыми гарантиями, с быстрой доставкой, с возможностью клевого всякого искать. То есть оно как бы такая кавка, но в Redis-е, ну по большому счету. При этом оно, как это, блин, ключи, то есть что мне в кавке, например, не очень нравится, то что кавку нельзя использовать для чатиков. У нее большие latency, она вообще сделана как бы для, как это, для сувания в нее большими блоками и вычитывания из нее большими блоками. И топики у нее большие, тяжелые, то есть не стоит пытаться создать там 100-500 миллионов топиков. А здесь можно просто по любому ключу и там какому-то префиксу, фигачить, что-то вычитывать. То есть оно как бы имеет ту же семантику, что имеет кавка, но гораздо более легковесная штука. То есть как бы я ждал Джебагода, что называется. Оно все еще должно влезать в память полностью, потому что это Redis, но у нас сейчас столько памяти, что я не знаю. Мне кажется, вы можете все ваши чаты сложить в память и все будет отлично. Вот, мне, да, я дико одобряю, я всегда такое хотел, а теперь оно есть. А зачем? Ну, например, чатики делать. Ну, вообще-то... Смотри, на самом деле, вот я, как это, это такой практически универсальный игровой бекенд на самом деле. Если так об этом подумать, у тебя почти все игры, ну ладно, то есть понятно, что есть какой-то там сложный-сложный-сложный сервер симуляции физики, то, ну, блин, так просто не выйдет. Но почти любые карточные игры, почти, в общем, все что угодно, что не требует сложной физической симуляции, можно просто вот прям на этом, прям просто поверху этого написать. На самом деле я просто делал уже похожие штуки для... У нас на одной из игр, на позапрошлом геймджеме была карточная игра про свидание, я про нее рассказывал даже в подкасте. А вот там сервер-то был по сути вот тоже самое, штука вот такая же, наверх, поверх. Так существовало, что тогда в Regis структуру типов, структура данных и типов, и pub-sub. Здесь ты без костылей просто вот уже встроенная структура данных, то есть ты просто берешь этот Regis, ты на нем можешь сделать, ну, чат, можешь сделать игру, можешь сделать игру, в которой есть чат. Возможности безграничны. То есть это вот такой коммуникационный паттерн, он настолько важен, и у него настолько клевые семантики, настолько удобно пользоваться. Но как я уже сказал выше, Kafka, семантика клевая, но не подходит для вещей, где нужен low latency. А эта штука, я еще не мерил, но очень похоже, что подходит. Ну блин, как бы от Regis ожидаешь low latency. Собственно, что является порядком именно low latency для тебя? То есть там меньше миллисекунды или что? Ну скажем так, в данном случае, меня это как человека, который много писал игры, и периодически любит без смеху ради писать всякие мелочи, для меня это, ну, или Regis, чатик, может хотеть написать, это вот, там да, в районе миллисекунды. Ну Regis обычно вообще за микросекунды отвечает, типа там пару сотен микросекунд обычно. Ну могу сказать по опыту, что можно Kafka засунуть в тот же сам RAM-диск, например, и выкрутить нормальный latency, получать примерно тот же самый порядок. Я из того, что читал по статье, мне показалось самым таким полезным, наверное, применением это писать Time Series, но опять же, зачем писать Time Series в Regis, если есть, ну, предназначенная для этого база, тот же самый хотя бы ClickHouse, к примеру, можно прикрутить, и не будет таких проблем с персестированием, которые присутствуют в Regis, я, если честно, вообще не понял, зачем это было сделано. Началось обсуждение. Валера, что вы скажете? Я уже начал отвечать, я забыл размериться. Точнее, не то, что забыл, я нажал, но не размерился почему-то. Так вот, я как раз выше приведён, например, про игру, это вот, зачем вообще тасовать в Kafka, у тебя игровая сессия, там, 10 минут, и никому никогда эти данные больше не нужны будут. Нет, ну подожди, подожди. Для файлеров есть репликация. Подожди, подожди, а в смысле не нужны? Смотри, у тебя игровая сессия, люди там обмениваются картами, возможно, пишут какие-то сообщения, ну, там, представь, там, Gwent, например, чтобы не наши сомнения. Давай, например, Gwent, да. Да, у тебя каждый ход, это как бы строчка в такой штуке. У тебя сессия, после того, как ты, вот, у тебя игровая сессия длится, ну, там, ну, 10 минут максимум. После этого, как бы, если у тебя, не знаю, если у тебя есть какие-то реплеи, ты, конечно, можешь её просто целиком всю выгрести и положить там, не знаю, в S3. Если нет реплеев, ты просто можешь про неё благополучно забыть нахрен. Тебе просто никогда больше не понадобится вот эта игровая сессия. Тебе нет смысла пересистить вообще никуда. Ну, то есть, ты в данном случае на Kafka наезжаешь только то, что она зря пересистит, я правильно понимаю? Не только. У неё в целом IEO, ну, как бы, у неё история про ввод-вывод, она не про, как бы, не про LTP, а про... То есть, как бы, она ориентирована на работу с батчами, вся целиком. Она такая, так классная, быстро работает, тогда и только тогда, когда ты в неё пишешь большими батчами. Нет, подожди, пересистентность, это же не только про то, чтобы сохранять, это ещё и про гарантии, верно? И про гарантии тоже, да, да, безусловно. Ну, то есть, как бы, Redis без персистентности тебе меньше будет гарантии давать, верно? Верно. Но ещё раз, есть множество применений, когда эти гарантии не нужны, а вот маленькая лепестница нужна. Вместо того, чтобы пытаться как бы из ежа сделать ужа... Нет, я здесь полностью согласен, что, как бы, я не вижу большого количества применений, где тебе вообще не нужны гарантии. Ну, то есть, даже в этой игре, скажем, если ты будешь... Нет, подожди, я же люблю гарантии, но как это... Но ради latency, ну, хорошо, увеличилось latency, вместо 1 миллисекунды стало 10, вот человек всё заметит. Нет, смотри, смотри, я попробую по-другому тебе сейчас описать. Я люблю гарантии, такие, типа, вот здесь, чего мне, например, не хватало в старых данных Redis, чьи я руками в итоге вертел, мне очень нравится подход, когда ты, как в интерфейсе, как в Kafka, когда ты можешь сказать, что я последнее сообщение видел такое, дай, пожалуйста, мне всё, что произошло с тех пор, если ничего не произошло, я повешу. Вот это вот семантика, которая мне очень всегда хотелась, это просто лучший интерфейс к чередянам, который только может быть на чтении. В то же время гарантии того, что, там, не знаю, сообщение никогда не потеряется после того, как игровая сессия закончилась, зачем эти гарантии вообще мне? То, что оно не потеряется во время игровой сессии, это довольно легко гарантировать, ты просто в Redis ставишь реплику, и у тебя продюсер ещё смотрит, типа, среплицировалось оно или нет. То есть это, как бы, не самая, то есть задача решаемая, если она тебе нужна. А именно, ну... Ну, то есть тебе в Kafka не хватает другого интерфейса, я правильно понимаю? Наоборот, мне в Kafka устраивать полностью интерфейс, у меня, ну, просто Kafka это система с определенным набором выборов, которые правильные для того, для чего она нужна. Ну, я не знаю, как набор компромиссов. Ну, примерно понятно, то есть, как бы, тебе не нравится монументальность и излишняя сложность в Kafka, хотя большинство проблем, которые ты встречаешь, ты можешь решать меньшим количеством гарантий, меньшим количеством сложности в системе. Ну, я бы не сказал, что Kafka сложная и монументальная, Kafka как раз довольно милая и няшная. Она просто делает, как бы, вот опять же, лишнее. Блин, не знаю, ну да, и лишнее делает, и просто, как это, вот... Код написан так, чтобы клево работать с батчами. Ее можно затюнить, чтобы она работала, наверное, не с батчами, но зачем, когда вот есть вещи, которые заведомо ориентированы на мелкие транзакции. Сложный и спорный момент. Скажем, в... Я уже забыл, как игра называется в машинзоне, но они очень сильно, очень сильно ратуют за то, что мгновенный перевод и в дальнейшем аналитика по чатам, она может как-то играть решающую роль. Ты всего этого не можешь получить, если у тебя персистентность гарантируется только до тех пор, пока ты не использовал, а потом ты это выкидываешь и забываешь. Ну, то есть, я к тому, что даже в тех сложных случаях, когда у тебя, казалось бы, это не нужно, на самом деле это может еще понадобиться. Не, ну еще раз, для аналитики ты можешь точно так же иметь какого-то потребителя, который не играет, выгребать из этой штуки, перекладывать куда-то еще в ту же самую кавку и потом офлайн анализировать. Булгагашенечки. То есть, как бы, давайте не будем использовать кавку, а вместо этого поставим кавку позади. Вот для меня это совершенно нормальная ситуация, потому что... Еще раз, блин, кавка это не месседжи-брокер для, как бы, игры. Да почему? Да, блин, просто потому что у тебя... Потому что нужно сделать дополнительное действие. Нет, смотри, ты просто вот убьешь, мне кажется, свою файл... Не файл, а все, то есть, как бы, ты задолбаешь свое ядро, и ты на каждую игру будешь издавать по топику и потом удалять этот топик. Ты задолбаешь свой зукипер и ты задолбаешь свое ядро. Потому что в кавке каждый топик это набор файлов. Ну, просто начиная с этого. Я согласен с Сашей, он там в чате нам пишет, восторженно, что ему очень нравится эта тема, пошел он чай залинолить себе. Я предлагаю все-таки закончить и пойти куда-нибудь дальше. Окей. Как мы быстро смяли тему, пока Саша чай пьет. Ну вот нечего за чаем ходить, потому что... Согласен. Следующая тема моя. Это тема про цикл статей, про АйО.",
    "result": {
      "query": "PostgreSQL 10 new features"
    }
  }
]