[
  {
    "segment_id": "9b670c89-900f-4903-b1f4-4247d0b623df",
    "episode_id": "9f1d48d6-af4d-45a5-84d9-78087f836b4b",
    "episode_number": 154,
    "segment_number": 7,
    "text": "Не всегда. Ну, это так. Я давно уже не работал в компаниях, где нету Radius. Что еще есть? По технологиям языковым у нас всего, наверное, есть. Сам сервис написан на Go, C. Куски есть, которые в основном вебовские, на Elixir и Ruby. Кусок, над которым я активно работаю на Elixir, написан есть. Ну, у нас есть как раз кали, админ пишет даже на Perl. Ну, то есть у нас automation tool, который все раскатывает, называется Rex, и он на Perl. Что еще у нас есть по технологиям? Да, фига у нас всего, честно говоря. И опять же, дофигища SQL, потому что Postgres, поэтому там очень много PGSQL. Что еще? Ну, мне так из головы трудно еще что-то... А, C++ немножко есть. Ну, мне трудно что-то еще помнить из нашего стека, потому что я говорю, что здесь довольно много всего. Основные языки это Go, C и Elixir с Ruby. Вот. Я не знаю, ну, то вопрос такой, что про стек, в принципе, если был бы какой-то более конкретный вопрос, он мог бы ответить более конкретно, потому что, понятное дело, что там есть куча этих интересных технических деталей, как у нас там MapReduce на Postgres, или как мы в Postgres запихиваем... Как у нас в Postgres есть, там, вот этот iStore, который для интеджеров, для словарей интеджеров, для, ну, по большому счету, такая маленькая колоночная база внутри Postgres. Ну, не совсем колоночная база, там, как бы тип данных, который сильно лучше работает с некоторыми вещами, специализированный, там, не знаю. Как мы, например, так вот, я работаю, как там все это устроено. Но это прямо темы для отдельных докладов большие, и я не знаю, я вот так по-быстрому в подкасте не расскажу это раз. Во-вторых, это нужно, не знаю, как-то слайды-не слайды, но, в общем, мне тяжело без какой-то визуальной опоры, без никакой картинки объяснить, как это все взаимосвязано. Поэтому прямо в технические детали, к сожалению, не могу пойти просто, потому что, ну, их слишком много, и я не могу все охватить. А какой кусок, если не охватывать не все, то непонятно, про какой кусок рассказывать, что интересно, что неинтересно. Вот, как-то так. Я не знаю, вот я, как ты думаешь, Саша, я ответил на поставленный вопрос или нет? Я думаю, ты прекрасно не в ответил, а если нет, то патрон может, или вообще любой из патронов, задать более конкретный вопрос. Единственное, что меня очень удивляет, ваши терабайты данных. Сотни терабайтов данных. Как так много можно? Это, поверь мне, мало. Мы хотим на самом деле, я не знаю, можно ли так говорить, нет. Ну, короче, это, наверное, естественная вещь, про которую можно говорить, что у нас есть мечты о том, чтобы не агрегировать данные, или агрегировать их меньше. И при этом все еще можно их запрашивать. То есть, и это будет уже не терабайты, это будет еще больше, и на самом деле, больше того терабайта, это, смотри, тут как бы, как тебе сказать, это одновременно и много, и мало. Потому что, с одной стороны, хочется меньше агрегировать, с другой стороны, если хранить еще более правильно, можно еще сильнее сжимать. То есть, там, где у нас часто, типа, сотни терабайт, можно ужаться, в принципе, наверное, но и в то же время хочется хранить еще больше в плане количества записей. Потому что хочется, как я уже сказал, либо совсем не агрегировать, либо хранить сырые данные, плюс рядом с ними какие-то приагрегированные значения, и по ним быстро проходиться, ну там, то есть, можно много фантазировать, как именно это делать. Но суть в том, что хочется отвечать на запросы, которые придумают завтра, вместо того, чтобы писать систему, которая будет хранить специализированным образом уже просортированные данные, ну то есть там очевидные проблемы. Когда такой большой объем данных, то, по большому счету, у нас есть труба, с которой льется поток событий всех, и по большому счету, каждая аналитическая база, это такой, не знаю, срез или индекс определенный, который построен для того, чтобы отвечать на определенные запросы. Если мы придумываем какой-то новый вид, новый продукт, новый вид запросов, или даже фичу к старому продукту, то очевидно получается, что это уже не специфика Adjust, это вообще любая похожая система почти будет, если ее так строить. Мы оказываемся в ситуации, когда нам нужно накопить данные какое-то время, там, например, за полгода, чтобы начать отсунувшие отвечать на этот вопрос. Или там хотя бы за пару месяцев. А хочется сразу начать отвечать на какие-то вопросы. Или даже если какой-то ad hoc research, часто хочется ответить на какие-то вопросы, не собрався там всегда. То есть понятно, что у нас на самом деле есть, мы храним Raw Events отдельно, но они все равно, это не та база, по которой можно быстро откатать запрос, скажем так. А хочется вот именно чего-то такого, что будет. То есть мы, на самом деле, поглядываем на разные системы, я пока не буду этого озвучивать. То есть у нас есть идеи, что с ним делать, но да, потому что еще рано. Насчет сотен терабайт, я тут недавно в Hackers пришел некий господин, ну там он жаловался на то, что он перезапустил реплику Postgres, и у него обнаружилась одна битая запись в VAL. И он пытался выяснить, то ли это софтверный баг в Postgres 9.6, то ли это что-то с железом. Но он упомянул, что у него одна база, один инстанс, это 10 терабайт на SSD дисках. Поэтому мне кажется, я как бы не настоящий специалист, потому что у меня нет настоящего продакшна. Но если у чувака 10 терабайт SSD, то наверное сотни терабайт это для AllAPA, для APM-only, это разумный размер. Ну и очевидно, это не одна машина. Ну в принципе ты можешь в RAID 10 дисков сунуть, почему нет? Ну я как бы... скажем так, хотя бы потому что ты хочешь по ним параллельно запросы гонять, поэтому. У Postgres до недавнего времени с этим было все очень плохо. Как раз RAID тебе решает проблему гонять параллельно. Параллельную агрегацию он не умеет делать. Но он имеет параллельное чтение, насколько это хорошо работает с Postgres, я тебе не скажу. У нас данные, конечно, немножко приагрегированы, но ты все равно хочешь сделать агрегацию поверх того, что мы уже там приагрегировали, грубо говоря. То есть у нас не совсем уже готовы ответы храняться на все вопросы, очевидно. Ты хочешь прогнать какой-то, я скажу, запрос, где есть какая-то агрегация, какие-то агрегаты, которые нужно посчитать. И очевидно, ты не... как это... блин. Тебе нужно... у тебя параллельная агрегация завезли только в 9.6. И она еще далеко не всякая работает. У нас кастомные типы, которые там тоже нужно для подрядки адаптировать. И даже когда ты включаешь, у тебя одна машина будет... ну, просто ты в нее CPU можешь запихать меньше, чем в большее количество машин. Я просто не вижу, как это связано с несколькими инстанциями. Ну то есть, ты сказал... У тебя каждый инстанций, свой кусочек может агрегировать параллельно. Так вот, ты говоришь, что очевидно, это несколько баз данных. Но я могу точно так же открыть несколько сессий к одному инстанцию и сделать параллельные запросы, потом их в приложении сагрегировать. Это будет то же самое. Ну да, и это... как это... опять же, у тебя количество... Постгейст же он же форкает по инстанцию на все, а у тебя же клиент не один. Ну, в смысле, у тебя много клиентов приходит. Тебе хочется как-то это разумно нагрузку размазать, и ты не хочешь, типа, тысячу инстанций запускать на одной машине. Ну не хочется. Никому не хочется майнфрейм дома, я думаю. Мы же в прошлом выпуске выяснили, что все хотят только майнфрейм. Хочется, но нет. Ладно, пока мы не ушли от темы старых вопросов, или новых вопросов на старых пользователей, я хотел вспомнить тему, которую обсуждали два выпуска назад, но так и не смогли сказать ничего, потому что меня не было, я был единственный, кто читал эту тему. Это про то, что докеры-контрейнеры тормозят. Вспомним былое. Да, да, я просто вспомнил, как я слушал подкаст, и как раз у меня сразу всплыло. Очень интересная тема, с той точки зрения, что, во-первых, с юмором написано, автор вообще много деморит, а во-вторых, на самом деле полезные вещи в конце открываются. Это тема про то, что Амазон тормозит докер или докер тормозит Амазон, кто кого тормозит. Вот сейчас расскажу. То есть к автору пришли с вопросом, ты знаешь, у нас есть CI, и в нем докер-контрейнеры, и иногда они тормозят очень подолгу. Ну и автор с юморком отвечает, у вас там точно ДНС все нормально прописано? Он говорит, обычно, когда мне приходят такие вопросы, 99% это не настроенный ДНС. Вот, он пришел, начал помогать копать, и постепенно-постепенно раскапываясь, здесь он по шагам рассказывает, что он куда смотрел, он обнаруживает, что процессы, которые запустил докер, они висят в состоянии D, а это, если посмотреть в MANI, обозначает, что это непрерываемый сон, uninterruptible sleep. И это обозначает, что зависло на I.O., и оно может висеть достаточно долго. Конечно же, он при этом провел тесты и понял, что это вообще докер не виноват, потому что если рядышком запустить какой-нибудь другой процесс, который использует тот же самый диск, то будет та же самая проблема. Вот, он, для примера, использовал DD. И он начал копать дальше, оказалось, что они использовали инстансы Амазона, которые называются GP2, у которого, оказывается, как они не знали, или они знали, но забыли, или они за этим не следили, есть такая вещь, как Burst Balance. То есть, у тебя есть возможность быстро использовать диск. Давайте так, в Амазоне есть T1 и T2. T1 и T2, которые работают только на Burst. То есть, это такие инстансы, которые вроде как быстрые, но после того, как они свой лимит исчерпают, они становятся очень-очень медленными. И поэтому, если у вас приходит изредка нагрузка на эти инстансы, они будут вести себя идеально. То есть, если раз в 10 секунд маленький запрос пришел, он отработает мгновенно. Но если эти запросы будут постоянно валить, то со временем, через какое-то время, когда вы этот лимит исчерпаете, оно будет тормозить несказанно. Аналогично есть GP2, который они использовали, и у него тоже есть настройка на Burst Balance. И подошло время, то есть, у них этот Burst закончился за, по-моему, около 2,5 часов. В общем, 2 часа с небольшим, и он ушел до нуля. И сразу после этого докер или вообще любой процесс на использование этого диска начинает тормозить. И они решают проблему тем, что они в момент, когда он подходит к GP2, начинают переходить на другой тип инстансы. Я так понимаю, что здесь это можно делать на лету. Я вообще такой возможности не знал. Но вот они это делают. Они думают, не сделает ли им теперь это программно, потому что сейчас они там ручками смотрят, когда приходят большие то ли тесты, то ли запросы, у них начинает сильно использоваться диск, и вот они в дальнейшем начинают проедать вот этот Burst. Я не совсем уловил. То есть, при определенных нагрузках идет большая нагрузка на диск, да? Да, да. Есть какие-то попугаи, которые они проедают, правильно? Да, да. И в этот момент происходит переключение на меньшее IE, да? Пока все верно? Да, да. Хорошо. И те PlayDocker вообще не по делах, просто ребята не поняли, что они купили в Амазоне? Да. Ага, окей. Все именно так. То есть, Docker не виноват, и вот это все. В целом, интересная концепция отслеживать программно, сколько у вас осталось этого Burst на инстансе, и, возможно, переключать нагрузку, скажем, с этого инстанса на какое-то другое место, пока он не восстановится и заново не наполнится этот лимит. Тоже интересная концепция. Все. Я вспомнил былое и закрыл тему. Да, я хотел бы... Закладок. Закладок занести, да. Рубрика в закладке, и постараюсь быть краток. Нагуглился или из Твиттера прилетел сайт, называется Dos... Я не уверен, как это произносится, Dos Nostalgia. Ностальгия. Ну, ностальгия по Досу, да. Как правильно... Ой, я зря эту кнопочку нажал, ну ладно. Как правильно произносится... Саша, тебя не слышно. Ты еще одну кнопочку нажал. Да, я нажал. Да, я нажал. Я зря нажал очень много разных кнопочек. Да. Ностальгия по Досу, это сайт, где можно почитать про старые игры по Досу, про старые программы и так далее. Такой интересный сайт и Твиттер-аккаунт. Если вы ностальгируете по Досу, то ознакомьтесь. На Ютубе нашелся плейлист с туториалами по Gnu Radio. Gnu Radio это, как бы так сказать, это инструмент для обработки сигналов. То есть им можно, например, обработать звук, им можно сделать очень простенький осциллограф, если подавать сигнал на наушники, например. Часто его используют в SDR, то есть источником сигнала служит какая-то железка, которая беспроводный сигнал ловит. И эти туториалы, они мне очень хорошо зашли. Они прям все строительные блоки Gnu Radio, то есть вот эти вот, не знаю, как их назвать, фильтры, все вот эти прямоугольнички, которые вы в Gnu Radio рисуете, они подробно описывают, поэтому советую посмотреть. Вообще Gnu Radio интересный пример такого почти графического программирования и очень домайн-специфик приложения, которое эффективно решает задачу построением диаграмм. Давайте так, поэтому даже если вы никогда не видели, как работает Gnu Radio, просто посмотрите хотя бы первое видео 15-минутное, потому что это довольно прикольное приложение. И недавно я заказывал платы на сервере resonate.ru. Они раньше принимали проекты Eagle, потому что платы я рисую в Eagle, на данный момент я KickAd еще не осилил. И раньше они принимали просто проекты, прямо целиком, сейчас они начали что-то, как это сказать, в общем они стали требовать Gerber, и я почитал их инструкцию, инструкция у них такая, типа как это сделать ручную, а Eagle позволяет генерить Gerber автоматически, там путем указания джоба, поэтому если вдруг вы заказываете платы на Resonate, то я залил на GitHub джоба для Eagle, которая как бы за вас все сделает. Ну и соответственно она уже протестирована, все работает. Хотя с другой стороны, сейчас говорят, намного выгоднее заказывать на сервисе EasyED, то есть там получается на порядок дешевле, а качество ничем не хуже. Но если вдруг вы заказываете платы, то расскажите в комментариях, в чем вы их делаете, где заказываете. Отлично. Следующая тема, это тема, очень интересная статья, длинная, длинная, ну правда легко написана, Саша ее проекламировал, я ее с удовольствием прочитал. Секунду, я вот задумался, а Денис, ты же вроде есть в нашем канале про электронику, или я путаю? Я оттуда сбежал с отчаяния. Я вам про электронику поговорить готов всегда. Я просто думал, ты расскажешь, где ты платы заказываешь. Я... В целом нигде. Потому что даже если заказывают, то это германские реалии, потому что я живу в Германии. Они, я думаю, мало кому будут интересны. Во-вторых, все проекты, которые я делал, они обычно на обычных этих дырявых платах, я не знаю, как они правильно называются, PCB, по-моему. Да, на перфбордах делал. Которые ты просто проводки к ней припаиваешь, и всё, у тебя готовая плата. Про Германию Валерий интересно. Мне кажется, Валерий неинтересна электроника. Всё так, ну, не то, что совсем-совсем неинтересна, но ближе к ней интересно. Иронично, что это Валерий меня покусал своими гусеничными роботами, и ему неинтересна электроника. Ну, я же... Как это? Мне интересно куда-то программировать, мне неинтересно это паять. Слишком железячное железяко. К гусеничным роботам я отношусь так, что я купил как это... Разбери ещё всякой фигни, собрал это как конструктор, и дальше читаю уже эти... Как это называется? Спеклисты, дейташиты к всякому. Мне прочитать дейташиты за коди гораздо интереснее, чем, как говорят, паять.",
    "result": {
      "query": "технологический стек компании"
    }
  }
]