[
  {
    "segment_id": "b2ad47ea-c01a-43fd-a1dd-f58eaea6b873",
    "episode_id": "b6e8239f-a9ef-4f99-9297-3dd4b87ab234",
    "episode_number": 290,
    "segment_number": 5,
    "text": "Просто, ну, на практике все, что не проверяется автоматически, оно не сойдется. Оно никогда не сойдется. Оно начнется в какой-то момент расползаться. То есть, возможно, опять же, там, конкретно, если вы говорили про тот проект, как знаете, если уж мы приходим к примерам, возможно, просто такое салфищество разработчиков и, в принципе, технических людей собралось, что они просто это драйвят и следят за этим. Но там, не дай бог, поменяется два-три человека в компании и все это начнет разваливаться и превращаться в легиси. Я, более того, я добавлю сюда, что в ЛИТ, я уже жаловался на эту тему, послушайте, наш выпуск Н, выпусков назад, про то, что контрибьютить в Kubernetes, изменяя не какую-то базовую легкую функциональность, а какую-то сложную, очень тяжело. Вот реально очень тяжело. Я уж сейчас не помню, сколько у меня месяца заняло имплементация моего и реализация. Полгода. Я помню. Да, да, то есть месяцы. И под конец этого проекта, когда ты пятый раз пингуешь людей и просишь их, пожалуйста, пожалуйста, вот сделайте это, сделайте то, потому что это же open source. Вы не можете никого заставить. То есть это, хоть люди работают в Google, но в open source проекте никто никому не платит денег, поэтому мотивация это чисто такая, в свободное время. И получается, что к концу мотивация очень сильно падает. Вот лично у меня было желание максимально избавиться от проекта, несмотря ни на что, вообще без разницы и все остальное. То есть я поправил многие вещи только потому, что ну блин, я не могу. Мне будет стыдно, когда люди будут в продакшене иметь этот код или смотреть на мои изменения, а он будет плохого качества. Но у меня под конец я поправил докуменцию, ту которую знал, но я не пытался даже где-то что поискать и так далее. Фактически я уже запал мой прошел и мне уже ничего не хотелось делать. Возвращаясь к твоему реплике, что там люди на мотивации все правят, справляют и так далее. Нет, это далеко не так. Ты не думаешь? Извини, Свет, просто ты все равно говоришь, что тебе было бы стыдно, если бы этот код был где-то. То есть все равно это твоя мотивация, это было твое желание сделать здесь и сейчас хорошо. Я согласен, я согласен. Я просто к тому, что если смотреть на добрый золотой стандарт и хороший оптимистический сценарий, могло бы быть все совсем по-другому. То есть если бы не было таких заморочек с автоматизацией, которая иногда запрещала тебе что-то делать, не было бы таких заморочек с ревью определенных групп, когда ты должен получить ревью большого количества людей, возможно тогда бы быстрее бы шла разработка. Простите, у меня что-то сликоет. Быстрее бы шла разработка и она была бы лучшего качества, потому что мне бы не надоело протаскивать через ревью и каждый раз надо было обновлять весь код, потому что версии где-то кто-то уже поменял, а я не успел влить свои изменения. Но это тяжело. Валера, мир как известно черно-белый, в нем есть только единички и нолики. Документация, да или нет? Да. Подумай еще раз. Конечно, да. Ну вот только что Ваня описывал, как он страдал за документацией, ты все равно за нее? Мы уже обсуждали буквально пару выпусков назад. Я считаю, что документацию писать надо, возможно, просто как бы в меру фанатизма, который, как это, масштаб вашего проекта и способа в разработке, не знаю, в качестве сообразно, масштабы вашего проекта, вот что я хотел сказать. То есть, если у вас проект на 4 человека не очень большой, то там не знаю, какие-то крупные решения нужно документировать и оставлять в пейпер трейл и коммит-меседжа по-хорошему неплохие писать. Если у вас кубернетес, то, блин, я не думаю, что его можно по-другому разрабатывать. Я в корне не согласен со всем, что вы говорите. Сейчас я передам слово свете, естественно. Вот возьмем, например, замечательный проект Postgres. 20 лет очень страшного legacy на AMCC. Ни одной строчки именно архитектурной документации, то есть есть пользовательская документация. Есть пользовательская документация, есть комментарии в коде, есть знания в головах, может быть, какие-то доклады, слайды, что-то еще. Но именно такой архитектурной документации. Были попытки еще что-то в Вике писать, но там все безнадежно устарело. Опять же, вот то, что Антон говорил, потому что ни фига не автоматизировано. Тем не менее, проект прекрасно себя чувствует без такой вот архитектурной документации. Не вижу никакой проблемы. Света, ты видишь? Именно в Postgres? Ну, я говорил, что документация не нужна. А мой point… Ну, я таки, две мысли. Первая мысль, потому что говорил Ваня, это очень интересный кейс, который он рассказывал про Kubernetes, про то, что все говорят open source. Это просто идите туда, типа, вы же можете contributить, это не трудно. А на самом деле там очень много нюансов, которые не очень видны в начале и для внешнего наблюдателя. Но на самом деле это не так просто. Это первое. Второе, по поводу документации. Документация зависит, потому что если у вас проект большой и у вас там большая команда, и вы знаете, что проект существует и будет дальше существовать, и кому-то нужно это поддерживать и дальше использовать, да, действительно, документация нужна. Вопрос, на каком уровне она нужна. Мне нравится идея описывать, почему что-то было сделано, почему какая-то технология была выбрана, почему что-то было принято, что-то было отвергнуто. Скорее, документация в формате набора RFC, а мы об этом говорили в более ранних выпусках. И вот эти RFC, которые были приняты, которые были отвергнуты, я думаю, это хорошее подспорье, чтобы понимать и знать ответ на вопрос «почему», что-то было сделано как-то так или неначе. Потому что обычно, когда вы… Можно я вас подниму? Можно я завещу? Давай я закончу. Закончу мыслями, осталось одно предложение. Потому что обычно, когда вы начинаете рассматривать новый код, у вас главный вопрос – это WTF. Почему? Я делаю вид, что все, что вы говорите, бред севы кобыла, потому что вы говорите, нужно документировать «почему», «почему», «почему». Вот часто ли у вас возникает вопрос, вы приходите на проект, да, и в нем используется некая СУБД, например, Postgres. Во-первых, часто ли у вас возникает вопрос «а почему Postgres?» «А почему не были рассмотрены альтернативы?» Вот, и там, а как их рассматривали, и так далее. Во-вторых, даже если возникает, то вы действительно полезете в Confluence, искать протокол встреч или какой-то такой документ. И более того, даже если вы… Ну, если предположить, что такой документ существует, скорее всего, там будет… Ну, что-то написано, что-то типа «А Саша сказал, что Монга говно, и мы взяли Postgres». И чем это вам поможет? Могу сказать такую вещь, то что, во-первых, если ты приходишь на проект, в котором есть документация в каком-то виде, там, как правило, есть какой-то лендинг-документ для новых сотрудников. И, как правило, там… Ну, тут уже вопрос, как это документация ведется. Как правило, должны быть какие-то опорные точки, с которых ты начинаешь свои изыскания и погружения в проект. И если после прочтения этого лендинга-документа ты взявляешь код, видишь, что там, условно, Postgres, а не Монга, и задаешь вопрос «А почему?», ну, либо «А, это не принципиально данной стадии развития проекта», либо «Б, это было описано в документации», либо «Ц, это там не было описано, и такую документацию уже outdated», ну, какая-то часть знания утеряна. Ну, то есть, либо процесс не работает, либо это неважно. Именно. Ты начинаешь понимать суть. Это либо неважно, либо документация устоевает, и в этом уже не будет большая проблема. Нет, нет, я же, когда говорил насчет документации, я говорю, что важно фиксировать именно важные вещи. Ну, то есть, ты не должен описывать всё, ты не должен писать «Мы взяли Postgres, потому что мы провели анализ 10 баз данных, поняли, что Postgres в наших юзкейсах лучше, чем всё остальное», или ты не должен писать, что «Мы взяли Postgres, потому что Монга – говно», ты должен писать, что «Мы взяли Postgres, только да, ты действительно взял его почему-то». Если ты взял его просто потому что, ну, окей, ты можешь это не описывать, и это человек, который почитает документ, он, опять же, он уже почему-то полезен. Ну, так, у тебя есть Postgres в проекте, но он есть, потому что ты хочешь какую-то фичу реализовать, и почему-то Postgres тебе не подходит в эту фичу, и ты вот тогда задаешь этим вопросом, ты там, условно, коллег можешь просить, они тебе скажут, да хрен его знает, ты скажешь, а давайте вот, я вам принесу такое предложение, все скажут, да, давайте, вы это закопаете месяц на попытку прикрутить условную Монгу, она не взлетит почему-то, и вы тогда пишете в документе, чтобы сохранить будущим поколением этот месяц разработки, и вы напишете «Мы не смогли прикрутить Монгу потому что…» И вы будете… Пасмортам, сейчас модно писать «пасмортамы» в блоге Убера, что «мы перешли с чего-то на что-то». Ну, да, ну, то есть… Это тоже документация, пасмортамы, к слову. Да, да, и мне кажется, это верный способ, это верный подход к документации, то есть, у тебя, ты хочешь что-то сообщить людям, чтобы они не тратили на это свое время, и ты это записываешь. Вообще, еще, я посмотрел внимательно в карточку, которая написана в проекте, пока мы все обсуждали, то, что там карточка называется «как вникнуть в проект, когда в нем нет документации». То есть, все-таки, здесь именно с этой стороны, видимо, был постальный вопрос, и это, на самом деле, тоже интересный вопрос, если вы когда-нибудь приходили на проект, где нет документации, как вы в него уезжали? О, это он, я могу во всех подробностях описать, но если мы говорим именно про архитектурную документацию, потому что, повторюсь, ну, пользовательская документация нужна, то есть, если вы делаете коробочную штуку, а не сервис. Кстати, сервисам пользовательская документация на EFG не нужна, потому что у них должен быть интуитивно понятный UI. Да, а с пазогрессом, ну, как ты вникаешь? У тебя истинно в коде и заодно в комитах, поэтому ты примерно, не знаю, тебе нужно что-то заоптимизировать. Ну, клиент приходит с проблемой, что я исполняю вот такие запросы, и у меня работает медленнее, чем я ожидал. Окей, ты как бы пытаешься это локально воспроизвести, смотришь вывод профилировщика и понимаешь, ну, как бы что тупило здесь. Ты как бы смотришь в это место в коде, у тебя в окрестностях есть комментарии, и у тебя есть GitLog и GitBlame, который говорит, кто, зачем, когда это менял. И как раз в GitLog у тебя сказано, что прямо во всех подробностях, что мы здесь делаем то-то, то-то, то-то, потому что, потому что троллевают репедалия. То есть как раз в GitLog подробно сказано, почему. Это есть документация, Саша, вот просто документацию можно делать очень по-разному, кто-то ее пишет в отдельном документе, где-то это Confluence, где-то это там что угодно. Здесь документация в комитсенжах, да, такое тоже может быть, вот эта документация. Я согласусь со Светой, я просто видел, как у нее загорается Unmute, и я понял, что, ну, просто согласен, да, просто это вопрос того, где ты ее хранишь. Это будет Confluence, это будет Wiki, это будет почта, ветки в Slack или что угодно. Это записаны какие-то вещи, которые вы почему-то сделали для чего-то. Ну, в таком случае, похоже, у нас консенсус, потому что, ну, в такой форме у нас нет. Нет консенсуса. Есть кейс, когда документа-то действительно не имеет смысла. Это кейс, когда вы делаете какой-то стартап, вы там один человек на разработке, и вы знаете, что вам нужно очень быстро что-то сделать и проверить какую-то гипотезу. И вот в этом кейсе писать документацию, то есть, на это время смысла нет, потому что ваша главная задача с точки зрения бизнеса — проверить какую-то гипотезу. И вам нужно сделать это очень-очень быстро, как это, из палок и из аренты сделать, посмотреть и дальше решать. Окей, что-то взлетает, давайте будем это как-то усиливать, возможно, переписывать, возможно, что-то переделывать, но вот в этом кейсе вам она действительно не нужна. Ну, стартапы в какой-то момент, если они хорошие, если они выживают, они перешли быть стартапами и приходят в этот момент, когда приходит человек, видишь на нее документации, спрашивает, а почему здесь не Монга Пасгресс, они тратят на этот месяц, понимают, почему это на самом деле там и начинают писать документацию. Да, потому что у компаний в тот момент появляются деньги, если они могут нанять, если оно развивается, кому-то это нужно, у них появляются деньги на то, чтобы нанять людей, чтобы они стали разбираться в этом и писать эту самую документацию. Но в начале, если бы писали документацию, а не код и не быстро проверяли гипотезы, этого бизнеса бы, скорее всего, не было, потому что они тупо не успели. Опыт показывает, что даже когда у бизнеса появляются деньги, он его тратит не на… Ну, бизнеса бывает разная, да, окей, но многие тратят их не на написание документации, потому что у тебя внезапно есть конкуренты и тебе все еще нужно как можно быстрее, потому что иначе конкуренты сделают раньше тебя и пользователи уйдут к ним. Это тоже верно. То есть вам нужно в первую очередь задавать вопрос, какую проблему мы решаем и что самое главное сейчас для бизнеса. Есть еще один маленький use case, когда документация не нужна. Это очень специфический тип команды и я до недавнего времени не знала, что такое существует. Есть команды, они обычно называются growth, команды, которые занимаются ростом. Это на пересечении маркетинга, программировании, части data science и data analysis. И это команды, которые смотрят на то, что можно придумать еще для вашего текущего сервиса, чтобы увеличить какие-то метрики. И такие команды есть, я знаю, в Facebook, в Twitter, в BuzzFeed. Это очень специфический вообще проект и ментальность там такая, что вы как команда, вы должны думать как стартап и вам нужно супер-супер быстро что-то реализовывать, супер быстро эти фичи внедрять, смотреть как это влияет на метрики. Вы делаете кучу АБТ-тестов, они у вас постоянно-постоянно крутятся на разных сегментах людей и вы понимаете, окей, эта штука работает, мы там что-то заговнокодили, мы посмотрели, окей, оно получило правильный отклик. Сейчас мы берем эту фичу, переделываем ее правильно либо работаем с командой, с которой эта фича более резонирует и мы помогаем эту фичу сделать production, ну production ready. И вот это тоже очень специфический кейс, когда писать документацию менее важно, чем писать быстро фичи и делать тесты. Извините, но мне кажется, вот я сейчас хочу как-то сказать, что вот это немножко бушит про то, что в стартапах не нужна документация, ну то есть представьте, что вы программист в стартапе, вы потратили, ну не знаю, спринт, делая что-то, какую-то, вряд ли вы делали весь спринт одну фичу, но там, не знаю, пол спринта вы делали какую-то большую крупную штуку и вам не стоит потратить 10 минут, чтобы написать внятный коммит-меседж, ну может быть даже 20 минут, потому что написать внятный коммит-меседж. Но мне кажется, настолько непропорциональное усилие, то есть никто же не призывает писать подробнейшую документацию в конфлинсе, но просто написать хороший коммит-меседж или написать небольшой пост в ноушене, или что вы там используете в компании, а поправить ритми в репозитории это очень нетрудозатратные действия, которые очень сильно потом вам же самим помогут через полгода. Ты все правильно говоришь, но... Илья Валера, у меня был чейс про одного человека, то есть кто такой стартап? Стартап может быть из 10 разработчиков, тогда у компании есть деньги, чтобы им платить, если в компании один фаундер, в этой ситуации писать документацию смысла нет. Да ерунда это все, даже если даже не в компании, в компании могут быть сотни человек, если в команде 30 человек, и может быть не нужна документация в зависимости от проекта, потому что если они пишут типовой веб-сервис, типа вот как облако, которое терабайтами удаляет ваши фоточки в выпускного, то там безумно сложная логика взять пачку байт оттуда и положить пачку байт туда, и вот здесь еще МД5 почитать, и оно просто меняется за спринт. Ну, Саш, ты ерничаешь, потому что всегда есть какая-то специфика. Валер, я не ерничаю, я там работал, я знаю, как там устроено, там нет ни строчки вот этой документации, о которой вы говорите, она там никому не нужна. Я еще скажу немножко другой пример, то что, наверное, гляжет на то, что говорит Цвета, тоже действительно часто бывают настолько маленькие команды, что там условно один-два разработчика, все, и это может быть типа backend-frontend, они между собой договорились о формате API, все, дальше что у них там происходит, это живет в головах, и пока команда не растет, это просто не нужно. Блин, вот я работал на проекте по несчастной несчастливому стечению обстоятельств, какое-то время один, и даже если обпустить моменты, когда у меня были коллеги и до, и коллеги после, просто я был сам счастлив, что несколько раз, что написал комментарий, в котором я, или в комментарии, или в описании флореквеста описывал, что я делаю и зачем, потому что иногда ты вот смотришь на свой код через, скажем, я поддерживал тот проект три года, код, который я смотрел, я его написал еще там, ну не знаю, скажем, в первый год жизни проекта, потом как раз вот, помню, это был два с половиной года, где-то так после, когда я остался без напарника, и как бы я технически один в команде, но я уже забыл, какого черта я там думал про этот кусочек, проект был довольно большой, кусочков много, маленьких, вот про этот конкретно кусочек я уже не помню через два с половиной года, почему я написал именно так и какие у этого были последствия, написание по-другому, и вот я как бы посмотрел какие-то блеи, посмотрел почему так, и радостно, и не стал переделывать, потому что у этого был хороший, была хорошая причина сделать так, как сделано, то есть это такие знания, которые у самого у себя из головы испаряются, я не вижу, почему это не написать в Коммент-месседже, это не какой-то невероятный труд, это не занимает отдельного человека, это не занимает человека часы, просто как бы, не знаю, это как гигиена собственного кода, вот ты что-то написал, будь добр по парах видмишку, будь добр по парах, какой-то, не знаю, архитектурный овервью, маркдаун, который лежит в том же репозитории, и если было принято какое-то нетрибиальное решение, это было какая-то история, то есть там попробовал несколько разных вещей, в итоге определился, что писать надо так, там, черкни строчку в Коммент-месседж, это занимает, не знаю, общего времени, которое было потрачено на полреквест, обычно, не знаю, меньше процента времени. Я понял, где у нас импенданс и мисс мач, ты говоришь о том, что разработчику или там команде разработчиков несложно для себя написать там комментарии, Коммент-месседжа и так далее, абсолютно согласен, даже не пытался с этим спорить, у меня просто контекст был немножко другой, про то, что в масштабах компании, в масштабах процессов и так далее, скорее всего, никто не будет этим заморачиваться, потому что скорее, ну, опять же, бывают разные компании и проекты, это всегда держат в уме, но многим ничего этого не интересно, потому что им важно не остать от клиентов, им важно вовремя катить фичи, как там программисты пишут себе комментарии, не пишут себе комментарии, их совершенно не беспокоит. Ну, у меня как программисту, которому важно, чтобы когда другим важно, чтобы вовремя катить фичи, мне важно свою работу не делать сложнее через год, и если я прихожу в какой-то коллектив, и я вижу, что я не могу понять, что они делали, и они сами больше не могут понять, что",
    "result": {
      "query": "проект без документации как разобраться"
    }
  }
]