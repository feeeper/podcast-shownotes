[
  {
    "segment_id": "00bfe9c9-8f1d-41fb-8e04-2658844abd04",
    "episode_id": "d1f83222-25cb-4786-aa6c-850c9d1eaf2a",
    "episode_number": 300,
    "segment_number": 6,
    "text": "Переводишь несколько примеров, список из координат 0,0 и рисуешь экранчик квадратный, в котором в точке 0,0 пиксель стоит. Ну и тогда. Вот это как раз расшифровалось на ура. Участники это быстро поняли, быстро расшифровали моментально. Сложнее всего было именно понять, как интерпретировать эту функцию. Что она именно принимает координату какого-то пикселя и состояние. И возвращает новое состояние и картинку. И вот с этим участники повозились. Но это тоже, они все это расшифровали. Это расшифровываемо оказалось вполне. Мы тут ничего не подсказывали им. Можно вопрос сразу. Это расшифровываемо, какой процент участников это сделал? Вы оцениваете это как успех, когда сколько расшифровал человек, команда? Мы же специально построили. Мы знали, что это расшифровываемо небольшим количеством людей. Поэтому мы сразу задизайнили этот этап так, чтобы это была совместная расшифровка. Нам достаточно всего одного умника в чате, чтобы сказать, он догадался и включить это в спецификацию. И все уже дальше могут прочитать спецификацию, увидеть расшифровку. И дальше понять эту расшифровку и сказать, действительно, мы понимаем, тут написано именно это. Именно поэтому мы сделали коллаборативную часть. За что, кстати, словили хейта тоже немножко за коллаборативную часть. Потому что и ясно же, что только нам понятно, как будет дальше разворачиваться этот контест. А участникам непонятно. И некоторым на этом этапе показалось, что все 72 часа будут состоять, потому что 500 команд пишут наперебой в Discord и совместно что-то расшифровывают. Чего, конечно, многим участникам не хотелось. Просто кто-то поверил нам и остался, кто-то отпал на этом моменте. Ну там и пожалел или не пожалел после этого. Но это, на мой взгляд, тоже, не знаю, можно ли это назвать одной из наших ошибок, но это был неудачный момент. Не знаю, могли ли мы его как-то по-другому оформить. Потому что мы же не могли сразу сказать, ребят, подождите, подождите, не расходитесь, это еще не все. Мы должны были с серьезным выражением лица продолжать делать то, что мы делаем. Почему не дать правду все? Да, тут такая особенность, что мы сделали очень большую ставку на сеттинг и на реалистичность всего, что происходит. То есть в нашем контесте мы ни разу не сказали и не написали ничего, что ломало бы реалистичность этой истории. Астроном принял сообщение и просит помощи у комьюнити. Это нужно было очень мало усилий, чтобы поверить в то, что это реально сейчас происходит. И даже в какой-то момент кто-то нас в твиттере, кажется, спросил, чуваки, это действительно все происходит или это шутка? Или это просто контест? Или это правда так? Или это правда происходит? Это было очень круто. Но следствие у этого такое. Если мы хотим сохранить сеттинг максимально, то мы, конечно, тоже, точно так же, как и участники, не знаем, что будет дальше. Мы не знаем раньше участников, что это будет виртуальная машина, которую нужно программировать. Мы не знаем, что внутри будет эта виртуальная машина раньше участников. И не можем ничего из этого говорить. Из-за этого мы не могли ничего сказать участникам. А участники пришли как бы на обычный контест и ожидали большей определенности. С задним числом мы уже подумали про все, как это могло... Я, в частности, думал, обсуждал с кем-то, как можно было это построить. Наверное, можно было чуть-чуть сломать сеттинг и сказать участникам, что пришло еще куча сообщений, вот они. Мы пошли их расшифровывать. Думаем, что у нас это займет 5 часов. И через 5 часов ожидайте результат расшифровки. А пока можете расшифровывать сами и изучать это сообщение сами. Наверное, как-то так дало бы участникам больше определенности и меньше хейта мы бы собрали в итоге. Слушай, а еще такой вопрос. Многие участники не понимали, что контест начался уже. И мне кажется, отсутствие какой-то дополнительной коммуникации с участниками это тоже немного испугало. Возможно, если бы вы сказали с самого начала, что контест будет, вы его только дождитесь, чтобы не отвалились на непонятном начале, которое просто кого-то удивило и испугало. Что-нибудь вроде гласного, фербального обещания, что все будет хорошо? Ну да, может быть, но опять же это ломало сеттинг, потому что откуда же мы знаем. Да, мы конечно... Я как человек, который на большое количество процентов несет ответственность за то, что все произошло именно так, как произошло, за все хорошее и за все плохое, хочу сказать, что мы просто all-in, максимальную ставку сделали на сеттинг, и я там, будучи залогиненным за астронома Ивана Зайцева во всех каналах коммуникации, я везде говорил, когда меня спрашивали что-то про контест, я просто отвечал, какой контест? Нам тут инопланетяне пишут, а вы тут про какой-то контест. И продолжалось вставаться в образе максимально. Это, наверное, было... Мне казалось тогда, я не знаю, я до сих пор не уверен, правильно это было или нет, но мне казалось тогда, что либо сейчас люди нам верят и купают это, либо мы им уже ничем не можем помочь, и это тогда просто контест не для них. Я хотел, чтобы этот сеттинг люди просто... Чтобы они подыгрывали нам дальше, чтобы они играли в эту игру со мной. Статистику какую-то выделить, вы можете ей выделить? То есть по сравнению с прошлыми контестами, сколько у вас было участников, сколько вдруг дошло до конца? Я имею в виду по времени, не по результату, а именно по времени. Пытались что-то отправить и так далее? У нас было в конце, у нас осталось 100 команд, около 100 команд. В начале было несколько сотен, я что-то забыл сколько, 400? 500, по-моему. 500 зарегистрировавшись, но опять же, как бы в предыдущих контестах тоже бывает всегда куча мертвых команд, которые зарегистрироваться зарегистрировались, а дальше никуда не продвинулись. Поэтому тут, наверное, просто можно ориентироваться на 100 команд, которые прям появились в лидерборде с каким-то не нулем. И это, конечно, меньше, чем... А, ну там такие цифры. 100 команд это меньше, чем обычно бывает в лидерборде не с нулем, а 500 команд это больше, чем обычно бывает на старте. То есть мы собрали больше людей, и большая часть из них, видимо, отказалась от участия в Каннунге, где-то отпали. Да, тут сложно сравнивать, потому что мы нагнали очень много трафика, благодаря тому же самому Игорю Луканину, который занимался у нас в целом паблик релэйшнс и договоренностями с разными другими контестами, которые нас тем или иным способом рекламировали. Мы нагнали очень много людей, в том числе тех, которые впервые участвовали в ICFPC. И поэтому тут конверсию очень сложно посчитать. То есть у нас было какое-то количество старых участников, которые по 15-16 лет участвуют. Было какое-то количество участников, которые вообще впервые узнали благодаря нам о том, что такой контест существует. Ну и в той и в другой группе были, естественно, команды, которым понравилось, которые дошли до конца. Были команды, которым не понравилось, которые не дошли до конца. Можно будет потом подвести итоги. Мы как команда промышленных разработчиков, мы, естественно, и обратную связь тоже собрали с участников после окончания. То есть у нас вот это вот... Мы не можем иначе. Нам нужно экспективы проводить, нам нужно обратную связь собирать, там, НПС, порекомендуете ли вы этот контест своим друзьям. Ну, я шучу, но тем не менее обратную связь мы собрали. И вот, возможно, там будет какой-то инсайт на то, кому того больше понравилось опытным участникам или больше понравилось новичкам, которых мы согнали. Ну, прямо сейчас у меня нет под рукой этих цифр. Я хотел еще вот такую штуку осознать. Я это сам осознал уже, когда у нас контест закончился, что, короче, немножко нечестно было называть это мероприятие контестом. Потому что это был не столько контест, сколько, значит, такая интерактивная история, которую мы предлагали пережить всем участникам. И вот когда люди приходят и говорят, так, а где же спецификация, где же задача, описание задачи для вашего контеста? А мы говорили, какая задача, а тут история развивается. Да, вот тут было такое несоответствие, непопадание в ожидание некоторых участников. Но в целом, то, что мне кажется, это очень круто, что мы попробовали сделать такую, значит, именно не контест, а историю, потому что просто контесты умеют делать много кто. То есть тот же Codingame – это отличное место для программирования ботов. Тот же какой-нибудь Codeforces – это отличное место для программирования алгоритмов. Гораздо лучше, чем ICFPC. Кто там еще бывает? Kaggle – отличное место, чтобы в машинном обучении потренироваться. А зачем же тогда ICFPC? Какой смысл вообще делать ICFPC сейчас, в 2020 году, когда есть крутые нишевые площадки, которые все конкретные форматные контесты делают круче? Круче и качественнее, и чаще. Зачем ICFPC? И мы для себя ответили на этот вопрос так, чтобы делать что-то неформатное и неожиданное, необычное. И вот мы сделали максимально неформатное и необычное. Понятно, что собрали какое-то количество шишек в результате, но мне кажется, что это было именно неформатное. Как это, задрало планку необычности у ICFPC. Подожди, давай к необычности мы еще вернемся, но я хочу немножечко подбить задачу. Насколько я понимаю, задачу. Изначально вы выслали картинки, которые показывают, как работает виртуальная машина, точнее, как описывать функции в рамках этой виртуальной машины. Вы послали их там сколько, 30, сколько штук. Потом вы послали большую картинку, которая фактически включает в себя все знания о самом контесте. И, соответственно, показав, как работает эта картинка, в частности, вы посылаете координату, как клик мышкой, в какую-то область этой картинки, и следующую картинку, которую вы снова используете для взаимодействия с пользователем. Соответственно, они могут тыкаться куда угодно, если они тыкнулись не туда, то ничего не произойдет, вы получите ту же картинку. Ну, я грубо говоря. Не знаю, как на самом деле. Да-да-да, в точности так. Вообще, в точности так, да. Получается, что потом человеку вообще не нужен ни сервер, ничего, им нужен только просто взаимодействие с этой картинкой. Что в результате этой картинки? А, ну не совсем. Как бы вот эта наша программа, инопланетная программа, Ой, сколько вы эхо. Валер, или от Паши, от кого-то эхо. Инопланетная программа, она периодически, иногда возвращала не экранчик, а, значит, инструкцию отправить сообщение к кораблю инопланетян. Потом получить ответ от корабля инопланетян. И вместо координаты, функцию отправить этот ответ. То есть это как бы такой сетевой вызов, может быть. Сетевой вызов, который дает тебе дополнительные аргументы для взаимодействия с картинкой. Да-да-да. И получается, что если ты все правильно реализовал, то периодически твоя вот эта виртуальная машина должна делать как бы отправлять радиосигнал в космос. Ну и тут Иван Зайцев подсуетился и сделал маленький прокси-сервер, на который можно по HTTP отправить сообщение. И он его с помощью своей радиотарелки, якобы, отправляет в космос инопланетянам. Получает ответ и отправляет обратно ответ по HTTP. Вот. То есть получается, что их операционка взаимодействует еще и с инопланетным сервером. Вот такая история. А это уже, значит, надо рассказывать, что внутри этой самой программы. И надо сказать, что мы, ну когда, опять отматывая назад, где-то в декабре у нас был прототип этой вот всей виртуальной машины, значит, всех этих сообщений. И тогда мы еще до конца не знали, что должно быть внутри. И мы все еще перебирали варианты, что же запихнуть внутрь этой истории, чтобы, значит, было прикольно. Вот. И, значит, ну финальная идея, да, уже я расскажу финальную идею. Финальная идея такая, да, история как бы такая, что инопланетяне прислали нам на самом деле игровой сервер. Игровой сервер для игры в мультиплеер, ну для того, чтобы играть в мультиплеерную игру. И, значит, присылают программу, которую нужно выполнить, ну это игра фактически, да, ты запускаешь игру, и первое, что тебе рассказывают, это рассказывают какой-то сеттинг игры, показывают тебе, значит, галактику, показывают много рас в этой галактике, и потом показывают страничку, на которой рисуют сетку турнира между этими расами. И после этого ты догадываешься, что это какой-то межгалактический турнир в какую-то игру. И после этого тебе дают посмотреть несколько игр, реплеев игр, это вот прямо в этой операционке, ты нажимаешь кнопочку, тебе показывают реплей. Ну пошаговый, да, то есть ты кликаешь куда-то там на кнопочку «Далее», чтобы посмотреть весь реплей. И, значит, после этого запускается серия туториалов, то есть каких-то обучающих уровней, которые тебя обучают правилам этой игры, постепенно вводя какие-то новые действия, новые понятия. Ну и когда ты все это освоил, тебя пускают уже в мультиплеер. И вот для, собственно, для туториалов, и для мультиплеера, и для игры в игру, для игры, для того, чтобы делать игру, и нужен сервер. То есть на самом деле логика этой игры была запрограммирована не в инопланетной программе, а у нас на сервере, и каждый ход ты отправлял свои действия на сей сервер, он тебе говорил, кем это привело. То есть обычный игровой сервер, как у нас это работает. Вот, то есть общий сеттинг примерно такой. Слушай, у меня такой вопрос. Я читал сообщения, не в онлайне, я постфактум читал, но после того, как мне выдали пачку из 30-ти сообщений, которые надо было расшифровать, которые нужно было как-то построить виртуальную машину у себя, чтобы понимать, каким образом взаимодействовать, как-то понять, как надо кликать и так далее, я бы на это потратил уже недельку. Вы как-то тестировали, сколько людям нужно для того, чтобы вообще разобраться с этой игрой и понять, что хотят от людей? Да, у нас была куча тестов. Мы прям каждый кусок этой игры тестировали. Вот у нас первый тест показал, что расшифровка для некоторых людей, это прям какой-то психологический барьер составляет. Мы, соответственно, сделали коллаборативную расшифровку. Мы потестировали, что создание виртуальной машины на этих комбинаторах, это тоже может быть засада. И может, у смышленых людей может занимать 6-8 часов. Соответственно, у неподготовленных это будет гроб для них. И поэтому мы запланировали два таких компенсирующих действия. Для тех, кто провозится с этой виртуальной машиной. Мы сделали, во-первых, короткий видеокурс, который объясняет какие-то тонкости реализации этой машины. И во-вторых, мы в какой-то момент, я, честно говоря, забыл, когда это, но через сколько-то часов, через много часов, мы опубликовали какую-то основную часть этой виртуальной машины на псевдокоде. Это для помощи тем, кто так и не смог реализовать через много часов. Я не помню, по-моему, через 12 часов, что ли мы, или через 18 часов, что ли, через какое-то большое количество часов. Это ночью было точно. Это было ночью, вы с Игорем Лукайным сидели и писали эту машину. Не помню, через сколько. Мне кажется, что важный момент, вообще, вот сейчас Паша такой завел разговор, важный момент, что мы в этом контесте, понимая его сложность, специально придумали вот так вот публиковать какие-то результаты с такой скоростью, с которой, по нашим расчетам, средняя команда должна успевать это решать. То есть нам очень хотелось, чтобы команды не вываливались из контеста, потому что они не смогли вовремя достаточно быстро какую-то часть нашей задачи решить. И поэтому мы решение этих частей поэтапно выкладывали, обернув это в сеттинг тем, что, в общем-то, мы, организаторы ECFPC, тоже помогают астроному Ивану Зайцеву, значит, справляться с этими инопланетными сообщениями, и свои результаты просто публикуют. То есть вот как будто бы команда, состоящая из организаторов контеста, тоже что-то делает. Ну вот они придумали, как виртуальную машину сделать, вот выложили псевдокод, поняли, какие тонкости в ней есть, записали пару обучающих. Обучающий курс, это на самом деле громко сказано, там 3-5-минутных видео, по-моему, было, что-то такое. То есть эту идею мы украли, ну, по крайней мере, у меня в голове, она украдена у марафонцев. У марафонцев есть такие люди, которые называются пейсмейкеры. Это, в общем, обычно человек, у которого какая-то яркая одежда, и у него там на спине, допустим, написано, например, 2 часа 20 минут. Значит, этот человек бежит с такой скоростью, что он пробежит всю дистанцию за 2 часа 20 минут. Если вот это твое расчетное время, ты можешь просто рядом с ним бежать, и ты за такое время пробежишь. И у меня в голове был именно такой пейсмейкер. То есть мы выкладывали подсказки и даже ответы на какие-то вопросы с той скоростью, с которой нам бы хотелось, чтобы средняя команда успевала решать этот контест. И тем самым мы предполагали, что мы оставим в игре те команды, которые отстают. Ну, насколько это хорошо получилось, сложно сказать. Ну, это сработало в каком-то смысле. В смысле, по анкете, судя по анкете, значит, много команд ответило, что они написали в итоге свою виртуальную машину успешно благодаря либо видеокурсу, либо нашему псевдокоду. Видеокурс был раньше, псевдокод был позже. Но, с другой стороны, были команды, которые на нас обозлились. Это были те команды, которые успели дописать и отладить свою виртуальную машину ровно к тому моменту, как мы опубликовали псевдокод. Мы тут сутки фигачили, а вы просто взяли и все опубликовали. Вы нехорошие люди. Пара команд была таких. Да, но это немного людей таких было. Пара команд возмущалась, а еще куча людей приходила и говорили, вы чего возмущаетесь, наоборот, нормально все. Так что такая спорная тоже штука. Ну, опять же, она, конечно, спорная, но мы, когда находились уже перед контестом, и все наши тесты показывали, что виртуальная машина это сложный этап, нам нужно было как-то его упрощать. Виртуальная машина сама по себе не упрощается, и нужны только какие-то компенсирующие меры. Вот мы наделали побольше тестов, спецификаций, чтобы легче было отлаживать эту машину. Придумали идею с видеокурсом, придумали идею с псевдокодом. У нас не было выхода, нам нужно было как-то спасать людей от этой сложности. Вначале хотели вообще делать не на псевдокоде, а на каком-нибудь экзотическом языке научном, чтобы сам астрономовый от зайца все написал на виртуальной машине, на Фортране. Кабул, Фортран. Кабул, да, такой тоже вариант рассматривали. А очки-то что давали? А дальше такая часть сеттинга, что как только организатор Иван Зайцев понимал, понял точно так же, параллельно с участниками, понял, что речь идет про какой-то турнир, который случится по счастливому стечению обстоятельств, ровно в момент окончания ACFPC, там тоже был в этой операционке в нашей программе, был таймер обратного отсчета, по которому было понятно, когда это все закончится. Как только он это все понял, он сказал, нам нужно написать бота, значит нам нужно выбрать самого лучшего бота, и якобы давайте мы проведем среди всех участников ACFPC маленький турнир свой локальный, и выберем победителя, и этот победитель будет представлять человечество в том межгалактическом турнире, не межгалактике, а как там, внутригалактическом, всегалактическом турнире, значит в этой игре. И вот собственно тогда, вот в этот момент сеттинг до конца раскрывается, что сообщение, виртуальная машина, операционная игра, турнир, и дальше Иван Зайцев организует локальный земной турнир, чтобы выбрать представителя, нашего представителя, который будет сражаться. И соответственно очки давали за... Ну и дальше вот этот локальный земной турнир, он как раз и есть основной контест. Ну там конечно у нас были очки за Lightning, в ACFPC Lightning тоже положено оценивать, но с Lightning интересно получилось, что в момент его заморозки, то есть то, что видели участники, всего две команды, из всех их нескольких сотен, смогли сделать хотя бы одно, один пара. А что вне заморозки было, мы вам не скажем, потому что это секрет. Это я на всякий случай, чтобы никто не проговорился. Давайте я объясню про Lightning, это тоже непонятно. На самом деле традиционно, опять же, у ACFPC есть две части, за которые награды раздаются отдельно. Это так называемый Lightning Division, первые 24 часа, и полный раунд, то есть все 72 часа. И бывает по-разному, иногда первые 24 часа, то есть иногда задача одна и та же, но за 24 часа кто-то успел. Насколько хорошо ты можешь решить эту задачу за 24 часа, оценивается отдельно, и за это отдельный приз дается. И насколько ты можешь решить эту задачу за 72 часа, тоже за это дается отдельный приз. В нашем случае эти задачи были отдельные, то есть за Lightning round за 24 часа мы давали, в нем оценивалось, насколько продвинутую реализацию этой виртуальной машины смогли создать команды, и очки там зарабатывались за прохождение неких обучающих уровней. Ну то есть там нужно было достаточно хорошо реализовать эту виртуальную машину, чтобы можно было в ней на экране потыкать вот в эти пиксели, покликать, понять о чем там идет речь, и пройти несколько обучающих уровней вот в этих вот галактических боях. И за прохождение этих уровней начислялись очки. А в полном раунде, соответственно, там уже за победу в самих боях очки начислялись, а не в тренировочных раундах. И еще одна традиция, про которую сейчас Иван сказал, это заморозка лидерборда. Как правило, за несколько часов до конца, ну, соответственно, Lightning раунда и полного раунда замораживается публичный лидерборд, который вообще-то есть, то есть всегда можно посмотреть, кто сейчас на каком месте находится. Его состояние замораживается так, чтобы была интрига, ну и, соответственно, непонятно было, нам же нужно протянуть эту интригу до августа, чтобы объявить победителей в конце августа на конференции. Мы не можем позволить себе показывать лидерборд до конца. Вот, собственно, от этого и заморозка. Да, понятно. Тут, кстати, может быть хороший момент Ивану как раз рассказать про нашу турнирную систему и про вот эти лидерборды всякие. Вообще непонятно пока, что такое турнир в данном этом понимании. А, окей, хорошо. Наверное, продолжает Паша рассказывать, что такое галактические бои. А, никто из вас не хочет рассказать? Я что-то много говорю. Ну тогда Иван пусть рассказывает. Я тоже много разговариваю. Да я тут наушники... Алло, алло. Я пытался наушники свои зарядить, они у меня внезапно разрядились, поэтому от меня, наверное, было эхо какое-то. Вроде сейчас нормально, они последние 5 минут уже заряжались, должно нормально быть. На самом деле мы там долго думали что-то пихать внутрь этого Galaxy Pada, не хочу называть его Galaxy Note. И у нас были разные задачи, вот мы придумали этот Planet Wars, сначала мы там просто рассматривали космические войны в космосе, Паша скидывал нам видео, мы смотрели как там вообще будут проходить войны в космическом пространстве в будущем, исходя из этого придумали идею. Потом, ну, в таком довольно ограниченном интерфейсе, которое мы решили выбрать сложно, сделали настоящую такую полноценную, да еще и с дробными числами галактическую войну, либо там будут целые числа, но очень огромные. И тут как раз случился Advent of Code, и там была интересная задачка, не помню с каким номером, где какие-то кораблики летали вокруг планеты, и там была дискретная вселенная. И там были очень-очень интересные орбиты, по которым они летали, но совсем не круговые. Мы решили взять эту задачку, немножечко ее переделали, адаптировали, и вот засунули вот убой такой вот внутрь нашего облада. Давай я немножко про... все-таки вклинюсь. Advent of Code, минутка рекламы, это проектик, который делает Эрик Васл каждый год, это 24 дня перед Рождеством, каждый день публикуются две задачки. Ну, одна задачка, на самом деле, с двумя частями, простая и сложная. Это как бы такой адвент-календарь для программистов. И он придумывает всякие клевые задачки. И вот одна из задачек, шестой день, это я помню, я специально посмотрел, подготовился. Одна из задачек, это была дискретная гравитация. Очень простая математика, идея такая, если у нас есть планета, то она притягивает все тела по простой формуле. По какой координате тело дальше от планеты, по той координате действует сила, скорость притягиваемого тела меняется на единичку. Ничего не зависит ни от расстояния, ни от чего. Просто все тела всегда притягиваются на единичку к планете по той координате, по которой больше всего расстояние. Но не совсем так. У него было по любой координате, по которой есть разница, по ней будет единица. Такая у них была Манхэттенская метрика, а у нас Чебышевская метрика. Да, мы чуть-чуть переделали. И мы посмотрели на это и такие клево, так просто и так интересно и необычно. А при этом параллельно идея с космическими боями, в чем соль была, была соль такая, что любые бои в космосе, они очень контуинтуитивны. Если ты хочешь приблизиться к врагу, тебе нужно лететь не к врагу, а от черти куда, чтобы какой-нибудь гравитационный маневр совершить и через сколько-то времени подлететь к этому врагу. И мы хотели сделать что-нибудь в таком духе. Такую игру, в которой не очень интуитивно все получается. Ну там, банально, если ты хочешь не упасть на планету, то тебе нужно направлять двигатели не от планеты, а по касательной к планетах, чтобы по орбите летать, выйти на орбиту. Вот, то есть это... И мы хотели что-то такое сделать и опять изучали, ну как устроена эта физика. Я нашел методичку, там, какой-то учебник о космической орбитальной механике. И там прям формулы, формулы производные, интегралы, там, все сложно. Дифуры всякие. И мы такие, блин, сложно. Слишком сложно. И тут вдруг появляется Advent of Code с вот этой вот простой, очень дискретной, значит, дискретной механикой. И мы такие, это надо брать к себе. И забавно, что к этому моменту у нас даже код был написан. У нас был написан движок вот этих вот планетарных войн и даже уже пара ботов была, которые играли в эти штуки. И в этот момент мы такие, не, надо все переделывать. И переделали. И таких переделок у нас еще было несколько. Ну там, дальше уже в январе еще там пару вещей переделывали. Так что вот такая была история. Ну да, в общем, задачка получилась. Короче, мне понравилось именно то, что абсолютно контуинтуитивные орбиты получаются вот с такой физики. Они летают вообще не по кругу, они летают по каким-то очень странным траекториям. И это стационарные орбиты. То есть там летает кораблик вокруг планеты, допустим, по условной дуге параболы. Покруг планеты облетает туда, сюда, туда, сюда, туда, сюда, как на качельках качается. Это орбита. Это вообще супер. Ну вот. Ну то есть орбит, если что, не надо топлива, и ты сам просто болтаешься по такой странной траектории. И это стабильно. Так, хорошо. Вот у нас есть корабль, и он болтается вокруг по орбите. А за что очки-то дают? Так, кто? Я расскажу. Ну давайте я вклинюсь. Забрал ротный микрофон. Там механика такая. У нас есть корабль. На самом деле два корабля, два участника. Это дуэль. Один корабль – это защитник, другой – атакующий. И сколько-то времени на раунд. Если атакующий успевает убить все корабли противника, то он выигрывает. Если не успевает, то выигрывает защитник. То есть нифиг не бывает, только если... Ну, нифиг не бывает, в чистом виде. И дальше какие действия разрешены? Можно включить двигатели и куда-нибудь ускориться. Например, выйти на какую-нибудь орбиту или полететь в сторону противника или еще что-нибудь. А во-вторых, можно стрельнуть каким-то лучевым оружием. Странным оружием. У нас было такое странное оружие. Ты указываешь точку, в которую хочешь стрельнуть. И значит, все, что находится рядом с этой точкой, нагревается. У каждого корабля есть при этом температура. Если ты долго стреляешь в кораблик, он нагревается. Температура становится выше какой-то критической. И если температура поднялась выше критической, кораблик начинает разрушаться потихоньку. Вот так, собственно, кораблик можно уничтожить. Другой способ уничтожить кораблик – это взорвать свой корабль. Это принесет какие-то разрушения в некоторой окрестности. То есть если атакующий подлетел к единственному кораблю защитника и взорвался, то все, атакующий выиграл. Вот таких вот два оружия было у наших кораблей. Это лучевое оружие и взрыв. Подрыв своего корабля. И еще одна была механика – это деление кораблей. Я мог любой свой корабль поделить. Ну и соответственно, все топливо, которое есть у моего корабля, поделить между двумя новыми. Все оружие, которое у меня было, поделить между двумя. И там, что там еще? Радиаторы. Радиаторы – это были такие штуки, которые охлаждали твой корабль. Тоже поделить между кораблями. Ну и получается, такие механики. Стреляй, взрывайся, делись. Я тут в пашу шлинись. Я запостил в чат, ну и видимо в шоуноутс тоже попадет ссылку на один из твитов нашего официального аккаунта, где как раз видео визуализации одного из боев, где демонстрируется массовое разделение кораблей на части, орбиты, взрывы. Это такие фиолетовые квадратики. Это взрывы, которые можно уничтожать. Ну и собственно, как эти орбиты вообще работают. А еще тут, наверное, можно упомянуть, что у нас прямо во время соевнования у нас было тв на твитче. Мы транслировали бои лучших команд. Предлагали командам, которые устали и хотят отвлечься от программирования, посидеть и посмотреть непрерывно на юпите текущие бои в нашем турнаменте. Ну вот это видео как раз из этого нашего твитча. Да, это еще не ответственный вопрос, за что же мы даем очки в самом-то деле. Ну то есть это турнир, турнир ботов. Значит нужна какая-то турнирная таблица. Ботов там очень много, и поэтому нужен какой-то механизм, который будет постоянно завести бои и считать некий рейтинг участников. Сейчас это плюс-минус стандартная механика, это TrueSkill майкрософтовский. И есть публичные бесплатные реализации. Есть там хорошая статья от Джеффа Мойзера, там какая математика за всем этим стоит. Ну и все, просто взяли эту математику и сделали по TrueSkill считаем рейтинг, по TrueSkill, ну в смысле по рейтингу делаем матчмейкинг, выбираем кто с кем будет биться, ну так, чтобы как можно быстрее рейтинг к истинному, к TrueSkill приходил. Ну и все. И дальше у нас было довольно много копий сломанных на тему, как решить такую проблему. Вот в том же Coding Gaming, например, она есть. То, что топовые участники, которые хорошо играют, они не отправляют в бой свой лучший алгоритм. То есть они его придумали, в песочнице отладили, но не дают ему играть. И поэтому другие участники не видят, как хороший алгоритм играет, не могут придумать, как с ним бороться. Это неинтересно. В смысле, там уж интересно, интересная особенность, но мы как раз хотели против нее как-то поиграть. Сделать так, чтобы заставить участников играть. И у нас было несколько идей, и победила такая идея, своего рода, ну как вот этапы Кубка Мира. В биатлоне, например, да, то есть участники участвуют в каких-то там этапах Кубка Мира, зарабатывают за победу или за какое-то там 2-ое, 3-ое, 4-ое, 50-ое место, какое-то количество очков в течение года. И набирают эти очки. А потом топовых участников, кто набрал больше очков, на Олимпиаду. На Олимпиаду отбираются. В финал, в нашем понимании. То есть получается, что мы разбили весь наш... Ну, длинный там, сколько там получается? Двое последних суток разбили на этапы. Соответственно, ты должен был участвовать в реальных турнирах, постить туда своего хорошего работы, когда занимал бы хорошие места, получать какие-то очки. Ну, за первое место 50 очков давали, за второе 44, но я точно не помню цифры. В общем, какая-то была формула, похожая на то, как в биатлоне используется. Похожая. И все, и, соответственно, тот, кто по сумме всех этапов попал в топ-20, тот отобрался в финал. И там уже, получается, уже матчмейкинг был не на основе рейтинга, а просто каждый с каждым. Ну, рандомный, короче говоря, матчмейкинг, но такой же трускилл. И мы играли его, пока, в общем, явно не выявили победителя. То есть это, с одной стороны, решает эту проблему, то, что участники вынуждены публиковать свои решения раньше, и люди их видят, люди могут придумать, как с ней бороться. С другой стороны, все равно побеждает то решение, которое лучше других играет. Вот. Вот такой вопрос. Вы боретесь с возможными... Это даже читами нельзя назвать, наверное. Когда используют игровую механику уже во время самой игровой механики. А на самом деле это стоило того? То есть на самом деле у вас такая проблема была бы? А, ну это прям каждый год есть такая проблема в ESFP. Либо некоторые организаторы ленятся придумать, как обеспечить участников живым лидербордом, так, чтобы можно было смотреть лидерборд и говорить, и видеть, насколько ты крут или не крут. Либо они делают лидерборд, делают лидерборд, но ты в него смотришь, а он мало чего тебе говорит, потому что участники скрывают свое лучшее решение. Ну или там не считают важным... Например, бывают тасковые челленджи, в которых нужно решить все задачи. И вот некоторые команды они специально не решают некоторое количество задач почти до конца, чтобы не светиться в лидерборде. Например, так. И получается, что лидерборд как бы есть, но он как бы мало информативен. И это обычно всех бесит и всем не нравится. Потому что зачем такой лидерборд? И мы старались с этим бороться. В итоге, что мы заметили, что одна из самых топовых команд, это команда Unagi, японская, они делали в точности так. Они не светили своего самого лучшего бота до последнего дедлайна этапа. Ну, когда, в общем, до момента, когда он уже в бой уйдет. И только в этот момент его опубликовали. Он начинал играть и поднимался на какое-то первое, второе, какое-то высокое место. Можно описание, что значит публиковали? Ну, там, ставили галочку в нашей системе, что вот эту версию бота отправь, пожалуйста, в игру. Что значит версия бота? Я пока плохо понимаю взаимодействие сервера, который принимает ботов, и людей, которые пишут этих ботов. То есть я должен был что послать? Ну, правильно. Мы же не рассказали еще, да? Мы же еще не рассказали, как Иван Зайцев организовал весь турнир. Там идея была такая. Он говорит, ну, давайте я организую локальный турнир, но чтобы сетевые задержки сильно не влияли на результат, вы присылайте мне вашего, ну, вашу программу, которая в качестве первого аргумента условно принимает адрес моего прокси-сервера к инопланетянам. И ваша программа должна как бы через вот этот вот через визуальный интерфейс вот этой инопланетной программы или минуя этот интерфейс, как угодно, начать игру. Игру такую, которую им, которую скажут этой программе извне с помощью, там, аргументов командной строки. То есть, другими словами, Ивану Зайцеву нужно дать программу, которой он даст адрес сервера и, значит, идентификатор игры, к которой нужно присоединиться. Вот так вот. Ну и, соответственно, участники могут присылать, значит, программы свои и в веб-интерфейсе нашего контеста видеть разные версии, ну там, все версии, которые они прислали, сохраняются. И там же, в специальном столбце выбрать, какую из этих версий они хотят, чтобы, значит, Иван Зайцев взял для участия в турнире. Ну и могут переключать, например, включить одну, посмотреть, что она играет, стала играть хуже, например, чем предыдущая версия, обратно откатиться на предыдущую версию. Ну и так далее. Вот. Ну это, на самом деле, довольно типичная история, когда ты видишь, ты отправляешь в игровой сервер несколько разных ботов, и можешь как-то между ними выбирать, какой считаешь лучшим. Просто мы в этом году сделали не так, как обычно это делается, это вот у нас Леша главный за эту всю систему. Ты, Леша, нам расскажешь? Ну давайте, в двух словах расскажу. Да, в общем, как Паша правильно сказал, у нас основная цель вот этого вот, вот этой всей истории с там, с создачей собственного кода, она была для того, чтобы поставить всех участников в равные условия. Ну то есть, как мы вот сейчас рассказывали до этого, у каждого участника была какая-то своя реализация вот этой инопланетной виртуальной машины, из которой время от времени нужно было делать запросы через наш прокси, как будто бы к инопланетянам получать какой-то ответ. Ну и в конечном итоге нужно было написать какой-то, ну там, либо самому научиться управлять космическими кораблями, кликая в этот интерфейс, ну либо написать какую-то программу, которая будет за тебя кликать и твоим космическим кораблем управлять, там, а если ты разделил его на 96 космических кораблей, то, соответственно, каждому из этих 96 космических кораблей управлять, отдавать им команды, стрелять там или на какие-нибудь орбиты выходить. Вот, и, естественно, когда мы захотели проводить чемпионат, то есть сталкивать разные команды друг с другом, встал вопрос, ну, конечно, мы должны сделать какие-то ограничения по времени, то есть, ну, этот вот искусственный интеллект, который управляет космическим кораблем, он же должен принять решение, что ему делать дальше, какую-то симуляцию построить внутри себя, модель происходящего и сделать выбор. И для того, чтобы эта задача была сложной и интересной, мы должны какие-то ограничения поставить, то есть ограничить количество памяти, которое он может съесть, ограничить количество времени, которое он может думать, ну и так далее. Вот. И если, ну, эти ограничения довольно довольно такие строгие, то есть мы давали, по-моему, 100 миллисекунд на ход, ну, на то, чтобы принять какое-то решение от алгоритма участника, и если, допустим, наш сервер находится, например, в России, а участник, который нажимает кнопки на себя, ну, или запускает искусственный интеллект у себя на компьютере, и он находится где-нибудь в Калифорнии, то 100 миллисекунд, ну, они там превращаются в 50, а то и в отрицательное значение. И могло оказаться, что мы вот с этими лимитами в битвах даём участникам неравные условия, если мы даём им возможность биться, ну, вот находясь там, где они находятся, и общаясь с нами по сети. Поэтому мы предложили всем сдавать нам свои решения в виде кода, и этот код мы запускали у себя на одном и том же сервере, запускались решения обеих команд, и они бились, ну, грубо говоря, по локальной сети друг с другом, то есть там задержки были гарантированно одинаковые, и 100 миллисекунд означало одно и то же для обеих команд. Вот это было важное решение, но оно за собой потянуло очень много всяких интересных технических решений. То есть одно дело, когда ты выставляешь код HTTP-аппи наружу, его дёргают какие-то люди извне, а другое дело, когда ты должен принимать исходный код на каких-то разных языках программирования, уметь у себя его запускать, и, значит, вот две программы, написанные на разных языках, запускать на одном и том же сервере, и они между собой должны какими-то запросами обмениваться, да, не между собой, а с одним и тем же сервером. Вот мы сделали... Ну, тут, наверное, достаточно... не слишком нескромно будет сказать, что мы сделали по сравнению с предыдущими контестами ICFPC большой прорыв, потому что, как правило, раньше вот такие вещи, они сдавались либо в виде zip-архива просто с исходниками, либо в виде виртуальной машины, на которой установлены все мыслимые языки программирования, там, компиляторы и средоразводки в мире, и на этой виртуальной машине запускался код участников. А мы в этом году сделали сдачу решений, во-первых, в виде докеробразов, то есть решения участников запускались в докерконтейнерах, и вот такой один докерконтейнер против другого бился у нас на наших серверах. А во-вторых, мы сделали сдачу решения не через загрузку zip-файла в форме на вебе, а мы сделали сдачу решения через гид-репозиторий, то есть такая светлая идея была в том, что команды, которые участвуют в 72-часовом контесте, если это хотя бы там вдвоем или втроем, даже на самом деле в одиночку, наверняка пользуются какой-то системой контроля версий, то есть невозможно над одной и той же кодовой базой работать в течение трех суток вместе и не пользоваться гидом или чем-нибудь для того, чтобы избежать конфликтов и потерь. Даже одному невозможно. Даже одному невозможно. И светлая мысль была такая, давайте мы скажем, ребята, вы же наверняка свой код храните все равно на гитхабе, на битбакете или на гитлабе где-нибудь. Давайте вы просто наш SSH-ключ положите к себе в доверенное, и мы будем у вас забирать содержимое ветки с названием submission, эту ветку на своей стороне собирать в docker-контейнер и использовать как сданное вами решение. То есть вы не будете собирать zip-архив, идти на веб-страничку, его туда загружать в форму, нажимать submit. Этого все делать не будете, вы просто делаете, разрабатываете свой код как обычно, делаете git push, и мы автоматически вот эти ваши изменения подтягиваем, ну а с нашей стороны это как такой CI выглядит. То есть у нас там на самом деле TeamCity внутри запущен, он собирает бесконечно, постоянно собирает все репозитории всех участников и отправляет их в турнир. Они там в турнире бьются, а результаты показываются на лидерборде. Ну и вот это решение, оно потребовало с нашей стороны существенных вложений в то, чтобы много всякой инфраструктуры интересной понаписать, это наверное там отдельный целый выпуск, можно говорить о том, как это все устроено. Но участники очень хорошо восприняли эту систему, то есть прямо много было отзывов, в которых говорили, что это вот прям 21 век, то есть это то, чего не хватало, то, что ждали давно.",
    "result": {
      "query": "icfpc 2020 contest overview"
    }
  }
]