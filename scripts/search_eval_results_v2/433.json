[
  {
    "segment_id": "e0980f43-a092-49da-a4d3-05decca0e90c",
    "episode_id": "7ca4c918-6d3c-4df6-96aa-b9d7d2474cae",
    "episode_number": 433,
    "segment_number": 6,
    "text": "Если я правильно понимаю, оно эволюционировало из Кликхауза. Не знаю, остался ли там хоть кусочек кода Кликхауза, но в статье так написано, что они начинали с Кликхауза, с кластеров Кликхауза их довольно сложно было менеджерами управлять, и вот оно росло, росло и превратилось в то, что превратилось. Архитектуру Сноу Флейка мы в этом подкасте уже обсуждали, поэтому я не буду в это снова вдаваться. Здесь все очень похоже. Есть статья с деталями, если прям хочется их почитать. Но это просто занятно, что вот теперь есть по большому счету open source на литеративы Сноу Флейку. Не знаю, насколько она хорошая, ничего не знаю, но звучит интересно, и интересно, что там где-то пробегал Кликхауз. А дальше Саша на тему. Да нет же. Да даже. Ну что ж. Я посмотрел, я начал потихоньку разгребать записи докладов с Pigecon 2023. Я посмотрел открытие Pigecon'а, закрытие Pigecon'а, там особо смотреть нечего. А еще я, а, ну кроме одного, кроме одного момента было озвучено, что в следующем году Pigecon будет скорее всего проходить не в Канаде. Такой вот занимательный факт. Ммм. А еще я посмотрел доклад, который называется IPC in PostgreSQL, читает Томас Мунро. Доклад немножечко такой сумбурненький, смотреть его или нет не могу, не могу ответить, но я вкратце расскажу о чем он, чтобы вы составили общее представление. Вот. Томас говорит, что сигналы это сложно, они бывают синхронные и асинхронные, никто никогда не помнит в чем между ними разница, но я вам расскажу. А еще у меня в детстве был ретро компьютер Sinclair ZX81 и это нерусмысленно означает, что если вы хотите разбираться в базах данных, вы должны разбираться в ретро компьютерах. Ретро компьютеры рулят, так он и говорит, честно-честно. А еще он напоминает, что компилятор C может переставлять написанные вами строчки кода, как ему вздумается, если компилятор считает, что так они будут лучше исполняться, конечно, если вы не напишете volatile. Вот. В хендлерах сигналов нельзя брать локи, по понятным причинам, потому что если вы вот у вас исполняется нормальный код, он берет на что-то лок, шуршит, шуршит, в этот момент у тебя приходит сигнал, ты попадаешь в хендлер, в этом хендлере ты пытаешься взять лок, а он уже залочен, и у тебя случается дедлок. По этой же причине по большому счету нельзя работать с файлами, потому что, в частности, у тебя syscall затрут глобальную переменную rno и сломает твой... если ты в обработчике сигнала затрешь rno, то у тебя сломается тот нормальный код. Как результат ты не можешь в... как результат из предыдущих двух пунктов, из того, что нельзя брать локи и нельзя работать с файлами нельзя, в частности, в Postgres делать e-Log, то есть логировать, смотри выше, warning, debug1, debug2, error, panic, ничего нельзя логировать, потому что это одновременная запись файла и взять локов, потому что... потому что, поверьте мне на слово, вот. А еще сообщается, что возможно у вас в программе на C вы используете System, так знайте, что System... нет такого syscall System. Есть syscall fork, есть syscall exec. И если вы в коде используете System, то у вас потенциально тоже возникает race condition, когда у вас зарегистрирован обработчик сигнала, и вы фарканулись, и у вас есть два процесса с одним и тем же обработчиком, но вы еще не сделали в дочернем процессе exec, и в этот момент кто-то решил послать в группе процессов сигнал, и он обработается одновременно и в родительском процессе, и в дочернем процессе, и вот вы можете думать, что System он атомарный, он не атомарный, и ваш сигнал обработается дважды, потому что вы еще не сделали exec и не подменили обработчик сигнала. Вот, знайте про такие вещи. Вот, и чтобы не иметь всей этой головной боли, мы в Postgres в 2010 году придумали примитив синхронизации, которая называется latches, и рассказывается про то, что такое latches, в это я углубляться не буду, потому что я не так давно пост об этом написал в блоге, вот, но в двух словах, если все-таки в двух словах, то latch это механизм, у которого есть метод set и есть метод reset, а еще есть метод wait, и когда ты ждешь на latch, то ты выйдешь из этого ожидания, либо по указанному тобой тайм-ауту, либо когда кто-то снаружи сделает этой защелке, этому latch-у set. Плюс к этому ты можешь ждать нескольких latch-ей одновременно. Такой вот примитив, но он как раз придумывался как примитив, который как сигнал ему лучше, с меньшим количеством вот этих странных вещей о которых надо помнить, а еще у Postgres есть особенность, что нужно на Windows тоже работать, а на Windows сигналов вообще нет, поэтому приходится что-то изобретать. Вот. Если что-то из вот сказанного вам показалось интересным, то посмотрите доклад, там как бы вот без срыва покровов, что вот такие вещи, про которые никто никогда не узнал, но что-то, что освежить в целом полезно, если ты занимаешься относительно низкого уровня программирования, пишешь на C, работаешь на Windows, пишешь с Postex, вот. Если вам ничего из сказанного не показалось интересным, ну и забейте. У меня все. Большое спасибо. Я все это слушаю и такой, блин, я все это делал Вы чувствуете, мы это делали? Да, да, да. И благополучно забыл. Настолько редко нужно напрямую с сигналами работать. Я помню, что это вот помнишь все эти сложности, помнишь, что они есть, думаешь, ну его нахер. И в принципе понятно, почему разработчики Postgres точно так же подумали. Ты знаешь, оно поначалу вроде даже просто, а потом ты открываешь вот ту книжку Стивенс, по-моему, написал, Advanced Unix Programming, как так называется, по-моему, это Стивенс, но я могу ошибаться. И там вот как бы поначалу все окей, а еще у нас есть группы процессов, и вот они с сигналами взаимодействуют вот так вот, а еще у нас в Postex есть треды. У нас есть треды и сигналы. Вот сейчас вам вообще пизда будет. И понеслось. И да, действительно, в этот момент ты думаешь, да ну его нахер. Вот, и на этой чудесной ноте... Кстати, Rust вам с этим не поможет. Да, ну очевидно, что тут как бы... Если вам нужно использовать рекламу, то примите компенсационную систему. Если у вас есть Postex, треды и сигналы, и группы процессов, вам вообще ничего не поможет. Да, возможно. Я еще тут? Ты еще тут. Мне просто почему-то Trello сказал, что я уже не в офлайне, а я подумал, что может быть меня совсем выбросило. Я тут обновил клавиатуру. Я очень долго, прям просто бесконечно долго ждал, как наконец выпустят новый Ultimate Hacking Keyboard. Он уже некоторое время как существовал. Я все вот ходил, ходил, ходил. Тут на него пошли обзоры. Ходил, ходил, ходил, в смысле вокруг да около не покупал, потому что я точно знал, что не хочу предыдущую версию. Там обещали много доработок, я уже не помню всех в новой версии. Ее не только начали шипить, уже появились обзоры. Я что-то понял, что это не так. Я посмотрел один обзор, другой обзор, и мне вот настолько не понравилось. Во-первых, мне очень не понравилось то, какая она вся, вот как по русским словам, flimsy, как это по-русски. То есть сама клавиатура нормальная, но вот ножки к ней, вот эти прикручивающиеся подставки для рук, оно все выглядит таким хлипким и отваливающимся. То есть какие мои требования к клавиатуре? Вообще идеальная клавиатура для меня это механика, разделенная, под углом, половинки, чтобы они как бы от центра к бокам поднялись, чтобы центр был приподнят.",
    "result": {
      "query": "Ultimate Hacking Keyboard отзывы"
    }
  }
]