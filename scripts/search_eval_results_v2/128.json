[
  {
    "segment_id": "19704022-f6e5-498c-80bf-d1faf6a2507e",
    "episode_id": "68bc8d37-85ef-4757-920f-2a6d8ec2ea5f",
    "episode_number": 128,
    "segment_number": 2,
    "text": "Я вижу тут гидры, на заднем плане это разобранный The Link, по-моему. Еще тут куча... а, сбоку это Bass Pirate, по-моему так называется. Короче, я весь 2600 просто записывал название, которое я потом буду вбивать в гугле и пытаться разобраться. Больше всего меня впечатлило... на МАКе мне показали пример Software Defined Radio, где можно переключать диапазоны и смотреть прикольные картинки, что типа вот это твой Wi-Fi, а вот это тут рабочие по рации ругаются и так далее. Я обязательно хочу этому научиться. Ходите на 2600, если вы еще этого не делаете. Да, кстати, я рассказывал, что собираюсь раздавать всякую электронику, которая мне уже не нужна, хорошо разошлась. Из трех коробочек осталась только одна. А ты, кстати, тут паяльник-то заказал? Ведь он где-то дошел, да? Это ты про него говорил? Да, посылка пришла, только забрать нужно. А, понял. Но в воскресенье почта не работает, так что... Я вот сейчас собираюсь заказать, потому что оказалось, что у меня есть такой блок питания, который там нужен. А откуда? Ты же не пользуешься PC? Не знаю, у меня есть ящик с инструментами подобными, электронами всякими старыми. Знаешь, у меня есть подозрение, что Света очень мало говорит в этом выпуске и тем не принесла. А тем временем ее давно пытались расспросить про Лондон. И куда делась эта тема? Она в самом низу. Нашел, нашел. Света, скажи, ты готова рассказать про Лондон или еще не готова? А про что вам рассказать конкретно? К выпуску 118 у нас все входы записаны. Был вопрос сейчас от Максима Мышкова. Хочется услышать от Светы рассказов про ее стартаперство. Раз вен выпусков, она упоминает что-то, но все очень обрывчиво, и цельной картины не складывается. Пусть побудет в подкасте в качестве гостя. Вопросы? Так может давай как-нибудь действительно сделаем меня в качестве гостя и расспросим? Ну а то если ты на 40 минут хочешь столкнуться с ней? Ну просто подозреваю, что оно получится очень большим. Ну тогда в следующем выпуске ты не отвертишься, ты понимаешь. Черт, черт. Ну по крайней мере на этот выпуск я придумала себе отмазку. Да, да, да. Ну а следующая тема Валерина про оптимизацию запросов. Ну я на самом деле все-таки да, мне почему-то казалось, когда я вышел по тексту этого панела, что мы это в прошлом выпуске обсудили. Скорее всего дело в том, что я это прочитал в начале недели. Конечно же я все же забыл. И мне показалось, что мы это обсудили в прошлый раз. Но вот тут в блоге нашего горячо любимого Адриана Койлера появилась заметка о том, что... Мне кажется на прошлом неделе, нет, в начале этой недели, неважно. Заметка в ревью статьи очередной с VLBD 2015. О том, насколько Cardinality Estimation, оценка размера, множество, возможность значений влияет на планирование запросов, планирование джойнов. Спойлер влияет сильно. Есть такая штука, Join Order Benchmark. И собственно эта статья его и вводит. И раньше, то есть типично, когда меряют со всякими разными оптимизациями, то берут, значит, базу и гоняют ее на каком-нибудь TPC-H. А эта бенчмарка на самом деле не про токен, сколько у вас хороший Query Planner или Query Optimizer. Оно у вас про то, насколько хорошо ваша база просто сводит транзакции. Больше того, как выяснил в свое время еще Питер Бейлиш, но в общем-то даже не сильно на всякие свойства, линерализуемость нажимает. Тут ребята заморочились и сделали бенчмарк на данных не откуда-нибудь, а из EMDB, так чтобы были какие-нибудь интересные корреляции или их отсутствие, чтобы были какие-нибудь интересные, не идеально предсказуемые, как это, кардиналити, значение атрибютов, соответственно, колонок. И ребята взяли Postgres, HyperX, не знаю, что это за база, к своему стыду, и также базу 1 и базу 2, что скорее всего на самом деле база 3. Типа Oracle, Cbase, да. Скорее всего Oracle, Cbase, что-то такое. Не-не-не, сейчас они так делают. Oracle, DB2 и Microsoft SQL Server. Но какая из них какая, никто не знает. Да, да. Потому что многих написано в лицензии, что их бенчмаркать нельзя, поэтому их не бенчмаркают. Слушай, то есть это вот из-за этого, да? Да. Их нельзя бенчмаркать? Ну нельзя публиковать результаты бенчмарка, так вот. Ну нельзя говорить, что мы померили Oracle, и он вот на таких запросах ведёт себя так. Ага, всё понятно. Это серьёзно? Это такая строчка в лицензии? Нет, это когда Oracle только появился, это была одна из таких широких тем для того, чтобы... Вот ты так подходишь к кому-нибудь и говоришь, Oracle, а у него пукан взорвается. Слушай, это очень чётко сделали. То есть при этом они оставляют лазейки, чтобы можно было понять, какая есть какая, да? Ну я не знаю, как бы... Авторы в статье, ну то есть как бы, если ты в теме, то скорее всего поймёшь, скажем так. Ну то есть тут Adrian Kohler так как-то вот примерно и намекает на это. Я бы сказал, что вероятно, что там есть SQL Server, DB2 и Oracle. В некотором порядке. Ну то есть он... Среди нескольких хинс, которые скатываются в пипе. Ну то есть как бы... Нам даже подсказывают. Так слушайте, так они же всё равно получается нарушают лицензию? Нет. Анонимно можно. Так все делают вообще. Прекрасно просто, какой красивый трэш. Я вообще прям в восторге, в восторге. Притом я, ну скажем так, не удивлюсь, если порядок алфавитный. Просто чтобы было проще всем. Ну да. Не, ну и так пейпер проще писать. Согласен, согласен. Главные читатели и писатели это знают, да? Такое соглашение джентльменов. Секрет полишинеля, да. Вот, к чему это всё? Что вообще такое планер? Вот у него есть значит на входе распаршенный, ну чаще всего селект, потому что они самые такие развесистые, мне кажется, бывают. Проверьте меня, если я не прав. У него, соответственно, ну как бы селект, ну за что я в частности не очень долюбливаю SQL, то что происходит с этим селектом потом это из области черной магии. Потому что, ну, у меня есть какой-то набор софтверных компонентов в каждой базе, которые у меня, там не знаю, из того, как там написан бэкэнд, по нему пройтись, выигрести как бы подмножество колекций, которые там лежат, как-то их сджойнить, причем там джойнов много разных, сканов много разных, проходов по индексу много разных, там, не знаю, опять-таки, джойн может базироваться на индексе, он может быть head join, можно, там не знаю, таблицу вытащить в память, потому что она маленькая, можно этого не делать, мы можем знать, что данные сортированные, мы можем не знать, что они сортированные, мы можем знать, что там где-то посередине данные понадобятся, сортированные, поэтому мы можем записать их на диск, дальше этот факт использовать и так далее. Соответственно, select ничего этого не знает, а база должна догадаться, что сейчас сделать правильно. Соответственно, происходит, ну, как вот мы не так давно обсуждали там поиск astar в множестве не только путей, но и чего-то еще, я, конечно, сомневаюсь, что там astar написан, но тем не менее у нас есть как бы множество всех возможных способов выполнять запросы, ну, просто как, ну, возьмем просто все возможные кубики, всеми возможными способами друг с другом поставим, из них, ну, там, ну, как минимум в случае подгресса выбрасываем, очевидно, плохие вещи, типа там, где у нас, получается, cartesian join и прочие совершенно плохие вещи. Дальше у нас есть вот в этом пространстве всех возможных способов выполнения, мы можем присвоить всему как бы какие-то, как каждая операция какие-то косты, но эти косты, на самом деле, должны быть домножены на то, сколько мы ожидаем там итерации, то есть мы всуем куда-то цикл, чтобы сравнить план один",
    "result": {
      "query": "Cardinality Estimation Query Planning"
    }
  }
]